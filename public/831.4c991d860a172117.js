"use strict";(self.webpackChunkfoodapp=self.webpackChunkfoodapp||[]).push([[831],{384:(E,v,c)=>{c.d(v,{e:()=>r});var o=c(262),f=c(2340),A=c(4893),m=c(520),p=c(3093);let r=(()=>{class t{constructor(i,s){this.http=i,this.commonService=s,this.BASE_URL=`${f.N.BASE_URL}/auth`}login(i){return this.http.post(`${this.BASE_URL}/login`,i).pipe((0,o.K)(this.commonService.catchError))}register(i){return this.http.post(`${this.BASE_URL}/register`,i).pipe((0,o.K)(this.commonService.catchError))}forgetPassword(i){return this.http.post(`${this.BASE_URL}/forget/password`,i).pipe((0,o.K)(this.commonService.catchError))}resetPassword(i,s){return this.http.post(`${this.BASE_URL}/reset/password/${i}`,s).pipe((0,o.K)(this.commonService.catchError))}updatePassword(i,s){return this.http.post(`${this.BASE_URL}/${i}/password`,s).pipe((0,o.K)(this.commonService.catchError))}enabled(i,s){return this.http.get(`${this.BASE_URL}/${i}/enabled/`,{params:s}).pipe((0,o.K)(this.commonService.catchError))}}return t.\u0275fac=function(i){return new(i||t)(A.LFG(m.eN),A.LFG(p.v))},t.\u0275prov=A.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},9337:(E,v,c)=>{c.d(v,{b:()=>o});class o{constructor(){this.type="error",this.visible=!1,this.title="",this.message=""}}},5705:(E,v,c)=>{c.d(v,{T:()=>o});class o{constructor(){this.number=1,this.size=0,this.total=0,this.items=[]}}},7262:(E,v,c)=>{c.r(v),c.d(v,{BranchModule:()=>mt});var o=c(9808),f=c(3477),A=c(4856),m=c(5861),p=c(2382),r=c(5705),t=c(4893),C=c(9663),i=c(5033),s=c(6939);function h(e,g){1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td",12),t._UZ(2,"c-spinner",13),t.qZA(),t.qZA())}const d=function(e){return[e]};function x(e,g){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td"),t.TgZ(2,"td",16),t._uU(3),t.qZA(),t.TgZ(4,"td",16),t._uU(5),t.qZA(),t.TgZ(6,"td",17),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.qZA()),2&e){const n=g.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(7,d,n.id)),t.xp6(1),t.Oqu(n.code),t.xp6(1),t.Q6J("routerLink",t.VKq(9,d,n.id)),t.xp6(1),t.Oqu(n.name),t.xp6(1),t.Q6J("routerLink",t.VKq(11,d,n.id)),t.xp6(1),t.Oqu(n.branchAddress),t.xp6(2),t.Oqu(n.managerFullName)}}function b(e,g){1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td",18),t._uU(2," Empty "),t.qZA(),t.qZA())}function u(e,g){if(1&e&&(t.YNc(0,x,10,13,"tr",14),t.YNc(1,b,3,0,"tr",15)),2&e){const n=t.oxw();t.Q6J("ngForOf",n.page.items),t.xp6(1),t.Q6J("ngIf",0==n.page.items.length)}}let M=(()=>{class e{constructor(n){this.abService=n,this.page=new r.T,this.form=new p.cw({search:new p.NI(null,p.kI.required)}),this.isLoading=!1}ngOnInit(){this.loadBranches()}loadBranches(n){var a=this;return(0,m.Z)(function*(){a.isLoading=!0,yield a.abService.filter(n).forEach(l=>a.page=l).finally(()=>a.isLoading=!1)})()}filter(){this.form.valid?this.loadBranches(this.form.value):this.loadBranches()}onPageChange(n){this.form.valid?(Object.assign(n,this.form.value),this.loadBranches(n)):this.loadBranches({number:n.page})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(C.b))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-branch-list"]],decls:36,vars:6,consts:[[1,"mb-4"],[1,""],[1,"float-end"],["cButton","","color","primary","routerLink","register"],[3,"formGroup","ngSubmit"],["cFormFloating",""],["cFormControl","","formControlName","search","name","search","type","search","placeholder","Search by username, email or name","autofocus",""],["cLabel","","for","search"],["cTable","","hover",""],[4,"ngIf","ngIfElse"],["showResult",""],[3,"totalItems","ngModel","itemsPerPage","ngModelChange","pageChanged"],["colspan","5",1,"text-center","my-2"],["aria-hidden","true","label","Loading..."],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"routerLink"],[1,"w-50",3,"routerLink"],["colspan","5",1,"text-center"]],template:function(n,a){if(1&n&&(t.TgZ(0,"c-card",0),t.TgZ(1,"c-card-body"),t.TgZ(2,"c-row"),t.TgZ(3,"c-col",1),t.TgZ(4,"span",2),t.TgZ(5,"button",3),t._uU(6,"Register New Branch"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"c-card",0),t.TgZ(8,"c-card-body"),t.TgZ(9,"c-row"),t.TgZ(10,"c-col"),t.TgZ(11,"form",4),t.NdJ("ngSubmit",function(){return a.filter()}),t.TgZ(12,"div",5),t._UZ(13,"input",6),t.TgZ(14,"label",7),t._uU(15,"Search by code, name or address"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(16,"hr"),t.TgZ(17,"c-row"),t.TgZ(18,"c-col"),t.TgZ(19,"table",8),t.TgZ(20,"thead"),t.TgZ(21,"tr"),t._UZ(22,"th"),t.TgZ(23,"th"),t._uU(24,"Code"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Name"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Address"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Manager"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"tbody"),t.YNc(32,h,3,0,"tr",9),t.YNc(33,u,2,2,"ng-template",null,10,t.W1O),t.qZA(),t.qZA(),t.TgZ(35,"pagination",11),t.NdJ("ngModelChange",function(T){return a.page.number=T})("pageChanged",function(T){return a.onPageChange(T)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const l=t.MAs(34);t.xp6(11),t.Q6J("formGroup",a.form),t.xp6(21),t.Q6J("ngIf",a.isLoading)("ngIfElse",l),t.xp6(3),t.Q6J("totalItems",a.page.total)("ngModel",a.page.number)("itemsPerPage",a.page.size)}},directives:[i.AkF,i.yue,i.iok,i.Yp0,i.Hq3,f.rH,p._Y,p.JL,p.sg,i.xPZ,i.oHf,p.Fj,p.JJ,p.u,i.eFW,i.auY,o.O5,s.Qt,p.On,i.ORR,o.sg],styles:[""]}),e})();var Z=c(9337),_=c(936),B=c(9030),y=c(5905),N=c(4004),J=c(262),F=c(9646),Y=c(2340),L=c(520);let R=(()=>{class e{constructor(n){this.http=n}load(){return this.http.jsonp(`https://maps.googleapis.com/maps/api/js?key=${Y.N.GOOGLE_MAP_API_KEY}`,"callback").pipe((0,N.U)(()=>!0),(0,J.K)((n,a)=>(0,F.of)(!1)))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(L.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var q=c(3315);function k(e,g){if(1&e&&t._UZ(0,"map-marker",10),2&e){const n=t.oxw(2);t.Q6J("position",n.marker.position)("options",n.marker.options)("clickable",!0)}}function P(e,g){if(1&e){const n=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"google-map",8),t.NdJ("mapClick",function(l){return t.CHM(n),t.oxw().mapClick(l)}),t.YNc(2,k,1,3,"map-marker",9),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("center",n.mapCenter),t.xp6(1),t.Q6J("ngIf",n.marker&&n.marker.position)}}let Q=(()=>{class e{constructor(n,a,l){this.bsModalRef=n,this.googleMapService=a,this.geoCoder=l,this.formattedAddress="",this.location={formattedAddress:"",latLng:{lat:0,lng:0}},this.apiLoaded=!1}ngOnInit(){var n=this;return(0,m.Z)(function*(){yield n.googleMapService.load().forEach(a=>{n.apiLoaded=a}).catch(a=>{n.apiLoaded=a}),n.location&&n.location.latLng?(n.location.formattedAddress&&(n.formattedAddress=n.location.formattedAddress),n.updateMap(n.location.latLng)):navigator.geolocation.getCurrentPosition(a=>{if(a&&a.coords){let l={lat:a.coords.latitude,lng:a.coords.longitude};n.updateMap(l),n.updateAddress(l)}})})()}updateMap(n){this.mapCenter=n,this.marker={position:n,options:{}}}updateAddress(n){n&&this.geoCoder.geocode({location:n}).forEach(a=>{a.results&&this.updateGeoLocation(a.results[0])})}mapClick(n){var a,l;this.marker={position:null===(a=n.latLng)||void 0===a?void 0:a.toJSON(),options:{}},this.updateAddress(null===(l=n.latLng)||void 0===l?void 0:l.toJSON())}getCity(n){return console.log(n),n.address_components.find(a=>a.types.includes("locality"))}getState(n){return n.address_components.find(a=>a.types.includes("administrative_area_level_1"))}getCountry(n){return n.address_components.find(a=>a.types.includes("country"))}updateGeoLocation(n){let a=this.getCity(n),l=this.getState(n),T=this.getCountry(n);this.location={formattedAddress:n.address_components.filter(I=>!I.types.includes("plus_code")).map(I=>I.long_name).join(", "),latLng:n.geometry.location.toJSON()},this.location&&a&&(this.location.cityName=null==a?void 0:a.long_name),this.location&&l&&(this.location.stateName=null==l?void 0:l.long_name),this.location&&T&&(this.location.countryName=null==T?void 0:T.long_name,this.location.countryShortName=null==T?void 0:T.short_name)}save(){this.bsModalRef.hide()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(y.UZ),t.Y36(R),t.Y36(q.il))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-map-modal"]],decls:18,vars:2,consts:[["mapCol",""],[4,"ngIf"],[1,"mt-3","mb-2"],["cLabel",""],["cFormControl","","readonly","","plaintext","","placeholder","House/Apartment/Flat no. street no, area, block","sizing","sm",3,"ngModel","ngModelChange"],[1,"d-grid","gap-2","d-flex","float-end"],["cButton","","color","light",3,"click"],["cButton","","color","primary",3,"click"],["height","360","width","760",3,"center","mapClick"],[3,"position","options","clickable",4,"ngIf"],[3,"position","options","clickable"]],template:function(n,a){1&n&&(t.TgZ(0,"c-card"),t.TgZ(1,"c-card-body"),t.TgZ(2,"c-row"),t.TgZ(3,"c-col",null,0),t.YNc(5,P,3,2,"span",1),t.qZA(),t.qZA(),t.TgZ(6,"c-row",2),t.TgZ(7,"c-col"),t.TgZ(8,"div"),t.TgZ(9,"label",3),t._uU(10,"Address"),t.qZA(),t.TgZ(11,"input",4),t.NdJ("ngModelChange",function(T){return a.formattedAddress=T}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"c-card-footer"),t.TgZ(13,"span",5),t.TgZ(14,"button",6),t.NdJ("click",function(){return a.bsModalRef.hide()}),t._uU(15,"Close"),t.qZA(),t.TgZ(16,"button",7),t.NdJ("click",function(){return a.save()}),t._uU(17,"Save"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(5),t.Q6J("ngIf",a.apiLoaded),t.xp6(6),t.Q6J("ngModel",a.formattedAddress))},directives:[i.AkF,i.yue,i.iok,i.Yp0,o.O5,i.eFW,i.oHf,p.Fj,p.JJ,p.On,i.xUh,i.Hq3,q.b6,q.O_],styles:[""]}),e})(),D=(()=>{class e{constructor(n){this.modalService=n}showMapModal(n){return this.modalService.show(Q,{backdrop:!0,animated:!0,ignoreBackdropClick:!0,class:"modal-lg modal-dialog-centered",initialState:{location:n}})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(y.tT))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var H=c(9998),V=c(1569),w=c(1728);function W(e,g){1&e&&(t.TgZ(0,"c-row",2),t.TgZ(1,"c-col",3),t._UZ(2,"c-spinner",4),t.TgZ(3,"span",5),t._uU(4," Loading... "),t.qZA(),t.qZA(),t.qZA())}const K=function(){return["salespersons"]};function j(e,g){if(1&e){const n=t.EpF();t.TgZ(0,"c-card-body"),t.TgZ(1,"c-row"),t.TgZ(2,"c-col"),t.TgZ(3,"h4"),t._uU(4),t.qZA(),t.TgZ(5,"strong"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"c-col",12),t.TgZ(8,"span",15),t.TgZ(9,"button",16),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).editBranch()}),t._uU(10,"Edit"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(11,"hr"),t.TgZ(12,"a",17),t._uU(13," Salesperson "),t.TgZ(14,"c-badge",18),t._uU(15),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw(2);t.xp6(4),t.Oqu(n.branch.name),t.xp6(2),t.Oqu(n.branch.code),t.xp6(6),t.Q6J("routerLink",t.DdM(4,K)),t.xp6(3),t.Oqu(n.branch.totalActiveSalespersons)}}function G(e,g){if(1&e){const n=t.EpF();t.TgZ(0,"c-card-body"),t.TgZ(1,"form",19),t.NdJ("ngSubmit",function(){return t.CHM(n),t.oxw(2).saveBranch()}),t.TgZ(2,"fieldset",20),t.TgZ(3,"c-row"),t.TgZ(4,"c-col",21),t._UZ(5,"input",22),t._UZ(6,"app-input-error",23),t.qZA(),t.TgZ(7,"c-col",21),t._UZ(8,"input",24),t._UZ(9,"app-input-error",23),t.qZA(),t.TgZ(10,"c-col",21),t.TgZ(11,"span",25),t.TgZ(12,"button",26),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).cancelEditBranch()}),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",27),t._uU(15," Save "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("formGroup",n.branchForm),t.xp6(1),t.Q6J("disabled",n.savingBranch),t.xp6(3),t.Q6J("valid",n.branchForm.controls.code.valid),t.xp6(1),t.Q6J("control",n.branchForm.controls.code),t.xp6(2),t.Q6J("valid",n.branchForm.controls.name.valid),t.xp6(1),t.Q6J("control",n.branchForm.controls.name),t.xp6(5),t.Q6J("loading",n.savingBranch)}}function z(e,g){if(1&e&&(t.TgZ(0,"span"),t.O4$(),t._UZ(1,"svg",28),t._uU(2),t.qZA()),2&e){const n=t.oxw(2);t.xp6(2),t.hij(" ",n.branch.location.formattedAddress," ")}}function $(e,g){1&e&&t._uU(0," N/A ")}const X=function(e){return["../../manager",e]};function tt(e,g){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"h4"),t._uU(2),t.qZA(),t.TgZ(3,"a",31),t._uU(4),t.qZA(),t.qZA()),2&e){const n=t.oxw(4);t.xp6(2),t.Oqu(null==n.branch.manager?null:n.branch.manager.fullName),t.xp6(1),t.Q6J("routerLink",t.VKq(3,X,n.branch.managerId)),t.xp6(1),t.hij(" ",null==n.branch.manager?null:n.branch.manager.username," ")}}function nt(e,g){1&e&&t._uU(0,"N/A")}function et(e,g){if(1&e){const n=t.EpF();t.TgZ(0,"c-row"),t.TgZ(1,"c-col"),t.YNc(2,tt,5,5,"span",10),t.YNc(3,nt,1,0,"ng-template",null,11,t.W1O),t.qZA(),t.TgZ(5,"c-col",30),t.TgZ(6,"span",15),t.TgZ(7,"button",13),t.NdJ("click",function(){return t.CHM(n),t.oxw(3).editManager()}),t._uU(8,"Edit"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(4),a=t.oxw(3);t.xp6(2),t.Q6J("ngIf",a.branch.managerId)("ngIfElse",n)}}function ot(e,g){if(1&e&&(t.TgZ(0,"option",40),t._uU(1),t.qZA()),2&e){const n=g.$implicit;t.Q6J("value",n.id),t.xp6(1),t.hij(" ",n.fullName," ")}}function at(e,g){if(1&e){const n=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"select",37),t.NdJ("ngModelChange",function(l){return t.CHM(n),t.oxw(4).selectedManagerId=l}),t.TgZ(2,"option",38),t._uU(3,"None"),t.qZA(),t.YNc(4,ot,2,2,"option",39),t.qZA(),t.qZA()}if(2&e){const n=t.oxw(4);t.xp6(1),t.Q6J("ngModel",n.selectedManagerId),t.xp6(3),t.Q6J("ngForOf",n.managerPage.items)}}function rt(e,g){1&e&&t._UZ(0,"c-spinner",4)}function it(e,g){if(1&e){const n=t.EpF();t.TgZ(0,"form",32),t.NdJ("ngSubmit",function(){return t.CHM(n),t.oxw(3).saveBranchManager()}),t.TgZ(1,"fieldset",20),t.TgZ(2,"c-row"),t.TgZ(3,"c-col"),t.YNc(4,at,5,2,"span",10),t.YNc(5,rt,1,0,"ng-template",null,33,t.W1O),t.qZA(),t.TgZ(7,"c-col",34),t.TgZ(8,"span",25),t.TgZ(9,"button",35),t.NdJ("click",function(){return t.CHM(n),t.oxw(3).cancelEditManager()}),t._uU(10,"Cancel"),t.qZA(),t.TgZ(11,"button",36),t._uU(12,"Save"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(6),a=t.oxw(3);t.xp6(1),t.Q6J("disabled",a.savingManager),t.xp6(3),t.Q6J("ngIf",!a.managerLoading)("ngIfElse",n),t.xp6(7),t.Q6J("loading",a.savingManager)}}function ct(e,g){if(1&e&&(t.TgZ(0,"h4"),t._uU(1,"Manager"),t.qZA(),t.TgZ(2,"c-card"),t.TgZ(3,"c-card-body"),t.YNc(4,et,9,2,"c-row",10),t.YNc(5,it,13,4,"ng-template",null,29,t.W1O),t.qZA(),t.qZA()),2&e){const n=t.MAs(6),a=t.oxw(2);t.xp6(4),t.Q6J("ngIf",!a.isEditManager)("ngIfElse",n)}}function st(e,g){if(1&e){const n=t.EpF();t.TgZ(0,"c-row",2),t.TgZ(1,"c-col",6),t.TgZ(2,"c-card",7),t.YNc(3,j,16,5,"ng-template",8),t.YNc(4,G,16,7,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(6,"h4"),t._uU(7,"Location"),t.qZA(),t.TgZ(8,"c-card",7),t.TgZ(9,"c-card-body"),t.TgZ(10,"c-row"),t.TgZ(11,"c-col"),t.YNc(12,z,3,1,"span",10),t.YNc(13,$,1,0,"ng-template",null,11,t.W1O),t.qZA(),t.TgZ(15,"c-col",12),t.TgZ(16,"button",13),t.NdJ("click",function(){return t.CHM(n),t.oxw().editLocation()}),t._uU(17,"Edit"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(18,ct,7,2,"ng-template",14),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(5),a=t.MAs(14),l=t.oxw();t.xp6(3),t.Q6J("ngIf",!l.isEditBranch)("ngIfElse",n),t.xp6(9),t.Q6J("ngIf",l.branch&&l.branch.location)("ngIfElse",a),t.xp6(6),t.Q6J("ngIf",l.branch.id)}}let S=(()=>{class e{constructor(n,a,l,T,I,U){this.route=n,this.amService=a,this.abService=l,this.location=T,this.router=I,this.cModalService=U,this.branch=new _.I,this.isLoading=!1,this.branchForm=new p.cw({code:new p.NI(null,[p.kI.required,p.kI.minLength(2),p.kI.maxLength(16)]),name:new p.NI(null,[p.kI.required])}),this.isEditBranch=!1,this.savingBranch=!1,this.isEditManager=!1,this.selectedManagerId=null,this.managerPage=new r.T,this.managerLoading=!1,this.savingManager=!1,this.alert=new Z.b;let O=this.route.snapshot.params.id;O&&(this.branch.id=O)}ngOnInit(){var n=this;return(0,m.Z)(function*(){""!=n.branch.id?(n.isLoading=!0,yield n.abService.get(n.branch.id).forEach(a=>n.branch=a).finally(()=>n.isLoading=!1)):n.editBranch()})()}editLocation(){var a,n=this;let l=this.cModalService.showMapModal(this.branch.location);null===(a=l.onHide)||void 0===a||a.subscribe(function(){var T=(0,m.Z)(function*(I){I&&l&&l.content&&l.content.location&&l.content.location.formattedAddress&&(yield n.abService.updateLocation(n.branch.id,l.content.location).forEach(U=>n.branch.location=U))});return function(I){return T.apply(this,arguments)}}())}editBranch(){this.branch&&this.branch.id&&(this.branchForm.controls.code.setValue(this.branch.code),this.branchForm.controls.name.setValue(this.branch.name)),this.isEditBranch=!0}cancelEditBranch(){this.branchForm.reset(),this.branch&&this.branch.id?this.isEditBranch=!1:this.location.back()}saveBranch(){if(this.branchForm.valid){this.savingBranch=!0;let n=this.branchForm.value;this.branch&&this.branch.id&&(n.id=this.branch.id),this.abService.save(n).forEach(a=>{a&&(this.branch.id?(Object.assign(this.branch,a),this.isEditBranch=!1):this.router.navigate(["admin","branch",a.id]))}).catch(a=>{a&&"ER_DUP_ENTRY"==a.code&&this.branchForm.controls.code.setErrors({else:"this code is already registered, try another one"})}).finally(()=>{this.savingBranch=!1})}}loadManager(){this.managerLoading=!0,this.amService.available().forEach(n=>this.managerPage=n).finally(()=>this.managerLoading=!1)}editManager(){this.managerPage&&0==this.managerPage.items.length&&this.loadManager(),this.isEditManager=!0}cancelEditManager(){this.isEditManager=!1,this.selectedManagerId=null}saveBranchManager(){var n=this;return(0,m.Z)(function*(){n.selectedManagerId&&n.branch.id&&(n.savingManager=!0,yield n.abService.updateManager(n.branch.id,{managerId:n.selectedManagerId}).forEach(a=>{console.log(a),Object.assign(n.branch,a),n.isEditManager=!1,n.loadManager()}).catch(a=>console.log(a)).finally(()=>{n.selectedManagerId=null,n.savingManager=!1}))})()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.gz),t.Y36(B.b),t.Y36(C.b),t.Y36(o.Ye),t.Y36(f.F0),t.Y36(D))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-branch-view"]],decls:3,vars:2,consts:[["class","justify-content-center",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"justify-content-center"],["md","8",1,""],["size","sm"],[1,"d-flex-inline","my-auto"],["md","8"],[1,"mb-4"],[3,"ngIf","ngIfElse"],["branchFormBlock",""],[4,"ngIf","ngIfElse"],["na",""],["xs","1"],["cButton","","color","light","size","sm",3,"click"],[3,"ngIf"],[1,"float-end"],["cButton","","size","sm","color","light",3,"click"],["cButton","","color","light",3,"routerLink"],["shape","rounded-pill","color","success"],[3,"formGroup","ngSubmit"],[3,"disabled"],["sm","4"],["formControlName","code","cFormControl","","id","code","placeholder","Code","type","text","autofocus","",3,"valid"],[3,"control"],["formControlName","name","cFormControl","","id","name","placeholder","Name","type","text",3,"valid"],[1,"d-grid","gap-2","d-flex","float-end"],["cButton","","type","button","color","light",3,"click"],["xcButton","","loadingLabel","Saving...","type","submit","color","primary",3,"loading"],["cIcon","","name","cilLocationPin"],["managerForm",""],["xs","2"],["cButton","","color","light","size","sm",3,"routerLink"],[3,"ngSubmit"],["loader",""],["xs","4"],["cButton","","color","light",3,"click"],["xcButton","","loadingLabel","Saving...","type","submit",3,"loading"],["cSelect","","name","branch",3,"ngModel","ngModelChange"],["value","null"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,a){if(1&n&&(t.YNc(0,W,5,0,"c-row",0),t.YNc(1,st,19,5,"ng-template",null,1,t.W1O)),2&n){const l=t.MAs(2);t.Q6J("ngIf",a.isLoading)("ngIfElse",l)}},directives:[o.O5,i.iok,i.Yp0,i.ORR,i.AkF,i.yue,i.Hq3,f.yS,i.FN3,p._Y,p.JL,p.sg,p.Fj,i.oHf,p.JJ,p.u,H.w,V.L,w.ar,p.F,i.nqR,p.EJ,p.On,p.YN,p.Kr,o.sg],styles:[""]}),e})();const lt=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-branch"]],decls:1,vars:0,template:function(n,a){1&n&&t._UZ(0,"router-outlet")},directives:[f.lC],styles:[""]}),e})(),data:{title:"Branch"},children:[{path:"",component:M,data:{title:"List"}},{path:"register",component:S,data:{title:"Register"}},{path:":id",component:S,data:{title:"View"}},{path:":branchId/salespersons",component:A.X,data:{title:"Salesperson"}}]}];let pt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[f.Bz.forChild(lt)],f.Bz]}),e})();var gt=c(4466);const dt=[i.dTQ,i.hJ1,i.ejP,i.zE6,i.U$I,i.Fme,i.nMh,w.QX,i.TXv],_t=[gt.m,p.u5,p.UX,s.u3.forRoot(),L.JF,L.Ed];let mt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[o.ez,pt,...dt,..._t]]}),e})()},3093:(E,v,c)=>{c.d(v,{v:()=>b});var o=c(8306),f=c(576),m=c(9646),p=c(9245),r=c(4893),t=c(5905),C=c(9633),i=c(5033),s=c(9808);function h(u,M){if(1&u&&(r.TgZ(0,"span"),r._UZ(1,"hr"),r.TgZ(2,"p"),r._uU(3),r.qZA(),r.TgZ(4,"p"),r._uU(5),r.qZA(),r.qZA()),2&u){const Z=r.oxw();r.xp6(3),r.Oqu(null==Z.er?null:Z.er.error.name),r.xp6(2),r.Oqu(null==Z.er?null:Z.er.error.message)}}function d(u,M){if(1&u){const Z=r.EpF();r.TgZ(0,"button",7),r.NdJ("click",function(){return r.CHM(Z),r.oxw().login()}),r._uU(1,"Login"),r.qZA()}}let x=(()=>{class u{constructor(Z,_){this.bsModalRef=Z,this.store=_,this.isLogin=!1}ngOnInit(){this.er&&401==this.er.status&&(this.isLogin=!0)}login(){this.bsModalRef.hide(),this.store.dispatch((0,p.C)())}}return u.\u0275fac=function(Z){return new(Z||u)(r.Y36(t.UZ),r.Y36(C.yh))},u.\u0275cmp=r.Xpm({type:u,selectors:[["app-http-error-modal"]],decls:15,vars:6,consts:[[1,"text-danger"],[1,""],["cCardTitle",""],[4,"ngIf"],[1,"d-grid","d-flex","gap-2","float-end"],["cButton","","color","light",3,"click"],["cButton","","color","primary","shape","outline",3,"click",4,"ngIf"],["cButton","","color","primary","shape","outline",3,"click"]],template:function(Z,_){1&Z&&(r.TgZ(0,"c-card",0),r.TgZ(1,"c-card-body",1),r.TgZ(2,"h4",2),r._uU(3),r.qZA(),r.TgZ(4,"h2"),r._uU(5),r.qZA(),r.TgZ(6,"small"),r._uU(7),r.qZA(),r.YNc(8,h,6,2,"span",3),r.TgZ(9,"c-row"),r.TgZ(10,"c-col"),r.TgZ(11,"span",4),r.TgZ(12,"button",5),r.NdJ("click",function(){return _.bsModalRef.hide()}),r._uU(13,"Close"),r.qZA(),r.YNc(14,d,2,0,"button",6),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&Z&&(r.xp6(3),r.AsE("",null==_.er?null:_.er.name,"-",null==_.er?null:_.er.status,""),r.xp6(2),r.Oqu(null==_.er?null:_.er.statusText),r.xp6(2),r.hij("url: ",null==_.er?null:_.er.url,""),r.xp6(1),r.Q6J("ngIf",(null==_.er?null:_.er.error)&&((null==_.er?null:_.er.error.name)||(null==_.er?null:_.er.error.code))),r.xp6(6),r.Q6J("ngIf",_.isLogin))},directives:[i.AkF,i.yue,i.qkm,s.O5,i.iok,i.Yp0,i.Hq3],styles:[""]}),u})(),b=(()=>{class u{constructor(Z){this.modalService=Z,this.THROW_ERRORS=["ER_DUP_ENTRY","INVALID_CREDIENTIIALS","USER_NOT_FOUND"],this.catchError=(_,B)=>_&&_.error&&_.error.code&&this.THROW_ERRORS.includes(_.error.code)?function(u,M){const Z=(0,f.m)(u)?u:()=>u,_=B=>B.error(Z());return new o.y(_)}(()=>_.error):(console.log(_),this.modalService.show(x,{animated:!0,backdrop:!0,ignoreBackdropClick:!0,class:"modal-dialog-centered",initialState:{er:_}}),(0,m.of)())}}return u.\u0275fac=function(Z){return new(Z||u)(r.LFG(t.tT))},u.\u0275prov=r.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},9998:(E,v,c)=>{c.d(v,{w:()=>i});var o=c(4893),f=c(9808);function A(s,h){1&s&&(o.TgZ(0,"p",2),o._uU(1,"this field is required"),o.qZA())}function m(s,h){1&s&&(o.TgZ(0,"p",2),o._uU(1,"invalid email"),o.qZA())}function p(s,h){if(1&s&&(o.TgZ(0,"p",2),o._uU(1),o.qZA()),2&s){const d=o.oxw(2);o.xp6(1),o.hij("min ",d.control.errors.minlength.requiredLength," characters are required")}}function r(s,h){if(1&s&&(o.TgZ(0,"p",2),o._uU(1),o.qZA()),2&s){const d=o.oxw(2);o.xp6(1),o.hij("max ",d.control.errors.maxlength.requiredLength," characters are required")}}function t(s,h){if(1&s&&(o.TgZ(0,"p",2),o._uU(1),o.qZA()),2&s){const d=o.oxw(2);o.xp6(1),o.Oqu(d.control.errors.else)}}function C(s,h){if(1&s&&(o.YNc(0,A,2,0,"p",1),o.YNc(1,m,2,0,"p",1),o.YNc(2,p,2,1,"p",1),o.YNc(3,r,2,1,"p",1),o.YNc(4,t,2,1,"p",1)),2&s){const d=o.oxw();o.Q6J("ngIf",d.control.errors.required),o.xp6(1),o.Q6J("ngIf",d.control.errors.email),o.xp6(1),o.Q6J("ngIf",d.control.errors.minlength),o.xp6(1),o.Q6J("ngIf",d.control.errors.maxlength),o.xp6(1),o.Q6J("ngIf",d.control.errors.else)}}let i=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(d){return new(d||s)},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-input-error"]],inputs:{control:"control"},decls:1,vars:1,consts:[[3,"ngIf"],["class","m-0 text-danger",4,"ngIf"],[1,"m-0","text-danger"]],template:function(d,x){1&d&&o.YNc(0,C,5,5,"ng-template",0),2&d&&o.Q6J("ngIf",x.control&&x.control.invalid&&(x.control.dirty||x.control.touched)&&x.control.errors)},directives:[f.O5],styles:[""]}),s})()},9553:(E,v,c)=>{c.d(v,{H:()=>i});var o=c(4893),f=c(384),A=c(9808),m=c(5033),p=c(2382);function r(s,h){1&s&&o._UZ(0,"c-spinner",2)}function t(s,h){if(1&s){const d=o.EpF();o.TgZ(0,"c-form-check",4),o.TgZ(1,"input",5),o.NdJ("ngModelChange",function(b){return o.CHM(d),o.oxw(2).user.enabled=b})("change",function(b){return o.CHM(d),o.oxw(2).onChange(b)}),o.qZA(),o.TgZ(2,"label",6),o._uU(3),o.qZA(),o.qZA()}if(2&s){const d=o.oxw(2);o.Q6J("switch",!0),o.xp6(1),o.Q6J("ngModel",d.user.enabled),o.xp6(2),o.Oqu(d.label)}}function C(s,h){if(1&s&&o.YNc(0,t,4,3,"c-form-check",3),2&s){const d=o.oxw();o.Q6J("ngIf",d.user)}}let i=(()=>{class s{constructor(d){this.authService=d,this.isLoading=!1}ngOnInit(){}onChange(d){this.user&&this.user.id&&(this.isLoading=!0,this.authService.enabled(this.user.id,{enabled:this.user.enabled}).forEach(x=>{this.user&&(this.user.enabled=x.enabled)}).finally(()=>{this.isLoading=!1}))}}return s.\u0275fac=function(d){return new(d||s)(o.Y36(f.e))},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-user-active-switch"]],inputs:{label:"label",user:"user"},decls:3,vars:2,consts:[["size","sm",4,"ngIf","ngIfElse"],["elseBlock",""],["size","sm"],[3,"switch",4,"ngIf"],[3,"switch"],["cFormCheckInput","","type","checkbox",3,"ngModel","ngModelChange","change"],["cFormCheckLabel",""]],template:function(d,x){if(1&d&&(o.YNc(0,r,1,0,"c-spinner",0),o.YNc(1,C,1,1,"ng-template",null,1,o.W1O)),2&d){const b=o.MAs(2);o.Q6J("ngIf",x.isLoading)("ngIfElse",b)}},directives:[A.O5,m.ORR,m.FzQ,m.yfq,p.Wl,p.JJ,p.On,m.NWu],styles:[""]}),s})()},1569:(E,v,c)=>{c.d(v,{L:()=>A});var o=c(5033),f=c(4893);let A=(()=>{class m extends o.Hq3{constructor(r){super(),this.el=r,this._loadingLabel="",this._loading=!1}get loadingLabel(){return this._loadingLabel}set loadingLabel(r){this._loadingLabel=r}get loading(){return this._loading}set loading(r){this._loading=r,this.content||(this.content=this.el.nativeElement.innerHTML),this.el.nativeElement.innerHTML=this._loading?`<span class="spinner-border spinner-border-sm ng-star-inserted"></span> ${this.loadingLabel}`:this.content}}return m.\u0275fac=function(r){return new(r||m)(f.Y36(f.SBq))},m.\u0275dir=f.lG2({type:m,selectors:[["","xcButton",""]],inputs:{loadingLabel:"loadingLabel",loading:"loading"},exportAs:["xcButton"],features:[f.qOj]}),m})()},5861:(E,v,c)=>{function o(A,m,p,r,t,C,i){try{var s=A[C](i),h=s.value}catch(d){return void p(d)}s.done?m(h):Promise.resolve(h).then(r,t)}function f(A){return function(){var m=this,p=arguments;return new Promise(function(r,t){var C=A.apply(m,p);function i(h){o(C,r,t,i,s,"next",h)}function s(h){o(C,r,t,i,s,"throw",h)}i(void 0)})}}c.d(v,{Z:()=>f})}}]);