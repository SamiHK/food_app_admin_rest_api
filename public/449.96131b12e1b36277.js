"use strict";(self.webpackChunkfoodapp=self.webpackChunkfoodapp||[]).push([[449],{5449:(y,v,l)=>{l.r(v),l.d(v,{MenuModule:()=>Ie});var c=l(9808),m=l(3477),d=l(5861),e=l(4893),f=l(262),h=l(2340),A=l(520),x=l(3093);let I=(()=>{class n{constructor(t,o){this.http=t,this.commonService=o,this.BASE_URL=`${h.N.BASE_URL}/admin/menu`}filter(t){return this.http.get(`${this.BASE_URL}`,{params:t}).pipe((0,f.K)(this.commonService.catchError))}create(t){return this.http.post(`${this.BASE_URL}`,t).pipe((0,f.K)(this.commonService.catchError))}update(t,o){return this.http.post(`${this.BASE_URL}/${o}`,t).pipe((0,f.K)(this.commonService.catchError))}updateSorting(t){return this.http.post(`${this.BASE_URL}/sorting`,t).pipe((0,f.K)(this.commonService.catchError))}get(t){return this.http.get(`${this.BASE_URL}/${t}`).pipe((0,f.K)(this.commonService.catchError))}item(t){return this.http.get(`${this.BASE_URL}/item/${t}`).pipe((0,f.K)(this.commonService.catchError))}updateItem(t,o){return this.http.post(`${this.BASE_URL}/item/${t}`,o).pipe((0,f.K)(this.commonService.catchError))}updateItemSorting(t){return this.http.post(`${this.BASE_URL}/item/sorting`,t).pipe((0,f.K)(this.commonService.catchError))}items(t){return this.http.get(`${this.BASE_URL}/${t}/item`).pipe((0,f.K)(this.commonService.catchError))}createItem(t,o){return this.http.post(`${this.BASE_URL}/${t}/item`,o).pipe((0,f.K)(this.commonService.catchError))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(A.eN),e.LFG(x.v))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var i=l(5033),g=l(8333),p=l(8426);function T(n,r){1&n&&(e.TgZ(0,"c-row"),e.TgZ(1,"c-col"),e._UZ(2,"c-spinner",6),e._uU(3," Loading... "),e.qZA(),e.qZA())}function F(n,r){if(1&n&&(e.TgZ(0,"c-badge",14),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.totalItems,"")}}const N=function(n){return["../",n]};function O(n,r){if(1&n&&(e.TgZ(0,"a",11),e.TgZ(1,"span"),e.TgZ(2,"h6",12),e._uU(3),e.qZA(),e.qZA(),e.YNc(4,F,2,1,"c-badge",13),e.qZA()),2&n){const t=r.$implicit;e.Q6J("routerLink",e.VKq(3,N,t.id)),e.xp6(3),e.Oqu(t.title),e.xp6(1),e.Q6J("ngIf",t.totalItems)}}function w(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"ul",9),e.NdJ("dragulaModelChange",function(a){return e.CHM(t),e.oxw(2).menus=a}),e.YNc(1,O,5,5,"a",10),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("dragulaModel",t.menus),e.xp6(1),e.Q6J("ngForOf",t.menus)}}function J(n,r){1&n&&e._uU(0," Empty Menu ")}function Y(n,r){if(1&n&&(e.TgZ(0,"perfect-scrollbar"),e.YNc(1,w,2,2,"ul",7),e.YNc(2,J,1,0,"ng-template",null,8,e.W1O),e.qZA()),2&n){const t=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.menus.length>0)("ngIfElse",t)}}let B=(()=>{class n{constructor(t,o){this.amService=t,this.dragulaService=o,this.menus=[],this.isLoading=!1}ngOnInit(){var t=this;return(0,d.Z)(function*(){t.dragulaService.drop("menus").subscribe(o=>{t.menus.forEach((s,_)=>s.sortOrder=_+1);let a=t.menus.map((s,_)=>({id:s.id,sortOrder:s.sortOrder}));t.amService.updateSorting(a).subscribe(s=>s)})})()}ngOnDestroy(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(I),e.Y36(g.pQ))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-navigation-list"]],inputs:{menus:"menus",isLoading:"isLoading"},decls:10,vars:2,consts:[[1,"mb-3"],[1,""],[1,"float-end"],["routerLink","../create","cButton","","color","primary"],[4,"ngIf","ngIfElse"],["loadedBlock",""],["aria-hidden","true","label","Loading...","size","sm"],["flush","","cListGroup","","dragula","menus",3,"dragulaModel","dragulaModelChange",4,"ngIf","ngIfElse"],["emptyMenuBlock",""],["flush","","cListGroup","","dragula","menus",3,"dragulaModel","dragulaModelChange"],["cListGroupItem","","routerLinkActive","active","class","d-flex justify-content-between align-items-center border-0 my-1 rounded",3,"routerLink",4,"ngFor","ngForOf"],["cListGroupItem","","routerLinkActive","active",1,"d-flex","justify-content-between","align-items-center","border-0","my-1","rounded",3,"routerLink"],[1,"my-1"],["color","primary","shape","rounded-pill","class","float-end",4,"ngIf"],["color","primary","shape","rounded-pill",1,"float-end"]],template:function(t,o){if(1&t&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e.TgZ(2,"c-row",0),e.TgZ(3,"c-col",1),e.TgZ(4,"span",2),e.TgZ(5,"a",3),e._uU(6,"Create New Menu"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,T,4,0,"c-row",4),e.YNc(8,Y,4,2,"ng-template",null,5,e.W1O),e.qZA(),e.qZA()),2&t){const a=e.MAs(9);e.xp6(7),e.Q6J("ngIf",o.isLoading)("ngIfElse",a)}},directives:[i.AkF,i.yue,i.iok,i.Yp0,m.yS,i.Hq3,c.O5,i.ORR,p.Vv,i.Xre,g.sW,c.sg,i.Ow$,m.Od,i.FN3],styles:[""]}),n})();var L=l(5937);function Q(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.loadingLabel," ")}}function k(n,r){if(1&n&&e._uU(0),2&n){const t=e.oxw();e.hij(" ",t.label," ")}}let q=(()=>{class n{constructor(){this.label="Choose Image",this.loading=!1,this.loadingLabel="",this.imageChange=new e.vpe}ngOnInit(){}onImageChange(t){this.imageChange.emit({id:this.id,files:t.target.files})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-upload-button"]],inputs:{id:"id",size:"size",label:"label",loading:"loading",loadingLabel:"loadingLabel"},outputs:{imageChange:"imageChange"},decls:6,vars:4,consts:[["cFormControl","","type","file","multiple","",1,"d-none",3,"change"],["menuImageUpdate",""],["cButton","","color","light",3,"disabled","size","click"],[4,"ngIf","ngIfElse"],["elseBlock",""]],template:function(t,o){if(1&t){const a=e.EpF();e.TgZ(0,"input",0,1),e.NdJ("change",function(_){return o.onImageChange(_)}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return e.CHM(a),e.MAs(1).click()}),e.YNc(3,Q,2,1,"span",3),e.YNc(4,k,1,1,"ng-template",null,4,e.W1O),e.qZA()}if(2&t){const a=e.MAs(5);e.xp6(2),e.Q6J("disabled",o.loading)("size",o.size),e.xp6(1),e.Q6J("ngIf",o.loading)("ngIfElse",a)}},directives:[i.oHf,i.Hq3,c.O5],styles:[""]}),n})();function R(n,r){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._UZ(2,"c-spinner",2),e._uU(3," Loading... "),e.qZA(),e.qZA())}function j(n,r){if(1&n&&e._UZ(0,"img",18),2&n){const t=e.oxw(3);e.Q6J("src",t.menu.primaryImg,e.LSH)}}function $(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body",5),e.TgZ(2,"c-row"),e.TgZ(3,"c-col",6),e.YNc(4,j,1,1,"img",7),e.qZA(),e.TgZ(5,"c-col",8),e.TgZ(6,"span",9),e.TgZ(7,"h3",10),e._uU(8),e.qZA(),e.TgZ(9,"span",11),e.TgZ(10,"a",12),e._uU(11,"Edit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"p",13),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"c-card",14),e.TgZ(15,"c-card-body",15),e.TgZ(16,"span"),e.TgZ(17,"app-upload-button",16),e.NdJ("imageChange",function(a){return e.CHM(t),e.oxw(2).updateMenuImage(a)}),e.qZA(),e.qZA(),e.TgZ(18,"a",17),e._uU(19,"Add New Item"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.menu.primaryImg),e.xp6(4),e.Oqu(t.menu.title),e.xp6(5),e.Oqu(t.menu.description),e.xp6(4),e.Q6J("loading",t.updatingImage)}}function z(n,r){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._uU(2," Menu Not Selected "),e.qZA(),e.qZA())}function H(n,r){if(1&n&&(e.YNc(0,$,20,4,"ng-template",3),e.YNc(1,z,3,0,"ng-template",null,4,e.W1O)),2&n){const t=e.MAs(2),o=e.oxw();e.Q6J("ngIf",o.menu)("ngIfElse",t)}}let P=(()=>{class n{constructor(t){this.afService=t,this.isLoading=!1,this.updatingImage=!1}ngOnInit(){}updateMenuImage(t){var o=this;return(0,d.Z)(function*(){o.menu&&t.files&&(o.updatingImage=!0,yield o.afService.menu(o.menu.id,t.files[0]).forEach(a=>{o.menu&&(o.menu.primaryImg=a.path)}),o.updatingImage=!1)})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(L.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-card"]],inputs:{isLoading:"isLoading",menu:"menu"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loadedBlock",""],["aria-hidden","true","label","Loading...","size","sm"],[3,"ngIf","ngIfElse"],["emptyMenuBlock",""],[1,""],["sm","1","md","4"],["cImg","","rounded","","fluid","",3,"src",4,"ngIf"],["sm","11","md","8"],[1,"d-flex","justify-content-between"],["cCardTitle",""],[1,"d-block-inline"],["routerLink","edit","cButton","","color","light","size","sm"],["cCardText",""],[1,"mb-3"],[1,"d-flex","d-grid","gap-2","justify-content-between"],["loadingLabel","Updating...","label","Update Image",3,"loading","imageChange"],["routerLink","item/create","routerLinkActive","disabled","cButton",""],["cImg","","rounded","","fluid","",3,"src"]],template:function(t,o){if(1&t&&(e.YNc(0,R,4,0,"c-card",0),e.YNc(1,H,3,2,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",o.isLoading)("ngIfElse",a)}},directives:[c.O5,i.AkF,i.yue,i.ORR,i.iok,i.Yp0,i.qkm,m.yS,i.Hq3,i.PVT,q,m.Od,i.XLq],styles:[""]}),n})(),X=(()=>{class n{constructor(t,o){this.route=t,this.amService=o,this.menus=[],this.isLoadingMenu=!1}ngOnInit(){var t=this;return(0,d.Z)(function*(){yield t.loadMenu(),t.route.params.forEach(o=>{o.id&&t.menus&&(t.selectedMenu=t.menus.find(a=>a.id==o.id))})})()}loadMenu(){var t=this;return(0,d.Z)(function*(){t.isLoadingMenu=!0,yield t.amService.filter().forEach(o=>t.menus=o),t.isLoadingMenu=!1})()}selectMenu(t){this.selectedMenu=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.gz),e.Y36(I))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-board"]],decls:6,vars:4,consts:[["md","4"],[3,"menus","isLoading"],["md","8"],[3,"menu","isLoading"]],template:function(t,o){1&t&&(e.TgZ(0,"c-row"),e.TgZ(1,"c-col",0),e._UZ(2,"app-menu-navigation-list",1),e.qZA(),e.TgZ(3,"c-col",2),e._UZ(4,"app-menu-card",3),e._UZ(5,"router-outlet"),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("menus",o.menus)("isLoading",o.isLoadingMenu),e.xp6(2),e.Q6J("menu",o.selectedMenu)("isLoading",o.isLoadingMenu))},directives:[i.iok,i.Yp0,B,P,m.lC],styles:[""]}),n})();var u=l(2382),b=l(9998),E=l(1569);let U=(()=>{class n{constructor(t,o,a,s){this.route=t,this.location=o,this.router=a,this.amService=s,this.menu=null,this.form=new u.cw({title:new u.NI(null,u.kI.required),description:new u.NI(null)}),this.isLoading=!1,this.isSaving=!1}ngOnInit(){this.route.params.forEach(t=>{t.id&&(this.isLoading=!0,this.amService.get(t.id).forEach(o=>{this.menu=o,this.setEditFormValues()}).finally(()=>{this.isLoading=!1}))})}setEditFormValues(){this.menu&&(this.form.controls.title.setValue(this.menu.title),this.form.controls.description.setValue(this.menu.description))}reset(){this.menu?this.setEditFormValues():this.form.reset()}onSubmit(){var t=this;return(0,d.Z)(function*(){if(t.form.valid){t.isSaving=!0;let o=t.form.value;t.menu&&t.menu.id?yield t.amService.update(o,t.menu.id).forEach(a=>{t.router.navigate(["admin","menu",a.id])}):yield t.amService.create(o).forEach(a=>{t.router.navigate(["admin","menu",a.id])}),t.isSaving=!1}})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.gz),e.Y36(c.Ye),e.Y36(m.F0),e.Y36(I))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-form"]],decls:23,vars:4,consts:[[1,"justify-content-center"],["md","8"],[3,"formGroup","ngSubmit"],[3,"disabled"],["cFormFloating","",1,"mb-3"],["cFormControl","","formControlName","title","id","title","type","text","autofocus",""],["cLabel","","id","title"],[3,"control"],["cFormControl","","formControlName","description","id","description","type","text"],["cLabel","","id","description"],[1,""],[1,"d-grid","gap-2","d-flex","float-end"],["cButton","","type","button","color","light",3,"click"],["cButton","","type","button","color","secondary",3,"click"],["xcButton","","loadingLabel","Saving...","type","submit",3,"loading"]],template:function(t,o){1&t&&(e.TgZ(0,"c-row",0),e.TgZ(1,"c-col",1),e.TgZ(2,"c-card"),e.TgZ(3,"c-card-body"),e.TgZ(4,"form",2),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(5,"fieldset",3),e.TgZ(6,"div",4),e._UZ(7,"input",5),e.TgZ(8,"label",6),e._uU(9,"Title"),e.qZA(),e._UZ(10,"app-input-error",7),e.qZA(),e.TgZ(11,"div",4),e._UZ(12,"textarea",8),e.TgZ(13,"label",9),e._uU(14,"Description"),e.qZA(),e.qZA(),e.TgZ(15,"div",10),e.TgZ(16,"span",11),e.TgZ(17,"button",12),e.NdJ("click",function(){return o.location.back()}),e._uU(18,"Close"),e.qZA(),e.TgZ(19,"button",13),e.NdJ("click",function(){return o.reset()}),e._uU(20,"Reset"),e.qZA(),e.TgZ(21,"button",14),e._uU(22,"Save"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("disabled",o.isSaving||o.isLoading),e.xp6(5),e.Q6J("control",o.form.controls.title),e.xp6(11),e.Q6J("loading",o.isSaving))},directives:[i.iok,i.Yp0,i.AkF,i.yue,u._Y,u.JL,u.sg,i.xPZ,i.oHf,u.Fj,u.JJ,u.u,i.eFW,b.w,i.Hq3,E.L],styles:[""]}),n})(),S=(()=>{class n{constructor(t,o,a){this.route=t,this.router=o,this.amService=a,this.isLoading=!1,this.form=new u.cw({title:new u.NI(null,u.kI.required),description:new u.NI(null),price:new u.NI(null,[u.kI.required,u.kI.min(1)]),oldPrice:new u.NI(null)}),this.isSaving=!1}ngOnInit(){var t=this;return(0,d.Z)(function*(){var o,a;t.menuId=null===(o=t.route.parent)||void 0===o?void 0:o.snapshot.params.id,t.menuItemId=t.route.snapshot.params.menuItemId,t.menuItemId&&(t.isLoading=!0,yield t.amService.item(t.menuItemId).forEach(s=>t.menuItem=s),t.loadForm(),t.isLoading=!1),null===(a=document.querySelector("#item-form"))||void 0===a||a.scrollIntoView({behavior:"smooth",block:"center"})})()}loadForm(){this.menuItem&&(this.form.controls.title.setValue(this.menuItem.title),this.form.controls.description.setValue(this.menuItem.description),this.form.controls.price.setValue(this.menuItem.price),this.form.controls.oldPrice.setValue(this.menuItem.oldPrice))}reset(){this.menuItem?this.loadForm():this.form.reset()}close(){this.router.navigate(["admin","menu",this.menuId])}onSubmit(){var t=this;return(0,d.Z)(function*(){t.menuId&&t.form.valid&&(t.isSaving=!0,t.menuItemId&&t.menuItem?yield t.amService.updateItem(t.menuItemId,t.form.value).forEach(o=>{console.log(o),t.router.navigate(["admin","menu",t.menuId]),console.log("update menu item")}):yield t.amService.createItem(t.menuId,t.form.value).forEach(o=>{console.log(o),t.router.navigate(["admin","menu",t.menuId]),console.log("created new item")}),t.isSaving=!1,console.log("end"))})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.gz),e.Y36(m.F0),e.Y36(I))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-item-form"]],decls:38,vars:4,consts:[["id","item-form",1,"justify-content-center","mb-3"],[3,"formGroup","ngSubmit"],[3,"disabled"],["cFormFloating","",1,"mb-3"],["cFormControl","","formControlName","title","id","title","type","text","autofocus",""],["cLabel","","for","title"],[3,"control"],["md","6"],["cFormControl","","formControlName","price","id","price","type","number"],["cLabel","","for","price"],["cFormControl","","formControlName","oldPrice","id","oldPrice","type","number"],["cLabel","","for","oldPrice"],["cFormControl","","formControlName","description","id","description","type","text"],["cLabel","","for","description"],[1,""],[1,"d-grid","gap-2","d-flex","float-end"],["cButton","","type","button","color","light",3,"click"],["cButton","","type","button","color","secondary",3,"click"],["xcButton","","loadingLabel","Saving...","type","submit",3,"loading"]],template:function(t,o){1&t&&(e.TgZ(0,"c-row",0),e.TgZ(1,"c-col"),e.TgZ(2,"c-card"),e.TgZ(3,"c-card-body"),e.TgZ(4,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(5,"fieldset",2),e.TgZ(6,"c-row"),e.TgZ(7,"c-col"),e.TgZ(8,"div",3),e._UZ(9,"input",4),e.TgZ(10,"label",5),e._uU(11,"Title"),e.qZA(),e._UZ(12,"app-input-error",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"c-row"),e.TgZ(14,"c-col",7),e.TgZ(15,"div",3),e._UZ(16,"input",8),e.TgZ(17,"label",9),e._uU(18,"Price"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"c-col",7),e.TgZ(20,"div",3),e._UZ(21,"input",10),e.TgZ(22,"label",11),e._uU(23,"Old Price"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"c-row"),e.TgZ(25,"c-col"),e.TgZ(26,"div",3),e._UZ(27,"textarea",12),e.TgZ(28,"label",13),e._uU(29,"Description"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",14),e.TgZ(31,"span",15),e.TgZ(32,"button",16),e.NdJ("click",function(){return o.close()}),e._uU(33,"Close"),e.qZA(),e.TgZ(34,"button",17),e.NdJ("click",function(){return o.reset()}),e._uU(35,"Reset"),e.qZA(),e.TgZ(36,"button",18),e._uU(37,"Save"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("disabled",o.isSaving),e.xp6(7),e.Q6J("control",o.form.controls.title),e.xp6(24),e.Q6J("loading",o.isSaving))},directives:[i.iok,i.Yp0,i.AkF,i.yue,u._Y,u.JL,u.sg,i.xPZ,i.oHf,u.Fj,u.JJ,u.u,i.eFW,b.w,u.wV,i.Hq3,E.L],styles:[""]}),n})();var D=l(727);function K(n,r){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._UZ(2,"c-spinner",2),e._uU(3," Loading... "),e.qZA(),e.qZA())}function V(n,r){if(1&n&&e._UZ(0,"img",18),2&n){const t=e.oxw().$implicit;e.Q6J("src",t.primaryImg,e.LSH)}}function W(n,r){if(1&n&&(e.TgZ(0,"span"),e.TgZ(1,"c-badge",19),e.TgZ(2,"span",20),e._uU(3),e.ALo(4,"currency"),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",e.xi3(4,1,t.oldPrice,"Pkr ")," ")}}const G=function(n){return["item",n,"edit"]};function ee(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"c-col",7),e.TgZ(1,"c-card",8),e.YNc(2,V,1,1,"img",9),e.TgZ(3,"c-card-body",10),e.TgZ(4,"span",11),e.TgZ(5,"h6"),e._uU(6),e.qZA(),e.TgZ(7,"a",12),e._uU(8,"Edit"),e.qZA(),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.TgZ(11,"div",13),e.TgZ(12,"span",14),e.TgZ(13,"span"),e.TgZ(14,"c-badge",15),e._uU(15),e.ALo(16,"currency"),e.qZA(),e.qZA(),e.YNc(17,W,5,4,"span",16),e.qZA(),e.TgZ(18,"span"),e.TgZ(19,"app-upload-button",17),e.NdJ("imageChange",function(a){return e.CHM(t),e.oxw(3).updateMenuItemImage(a)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=r.$implicit;e.xp6(2),e.Q6J("ngIf",t.primaryImg),e.xp6(4),e.Oqu(t.title),e.xp6(1),e.Q6J("routerLink",e.VKq(10,G,t.id)),e.xp6(3),e.Oqu(t.description),e.xp6(5),e.Oqu(e.xi3(16,7,t.price,"Pkr ")),e.xp6(2),e.Q6J("ngIf",t.oldPrice),e.xp6(2),e.Q6J("id",t.id)}}function te(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"c-row",5),e.NdJ("dragulaModelChange",function(a){return e.CHM(t),e.oxw(2).menuItems=a}),e.YNc(1,ee,20,12,"c-col",6),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("md",2)("sm",1)("gutter",2)("dragulaModel",t.menuItems),e.xp6(1),e.Q6J("ngForOf",t.menuItems)}}function ne(n,r){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._uU(2," empty "),e.qZA(),e.qZA())}function oe(n,r){if(1&n&&(e.YNc(0,te,2,5,"ng-template",3),e.YNc(1,ne,3,0,"ng-template",null,4,e.W1O)),2&n){const t=e.MAs(2),o=e.oxw();e.Q6J("ngIf",o.menuItems&&o.menuItems.length>0)("ngIfElse",t)}}let ie=(()=>{class n{constructor(t,o,a,s){this.route=t,this.amService=o,this.dragulaService=a,this.afService=s,this.menuItems=null,this.sbjs=new D.w0,this.isLoadingMenuItems=!1}ngOnInit(){var t=this;return(0,d.Z)(function*(){t.route.params.forEach(o=>{o.id&&t.loadMenuItems(o.id)})})()}loadMenuItems(t){var o=this;return(0,d.Z)(function*(){o.isLoadingMenuItems=!0,yield o.amService.items(t).forEach(a=>o.menuItems=a),o.menuItems&&o.sbjs.add(o.dragulaService.dragend("menuItems").subscribe(a=>{var s,_;null===(s=o.menuItems)||void 0===s||s.forEach((Z,C)=>{Z.sortOrder=C+1});let M=null===(_=o.menuItems)||void 0===_?void 0:_.map(Z=>({id:Z.id,sortOrder:Z.sortOrder}));o.amService.updateItemSorting(M).subscribe(Z=>Z)})),o.isLoadingMenuItems=!1})()}updateMenuItemImage(t){var o=this;return(0,d.Z)(function*(){t.id&&t.files&&o.afService.menuItem(t.id,t.files[0]).subscribe(a=>{var s;let _=null===(s=o.menuItems)||void 0===s?void 0:s.find(M=>M.id==t.id);_&&(_.primaryImg=a.path)})})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.gz),e.Y36(I),e.Y36(g.pQ),e.Y36(L.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-item-list"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loadedBlock",""],["aria-hidden","true","label","Loading...","size","sm"],[3,"ngIf","ngIfElse"],["emptyblock",""],["dragula","menuItems",3,"md","sm","gutter","dragulaModel","dragulaModelChange"],["class","d-flex justify-content-stretch",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-stretch"],[1,"d-flex","flex-grow-1"],[3,"cCardImg","src",4,"ngIf"],[1,"d-flex","flex-column","justify-content-end"],[1,"d-flex","justify-content-between"],["routerLinkActive","disabled","cButton","","color","light","size","sm",3,"routerLink"],[1,"d-flex","d-grid","gap-2","justify-content-between","align-items-center"],[1,"d-flex","d-grid","gap-2"],["color","primary","shape","rounded-pill"],[4,"ngIf"],["size","sm","label","Update Image",3,"id","imageChange"],[3,"cCardImg","src"],["color","dark","shape","rounded-pill"],[1,"text-decoration-line-through"]],template:function(t,o){if(1&t&&(e.YNc(0,K,4,0,"c-card",0),e.YNc(1,oe,3,2,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",o.isLoadingMenuItems)("ngIfElse",a)}},directives:[c.O5,i.AkF,i.yue,i.ORR,i.iok,g.sW,i.Aij,c.sg,i.Yp0,m.yS,m.Od,i.Hq3,i.FN3,q,i.pce],pipes:[c.H9],styles:[""]}),n})();function re(n,r){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._UZ(2,"c-spinner",5),e._uU(3," Loading... "),e.qZA(),e.qZA())}const ae=function(n){return[n,"edit"]},ce=function(n){return[n]};function se(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"c-col",10),e.TgZ(1,"c-card",11),e._UZ(2,"img",12),e.TgZ(3,"c-card-body",13),e.TgZ(4,"span",14),e.TgZ(5,"h6",15),e._uU(6),e.qZA(),e.TgZ(7,"span"),e.TgZ(8,"a",16),e._uU(9,"Edit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"p",17),e._uU(11),e.qZA(),e.TgZ(12,"span"),e.TgZ(13,"app-upload-button",18),e.NdJ("imageChange",function(a){return e.CHM(t),e.oxw(3).updateImage(a)}),e.qZA(),e.TgZ(14,"span",1),e.TgZ(15,"a",19),e.TgZ(16,"span"),e.TgZ(17,"c-badge",20),e._uU(18),e.qZA(),e.qZA(),e._uU(19," Items "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=r.$implicit;e.Q6J("lg",4)("md",6)("xs",12),e.xp6(2),e.Q6J("src",t.primaryImg,e.LSH),e.xp6(4),e.Oqu(t.title),e.xp6(2),e.Q6J("routerLink",e.VKq(10,ae,t.id)),e.xp6(3),e.Oqu(t.description),e.xp6(2),e.Q6J("id",t.id),e.xp6(2),e.Q6J("routerLink",e.VKq(12,ce,t.id)),e.xp6(3),e.Oqu(t.totalItems)}}function le(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"c-row",8),e.NdJ("dragulaModelChange",function(a){return e.CHM(t),e.oxw(2).menus=a}),e.YNc(1,se,20,14,"c-col",9),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("gutter",3)("dragulaModel",t.menus),e.xp6(1),e.Q6J("ngForOf",t.menus)}}function ue(n,r){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._uU(2," Empty "),e.qZA(),e.qZA())}function me(n,r){if(1&n&&(e.YNc(0,le,2,3,"c-row",6),e.YNc(1,ue,3,0,"ng-template",null,7,e.W1O)),2&n){const t=e.MAs(2),o=e.oxw();e.Q6J("ngIf",o.menus&&o.menus.length>0)("ngIfElse",t)}}const pe=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},directives:[m.lC],styles:[""]}),n})(),data:{title:"Menu"},children:[{path:"",component:(()=>{class n{constructor(t,o,a,s){this.route=t,this.amService=o,this.dragulaService=a,this.afService=s,this.menus=[],this.isLoading=!1,this.isUpdatingImage=!1,this.dragulaService.drop("menus").subscribe(_=>{this.menus.forEach((Z,C)=>Z.sortOrder=C+1);let M=this.menus.map((Z,C)=>({id:Z.id,sortOrder:Z.sortOrder}));this.amService.updateSorting(M).subscribe(Z=>Z)})}ngOnInit(){this.loadMenu()}loadMenu(t){var o=this;return(0,d.Z)(function*(){o.isLoading=!0,yield o.amService.filter(t).forEach(a=>o.menus=a),o.isLoading=!1})()}updateImage(t){var o=this;return(0,d.Z)(function*(){t&&t.id&&t.files&&(o.isUpdatingImage=!0,yield o.afService.menu(t.id,t.files[0]).forEach(a=>{if(t.id){let s=o.menus.find(_=>_.id==t.id);s&&(s.primaryImg=a.path)}}),o.isUpdatingImage=!1)})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.gz),e.Y36(I),e.Y36(g.pQ),e.Y36(L.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-list"]],decls:10,vars:2,consts:[[1,"mb-3"],[1,"d-flex","d-grid","gap-2","float-end"],["routerLink","create","cButton","","color","primary"],[4,"ngIf","ngIfElse"],["loadedBlock",""],["aria-hidden","true","label","Loading...","size","sm"],["dragula","menus",3,"gutter","dragulaModel","dragulaModelChange",4,"ngIf","ngIfElse"],["emptyMenuBlock",""],["dragula","menus",3,"gutter","dragulaModel","dragulaModelChange"],["class","d-flex justify-content-stretch",3,"lg","md","xs",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-stretch",3,"lg","md","xs"],[1,"d-flex","flex-grow-1"],[3,"cCardImg","src"],[1,"d-flex","flex-column","justify-content-end"],[1,"d-flex","justify-content-between"],["cCardTitle","",1,"text-truncate"],["cButton","","size","sm","color","light",3,"routerLink"],["cCardText","",1,"text-truncate"],["size","sm","label","Update Image",3,"id","imageChange"],["cButton","","size","sm",3,"routerLink"],["color","primary","shape","rounded-pill"]],template:function(t,o){if(1&t&&(e.TgZ(0,"c-row"),e.TgZ(1,"c-col"),e.TgZ(2,"c-card",0),e.TgZ(3,"c-card-body"),e.TgZ(4,"span",1),e.TgZ(5,"a",2),e._uU(6,"Create New Menu"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,re,4,0,"c-card",3),e.YNc(8,me,3,2,"ng-template",null,4,e.W1O),e.qZA(),e.qZA()),2&t){const a=e.MAs(9);e.xp6(7),e.Q6J("ngIf",o.isLoading)("ngIfElse",a)}},directives:[i.iok,i.Yp0,i.AkF,i.yue,m.yS,i.Hq3,c.O5,i.ORR,g.sW,i.Aij,c.sg,i.pce,i.qkm,i.PVT,q,i.FN3],styles:[""]}),n})(),data:{title:"List"}},{path:"create",component:U,data:{title:"Create"}},{path:":id/edit",component:U,data:{title:"Edit"}},{path:":id",component:X,data:{title:"Item List"},children:[{path:"",component:ie},{path:"item/create",component:S,data:{title:"Item Create"}},{path:"item/:menuItemId/edit",component:S,data:{title:"Item Edit"}}]}]}];let de=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.Bz.forChild(pe)],m.Bz]}),n})();var ge=l(4466),_e=l(6939),fe=l(1728);const Ze=[i.dTQ,i.hJ1,i.ejP,i.zE6,i.U$I,i.Fme,i.nMh,fe.QX,i.TXv,p.Xd,i.Xo8,i.oTD],he=[ge.m,u.u5,u.UX,_e.u3.forRoot(),A.JF,A.Ed,g.qE.forRoot()];let Ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.ez,de,...Ze,...he]]}),n})()},9998:(y,v,l)=>{l.d(v,{w:()=>I});var c=l(4893),m=l(9808);function d(i,g){1&i&&(c.TgZ(0,"p",2),c._uU(1,"this field is required"),c.qZA())}function e(i,g){1&i&&(c.TgZ(0,"p",2),c._uU(1,"invalid email"),c.qZA())}function f(i,g){if(1&i&&(c.TgZ(0,"p",2),c._uU(1),c.qZA()),2&i){const p=c.oxw(2);c.xp6(1),c.hij("min ",p.control.errors.minlength.requiredLength," characters are required")}}function h(i,g){if(1&i&&(c.TgZ(0,"p",2),c._uU(1),c.qZA()),2&i){const p=c.oxw(2);c.xp6(1),c.hij("max ",p.control.errors.maxlength.requiredLength," characters are required")}}function A(i,g){if(1&i&&(c.TgZ(0,"p",2),c._uU(1),c.qZA()),2&i){const p=c.oxw(2);c.xp6(1),c.Oqu(p.control.errors.else)}}function x(i,g){if(1&i&&(c.YNc(0,d,2,0,"p",1),c.YNc(1,e,2,0,"p",1),c.YNc(2,f,2,1,"p",1),c.YNc(3,h,2,1,"p",1),c.YNc(4,A,2,1,"p",1)),2&i){const p=c.oxw();c.Q6J("ngIf",p.control.errors.required),c.xp6(1),c.Q6J("ngIf",p.control.errors.email),c.xp6(1),c.Q6J("ngIf",p.control.errors.minlength),c.xp6(1),c.Q6J("ngIf",p.control.errors.maxlength),c.xp6(1),c.Q6J("ngIf",p.control.errors.else)}}let I=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(p){return new(p||i)},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-input-error"]],inputs:{control:"control"},decls:1,vars:1,consts:[[3,"ngIf"],["class","m-0 text-danger",4,"ngIf"],[1,"m-0","text-danger"]],template:function(p,T){1&p&&c.YNc(0,x,5,5,"ng-template",0),2&p&&c.Q6J("ngIf",T.control&&T.control.invalid&&(T.control.dirty||T.control.touched)&&T.control.errors)},directives:[m.O5],styles:[""]}),i})()},1569:(y,v,l)=>{l.d(v,{L:()=>d});var c=l(5033),m=l(4893);let d=(()=>{class e extends c.Hq3{constructor(h){super(),this.el=h,this._loadingLabel="",this._loading=!1}get loadingLabel(){return this._loadingLabel}set loadingLabel(h){this._loadingLabel=h}get loading(){return this._loading}set loading(h){this._loading=h,this.content||(this.content=this.el.nativeElement.innerHTML),this.el.nativeElement.innerHTML=this._loading?`<span class="spinner-border spinner-border-sm ng-star-inserted"></span> ${this.loadingLabel}`:this.content}}return e.\u0275fac=function(h){return new(h||e)(m.Y36(m.SBq))},e.\u0275dir=m.lG2({type:e,selectors:[["","xcButton",""]],inputs:{loadingLabel:"loadingLabel",loading:"loading"},exportAs:["xcButton"],features:[m.qOj]}),e})()}}]);