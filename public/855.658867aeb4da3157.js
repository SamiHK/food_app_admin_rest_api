"use strict";(self.webpackChunkfoodapp=self.webpackChunkfoodapp||[]).push([[855],{8429:(W,Z,a)=>{a.r(Z),a.d(Z,{SalespersonModule:()=>D});var m=a(9808),p=a(3477),u=a(5861),i=a(2382),S=a(5705),e=a(4893),g=a(262),A=a(2340),d=a(520),_=a(5450);let f=(()=>{class n{constructor(o,t){this.http=o,this.commonService=t,this.BASE_URL=`${A.N.API_BASE_URL}/manager/salesperson`}get(o){return this.http.get(`${this.BASE_URL}/${o}`).pipe((0,g.K)(this.commonService.catchError))}available(o){return this.http.get(`${this.BASE_URL}/available`,{params:o}).pipe((0,g.K)(this.commonService.catchError))}filter(o){return this.http.get(`${this.BASE_URL}`,{params:o}).pipe((0,g.K)(this.commonService.catchError))}register(o){return this.http.post(`${this.BASE_URL}`,o).pipe((0,g.K)(this.commonService.catchError))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(d.eN),e.LFG(_.v))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var s=a(5033),h=a(6939),T=a(9553);function C(n,r){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._UZ(2,"c-spinner",12),e.qZA(),e.qZA())}function w(n,r){if(1&n&&(e.TgZ(0,"c-col"),e.YNc(1,C,3,0,"c-card",11),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.page.items)}}function q(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const o=e.oxw().$implicit;e.xp6(1),e.hij(" ",o.fullName," ")}}const y=function(n){return[n]};function L(n,r){if(1&n&&(e.TgZ(0,"c-card",16),e.TgZ(1,"c-card-body"),e.TgZ(2,"span",17),e.TgZ(3,"span",18),e._uU(4),e.TgZ(5,"h6",19),e.YNc(6,q,2,1,"span",14),e.qZA(),e.qZA(),e._UZ(7,"app-user-active-switch",20),e.qZA(),e.qZA(),e.qZA()),2&n){const o=r.$implicit;e.xp6(3),e.Q6J("routerLink",e.VKq(4,y,o.id)),e.xp6(1),e.hij(" @",o.username," "),e.xp6(2),e.Q6J("ngIf",o.fullName),e.xp6(1),e.Q6J("user",o)}}function x(n,r){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._uU(2," Empty Block "),e.qZA(),e.qZA())}function b(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"c-col"),e.YNc(1,L,8,6,"c-card",13),e.YNc(2,x,3,0,"c-card",14),e.qZA(),e.TgZ(3,"pagination",15),e.NdJ("ngModelChange",function(l){return e.CHM(o),e.oxw().page.number=l})("pageChanged",function(l){return e.CHM(o),e.oxw().onPageChange(l)}),e.qZA()}if(2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.page.items),e.xp6(1),e.Q6J("ngIf",0==o.page.items.length),e.xp6(1),e.Q6J("totalItems",o.page.total)("ngModel",o.page.number)}}let U=(()=>{class n{constructor(o){this.mspService=o,this.page=new S.T,this.form=new i.cw({search:new i.NI(null,i.kI.required)}),this.isLoading=!1}ngOnInit(){this.loadManagers()}loadManagers(o){var t=this;return(0,u.Z)(function*(){t.isLoading=!0,yield t.mspService.filter(o).forEach(l=>t.page=l).finally(()=>t.isLoading=!1)})()}filter(){this.form.valid?this.loadManagers(this.form.value):this.loadManagers()}onPageChange(o){this.form.valid?(Object.assign(o,this.form.value),this.loadManagers(o)):this.loadManagers({number:o.page})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-salesperson-list"]],decls:20,vars:3,consts:[[1,"mb-4"],[1,""],[1,"float-end"],["cButton","","color","primary","routerLink","register"],[3,"formGroup","ngSubmit"],["cFormFloating",""],["cFormControl","","formControlName","search","name","search","type","search","placeholder","Search by username, email or name","autofocus",""],["cLabel","","for","search"],[1,"mt-3"],[4,"ngIf","ngIfElse"],["loadedBlock",""],[4,"ngFor","ngForOf"],["size","sm"],["class","mb-1",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mt-2",3,"totalItems","ngModel","ngModelChange","pageChanged"],[1,"mb-1"],[1,"d-flex","justify-content-between"],[1,"d-flex","flex-grow-1","gap-2","align-items-center",3,"routerLink"],[1,"m-0"],[3,"user"]],template:function(o,t){if(1&o&&(e.TgZ(0,"c-card",0),e.TgZ(1,"c-card-body"),e.TgZ(2,"c-row"),e.TgZ(3,"c-col",1),e.TgZ(4,"span",2),e.TgZ(5,"button",3),e._uU(6,"Register New Salesperson"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"c-card",0),e.TgZ(8,"c-card-body"),e.TgZ(9,"c-row"),e.TgZ(10,"c-col"),e.TgZ(11,"form",4),e.NdJ("ngSubmit",function(){return t.filter()}),e.TgZ(12,"div",5),e._UZ(13,"input",6),e.TgZ(14,"label",7),e._uU(15,"Search by username, email or name"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"c-row",8),e.YNc(17,w,2,1,"c-col",9),e.YNc(18,b,4,4,"ng-template",null,10,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&o){const l=e.MAs(19);e.xp6(11),e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngIf",t.isLoading)("ngIfElse",l)}},directives:[s.AkF,s.yue,s.iok,s.Yp0,s.Hq3,p.rH,i._Y,i.JL,i.sg,s.xPZ,s.oHf,i.Fj,i.JJ,i.u,s.eFW,m.O5,m.sg,s.ORR,h.Qt,i.On,T.H],styles:[""]}),n})();var v=a(9337),J=a(3087),F=a(704),I=a(9998),R=a(1569);function E(n,r){if(1&n&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Oqu(o.alert.message)}}function N(n,r){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.hij("Note: by default password will be same as username: ",o.form.controls.username.value,"")}}let M=(()=>{class n{constructor(o,t,l,c){this.mspService=o,this.router=t,this.alertService=l,this.location=c,this.form=new i.cw({username:new i.NI(null,[i.kI.required]),password:new i.NI(null),confirmPassword:new i.NI(null)}),this.isLoading=!1,this.alert=new v.b,this.form.addValidators(J.o)}ngOnInit(){}onSubmit(){var o=this;return(0,u.Z)(function*(){o.form.valid&&(o.alertService.hideAlert(o.alert),o.isLoading=!0,o.mspService.register(o.form.value).forEach(t=>{console.log(t),t&&(o.alertService.showAlert(o.alert,"Salesperson Registered","New Salesperson has been registered","success"),o.router.navigate(["manager","salesperson",t.id]))}).catch(t=>{"ER_DUP_ENTRY"==t.code?o.form.controls.username.setErrors({else:"Username not available"}):o.alertService.showAlert(o.alert,t.code,t.message)}).finally(()=>o.isLoading=!1))})()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(f),e.Y36(p.F0),e.Y36(F.c),e.Y36(m.Ye))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-salesperson-register"]],decls:38,vars:13,consts:[[1,"justify-content-center"],["md","8"],[1,"mb-4"],[3,"color","visible","dismissible","visibleChange"],["cAlertHeading",""],["class","m-0",4,"ngIf"],["cForm","",3,"formGroup","ngSubmit"],[3,"disabled"],["cFormFloating","",1,"mb-3"],["formControlName","username","cFormControl","","id","username","placeholder","enter your username or email","autofocus","",3,"valid"],["cLabel","","id","username"],[3,"control"],["formControlName","password","cFormControl","","id","password","placeholder","password","type","password"],["cLabel","","id","password"],["formControlName","confirmPassword","cFormControl","","id","confirmPassword","placeholder","confirmPassword","type","password"],["cLabel","","id","confirmPassword"],[4,"ngIf"],[1,"d-flex","d-grid","gap-2","float-end"],["xcButton","","type","button","color","light",3,"click"],["xcButton","","loadingLabel","Registering...","type","submit","color","primary",3,"loading"],[1,"m-0"]],template:function(o,t){1&o&&(e.TgZ(0,"c-row",0),e.TgZ(1,"c-col",1),e.TgZ(2,"c-card",2),e.TgZ(3,"c-card-body"),e.TgZ(4,"c-alert",3),e.NdJ("visibleChange",function(c){return t.alert.visible=c}),e.TgZ(5,"h6",4),e._uU(6),e.qZA(),e.YNc(7,E,2,1,"p",5),e.qZA(),e.TgZ(8,"form",6),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(9,"fieldset",7),e.TgZ(10,"c-row"),e.TgZ(11,"c-col"),e.TgZ(12,"div",8),e._UZ(13,"input",9),e.TgZ(14,"label",10),e._uU(15,"Username"),e.qZA(),e._UZ(16,"app-input-error",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"c-row"),e.TgZ(18,"c-col"),e.TgZ(19,"div",8),e._UZ(20,"input",12),e.TgZ(21,"label",13),e._uU(22,"Password"),e.qZA(),e._UZ(23,"app-input-error",11),e.qZA(),e.qZA(),e.TgZ(24,"c-col"),e.TgZ(25,"div",8),e._UZ(26,"input",14),e.TgZ(27,"label",15),e._uU(28,"Confirm Password"),e.qZA(),e._UZ(29,"app-input-error",11),e.qZA(),e.qZA(),e.qZA(),e.YNc(30,N,2,1,"p",16),e.TgZ(31,"c-row"),e.TgZ(32,"c-col"),e.TgZ(33,"span",17),e.TgZ(34,"button",18),e.NdJ("click",function(){return t.location.back()}),e._uU(35," Cancel "),e.qZA(),e.TgZ(36,"button",19),e._uU(37," Register "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(4),e.Q6J("color",t.alert.type)("visible",t.alert.visible)("dismissible",!0),e.xp6(2),e.Oqu(t.alert.title),e.xp6(1),e.Q6J("ngIf",t.alert.message),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("disabled",t.isLoading),e.xp6(4),e.Q6J("valid",t.form.controls.username.valid),e.xp6(3),e.Q6J("control",t.form.controls.username),e.xp6(7),e.Q6J("control",t.form.controls.password),e.xp6(6),e.Q6J("control",t.form),e.xp6(1),e.Q6J("ngIf",!t.form.controls.password.value),e.xp6(6),e.Q6J("loading",t.isLoading))},directives:[s.iok,s.Yp0,s.AkF,s.yue,s.wxo,s.bqr,m.O5,i._Y,i.JL,s.$_X,i.sg,s.xPZ,i.Fj,s.oHf,i.JJ,i.u,s.eFW,I.w,R.L],styles:[""]}),n})();var Q=a(2244);class Y extends Q.n{}var O=a(4541);function B(n,r){1&n&&(e.TgZ(0,"c-row",2),e.TgZ(1,"c-col",2),e._UZ(2,"c-spinner",3),e.TgZ(3,"span",4),e._uU(4," Loading... "),e.qZA(),e.qZA(),e.qZA())}const P=function(){return["/manager","order"]},j=function(n){return{salespersonId:n}};function V(n,r){if(1&n&&(e.TgZ(0,"c-row",5),e.TgZ(1,"c-col",6),e.TgZ(2,"c-row"),e.TgZ(3,"c-col"),e.TgZ(4,"h4"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"c-col",7),e._UZ(7,"app-user-active-switch",8),e.qZA(),e.qZA(),e._UZ(8,"app-user-profile",8),e.TgZ(9,"c-row"),e.TgZ(10,"c-col"),e.TgZ(11,"c-card"),e.TgZ(12,"c-card-body"),e.TgZ(13,"a",9),e._uU(14,"Order"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const o=e.oxw();e.xp6(5),e.hij("@",o.salesperson.username,""),e.xp6(2),e.Q6J("user",o.salesperson),e.xp6(1),e.Q6J("user",o.salesperson),e.xp6(5),e.Q6J("routerLink",e.DdM(5,P))("queryParams",e.VKq(6,j,o.salesperson.id))}}const H=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-salesperson"]],decls:1,vars:0,template:function(o,t){1&o&&e._UZ(0,"router-outlet")},directives:[p.lC],styles:[""]}),n})(),data:{title:"Salesperson"},children:[{path:"",component:U,data:{title:"List"}},{path:"register",component:M,data:{title:"Register"}},{path:":id",component:(()=>{class n{constructor(o,t,l){this.route=o,this.router=t,this.amService=l,this.salesperson=new Y,this.isLoading=!1,this.isEditBranch=!1,this.selectedBranchId=null,this.branchLoading=!1,this.alert=new v.b;let c=this.route.snapshot.params.id;c&&(this.salesperson.id=c)}ngOnInit(){var o=this;return(0,u.Z)(function*(){o.salesperson.id&&(o.isLoading=!0,yield o.amService.get(o.salesperson.id).forEach(t=>o.salesperson=t).finally(()=>o.isLoading=!1))})()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(p.gz),e.Y36(p.F0),e.Y36(f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-salesperson-view"]],decls:3,vars:2,consts:[["class","",4,"ngIf","ngIfElse"],["elseBlock",""],[1,""],["size","sm"],[1,"d-flex-inline","my-auto"],[1,"justify-content-center"],["md","8"],["xs","1"],[3,"user"],["cButton","","color","dark","variant","outline","type","button",3,"routerLink","queryParams"]],template:function(o,t){if(1&o&&(e.YNc(0,B,5,0,"c-row",0),e.YNc(1,V,15,8,"ng-template",null,1,e.W1O)),2&o){const l=e.MAs(2);e.Q6J("ngIf",t.isLoading)("ngIfElse",l)}},directives:[m.O5,s.iok,s.Yp0,s.ORR,T.H,O.M,s.AkF,s.yue,p.yS,s.Hq3],styles:[""]}),n})(),data:{title:"View"}}]}];let $=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.Bz.forChild(H)],p.Bz]}),n})();var z=a(4466),X=a(1728);const G=[s.dTQ,s.hJ1,s.ejP,s.zE6,s.U$I,s.Fme,s.nMh,X.QX,s.TXv],K=[z.m,i.u5,i.UX,h.u3.forRoot(),d.JF,d.Ed];let D=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,$,...G,...K]]}),n})()}}]);