"use strict";(self.webpackChunkfoodapp=self.webpackChunkfoodapp||[]).push([[449],{9449:(re,Z,s)=>{s.r(Z),s.d(Z,{ManagerModule:()=>ae});var g=s(9808),m=s(3477),M=s(4856),p=s(5861),i=s(2382),f=s(5705),e=s(4893),u=s(2215),r=s(5033),_=s(6939),h=s(9553);function q(t,o){1&t&&(e.TgZ(0,"tr"),e.TgZ(1,"td",11),e._UZ(2,"c-spinner",12),e.qZA(),e.qZA())}const b=function(t){return{"table-dark":t}},d=function(t){return[t]};function w(t,o){if(1&t&&(e.TgZ(0,"tr",15),e.TgZ(1,"td"),e._UZ(2,"app-user-active-switch",16),e.qZA(),e.TgZ(3,"td",17),e._uU(4),e.qZA(),e.TgZ(5,"td",17),e._uU(6),e.qZA(),e.TgZ(7,"td",17),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.qZA()),2&t){const n=o.$implicit;e.Q6J("ngClass",e.VKq(9,b,!n.enabled)),e.xp6(2),e.Q6J("user",n),e.xp6(1),e.Q6J("routerLink",e.VKq(11,d,n.id)),e.xp6(1),e.Oqu(n.username),e.xp6(1),e.Q6J("routerLink",e.VKq(13,d,n.id)),e.xp6(1),e.Oqu(n.email),e.xp6(1),e.Q6J("routerLink",e.VKq(15,d,n.id)),e.xp6(1),e.Oqu(n.fullName),e.xp6(2),e.Oqu(n.branchName)}}function x(t,o){1&t&&(e.TgZ(0,"tr"),e.TgZ(1,"td",18),e._uU(2," Empty "),e.qZA(),e.qZA())}function C(t,o){if(1&t&&(e.YNc(0,w,11,17,"tr",13),e.YNc(1,x,3,0,"tr",14)),2&t){const n=e.oxw();e.Q6J("ngForOf",n.page.items),e.xp6(1),e.Q6J("ngIf",0==n.page.items.length)}}let U=(()=>{class t{constructor(n){this.amService=n,this.page=new f.T,this.form=new i.cw({search:new i.NI(null,i.kI.required)}),this.isLoading=!1}ngOnInit(){this.loadManagers()}loadManagers(n){var a=this;return(0,p.Z)(function*(){a.isLoading=!0,yield a.amService.filter(n).forEach(c=>a.page=c).finally(()=>a.isLoading=!1)})()}filter(){this.form.valid?this.loadManagers(this.form.value):this.loadManagers()}onPageChange(n){this.form.valid?(Object.assign(n,this.form.value),this.loadManagers(n)):this.loadManagers({number:n.page})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.f))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-manager-list"]],decls:35,vars:5,consts:[[1,"mb-4"],[1,"text-right"],["cButton","","color","primary","routerLink","register"],[3,"formGroup","ngSubmit"],["cFormFloating",""],["cFormControl","","formControlName","search","name","search","type","search","placeholder","Search by username, email or name","autofocus",""],["cLabel","","for","search"],["cTable","","hover",""],[4,"ngIf","ngIfElse"],["showResult",""],[3,"totalItems","ngModel","ngModelChange","pageChanged"],["colspan","5",1,"text-center","my-2"],["aria-hidden","true","label","Loading..."],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass"],[3,"user"],[3,"routerLink"],["colspan","5",1,"text-center"]],template:function(n,a){if(1&n&&(e.TgZ(0,"c-card",0),e.TgZ(1,"c-card-body"),e.TgZ(2,"c-row"),e.TgZ(3,"c-col",1),e.TgZ(4,"button",2),e._uU(5,"Register New Manager"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"c-card",0),e.TgZ(7,"c-card-body"),e.TgZ(8,"c-row"),e.TgZ(9,"c-col"),e.TgZ(10,"form",3),e.NdJ("ngSubmit",function(){return a.filter()}),e.TgZ(11,"div",4),e._UZ(12,"input",5),e.TgZ(13,"label",6),e._uU(14,"Search by username, email or name"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(15,"hr"),e.TgZ(16,"c-row"),e.TgZ(17,"c-col"),e.TgZ(18,"table",7),e.TgZ(19,"thead"),e.TgZ(20,"tr"),e._UZ(21,"th"),e.TgZ(22,"th"),e._uU(23,"Username"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Email"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Full name"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Branch"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"tbody"),e.YNc(31,q,3,0,"tr",8),e.YNc(32,C,2,2,"ng-template",null,9,e.W1O),e.qZA(),e.qZA(),e.TgZ(34,"pagination",10),e.NdJ("ngModelChange",function(l){return a.page.number=l})("pageChanged",function(l){return a.onPageChange(l)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const c=e.MAs(33);e.xp6(10),e.Q6J("formGroup",a.form),e.xp6(21),e.Q6J("ngIf",a.isLoading)("ngIfElse",c),e.xp6(3),e.Q6J("totalItems",a.page.total)("ngModel",a.page.number)}},directives:[r.AkF,r.yue,r.iok,r.Yp0,r.Hq3,m.rH,i._Y,i.JL,i.sg,r.xPZ,r.oHf,i.Fj,i.JJ,i.u,r.eFW,r.auY,g.O5,_.Qt,i.On,r.ORR,g.sg,g.mk,h.H],styles:[""]}),t})();var T=s(9337),J=s(3087),y=s(704),I=s(9998),A=s(1569);function L(t,o){if(1&t&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Oqu(n.alert.message)}}function N(t,o){if(1&t&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("Note: by default password will be same as username: ",n.form.controls.username.value,"")}}let B=(()=>{class t{constructor(n,a,c,l){this.amService=n,this.router=a,this.alertService=c,this.location=l,this.form=new i.cw({username:new i.NI(null,[i.kI.required]),password:new i.NI(null),confirmPassword:new i.NI(null)}),this.isLoading=!1,this.alert=new T.b,this.form.addValidators(J.o)}ngOnInit(){}onSubmit(){var n=this;return(0,p.Z)(function*(){n.form.valid&&(n.alertService.hideAlert(n.alert),n.isLoading=!0,n.amService.register(n.form.value).forEach(a=>{console.log(a),a&&(n.alertService.showAlert(n.alert,"Manager Registered","New Manager has been registered","success"),n.router.navigate(["manager",a.id]))}).catch(a=>{"ER_DUP_ENTRY"==a.code?n.form.controls.username.setErrors({else:"Username not available"}):n.alertService.showAlert(n.alert,a.code,a.message)}).finally(()=>n.isLoading=!1))})()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.f),e.Y36(m.F0),e.Y36(y.c),e.Y36(g.Ye))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-manager-register"]],decls:38,vars:13,consts:[[1,"justify-content-center"],["md","8"],[1,"mb-4"],[3,"color","visible","dismissible","visibleChange"],["cAlertHeading",""],["class","m-0",4,"ngIf"],["cForm","",3,"formGroup","ngSubmit"],[3,"disabled"],["cFormFloating","",1,"mb-3"],["formControlName","username","cFormControl","","id","username","placeholder","enter your username or email","autofocus","",3,"valid"],["cLabel","","id","username"],[3,"control"],["formControlName","password","cFormControl","","id","password","placeholder","password","type","password"],["cLabel","","id","password"],["formControlName","confirmPassword","cFormControl","","id","confirmPassword","placeholder","confirmPassword","type","password"],["cLabel","","id","confirmPassword"],[4,"ngIf"],[1,"float-end"],["xcButton","","type","button","color","light",1,"mr-2",3,"click"],["xcButton","","loadingLabel","Registering...","type","submit","color","primary",3,"loading"],[1,"m-0"]],template:function(n,a){1&n&&(e.TgZ(0,"c-row",0),e.TgZ(1,"c-col",1),e.TgZ(2,"c-card",2),e.TgZ(3,"c-card-body"),e.TgZ(4,"c-alert",3),e.NdJ("visibleChange",function(l){return a.alert.visible=l}),e.TgZ(5,"h6",4),e._uU(6),e.qZA(),e.YNc(7,L,2,1,"p",5),e.qZA(),e.TgZ(8,"form",6),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.TgZ(9,"fieldset",7),e.TgZ(10,"c-row"),e.TgZ(11,"c-col"),e.TgZ(12,"div",8),e._UZ(13,"input",9),e.TgZ(14,"label",10),e._uU(15,"Username"),e.qZA(),e._UZ(16,"app-input-error",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"c-row"),e.TgZ(18,"c-col"),e.TgZ(19,"div",8),e._UZ(20,"input",12),e.TgZ(21,"label",13),e._uU(22,"Password"),e.qZA(),e._UZ(23,"app-input-error",11),e.qZA(),e.qZA(),e.TgZ(24,"c-col"),e.TgZ(25,"div",8),e._UZ(26,"input",14),e.TgZ(27,"label",15),e._uU(28,"Confirm Password"),e.qZA(),e._UZ(29,"app-input-error",11),e.qZA(),e.qZA(),e.qZA(),e.YNc(30,N,2,1,"p",16),e.TgZ(31,"c-row"),e.TgZ(32,"c-col"),e.TgZ(33,"span",17),e.TgZ(34,"button",18),e.NdJ("click",function(){return a.location.back()}),e._uU(35," Cancel "),e.qZA(),e.TgZ(36,"button",19),e._uU(37," Register "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(4),e.Q6J("color",a.alert.type)("visible",a.alert.visible)("dismissible",!0),e.xp6(2),e.Oqu(a.alert.title),e.xp6(1),e.Q6J("ngIf",a.alert.message),e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(1),e.Q6J("disabled",a.isLoading),e.xp6(4),e.Q6J("valid",a.form.controls.username.valid),e.xp6(3),e.Q6J("control",a.form.controls.username),e.xp6(7),e.Q6J("control",a.form.controls.password),e.xp6(6),e.Q6J("control",a.form),e.xp6(1),e.Q6J("ngIf",!a.form.controls.password.value),e.xp6(6),e.Q6J("loading",a.isLoading))},directives:[r.iok,r.Yp0,r.AkF,r.yue,r.wxo,r.bqr,g.O5,i._Y,i.JL,r.$_X,i.sg,r.xPZ,i.Fj,r.oHf,i.JJ,i.u,r.eFW,I.w,A.L],styles:[""]}),t})();var F=s(936),Q=s(2244);class S extends Q.n{}var Y=s(4292),E=s(632);function O(t,o){1&t&&(e.TgZ(0,"c-row",2),e.TgZ(1,"c-col",3),e._UZ(2,"c-spinner",4),e.TgZ(3,"span",5),e._uU(4," Loading... "),e.qZA(),e.qZA(),e.qZA())}const R=function(t){return[t,"salespersons"]};function V(t,o){if(1&t&&(e.TgZ(0,"a",17),e._uU(1," Salesperson "),e.TgZ(2,"c-badge",18),e._uU(3),e.qZA(),e.qZA()),2&t){const n=e.oxw(4);e.Q6J("routerLink",e.VKq(2,R,n.manager.branchId)),e.xp6(3),e.Oqu(n.manager.salespersons.length)}}const P=function(t){return["/branch",t]};function j(t,o){if(1&t&&(e.TgZ(0,"span"),e.TgZ(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"a",15),e._uU(4),e.qZA(),e._UZ(5,"hr"),e.YNc(6,V,4,4,"a",16),e.qZA()),2&t){const n=e.oxw(3);e.xp6(2),e.hij(" ",n.manager.branch.name," "),e.xp6(1),e.Q6J("routerLink",e.VKq(4,P,n.manager.branchId)),e.xp6(1),e.hij(" ",n.manager.branch.code," "),e.xp6(2),e.Q6J("ngIf",n.manager.salespersons)}}function H(t,o){1&t&&e._uU(0,"N/A")}function k(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"c-row"),e.TgZ(1,"c-col"),e.YNc(2,j,7,6,"span",9),e.YNc(3,H,1,0,"ng-template",null,11,e.W1O),e.qZA(),e.TgZ(5,"c-col",12),e.TgZ(6,"span",13),e.TgZ(7,"button",14),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).editBranch()}),e._uU(8,"Edit"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.MAs(4),a=e.oxw(2);e.xp6(2),e.Q6J("ngIf",a.manager.branchId&&a.manager.branch&&a.manager.branch)("ngIfElse",n)}}function X(t,o){if(1&t&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.code)}}function z(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"span"),e.TgZ(1,"select",25),e.NdJ("ngModelChange",function(c){return e.CHM(n),e.oxw(3).selectedBranchId=c}),e.TgZ(2,"option",26),e._uU(3,"None"),e.qZA(),e.YNc(4,X,2,2,"option",27),e.qZA(),e.qZA()}if(2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("ngModel",n.selectedBranchId),e.xp6(3),e.Q6J("ngForOf",n.branchPage.items)}}function K(t,o){1&t&&e._UZ(0,"c-spinner",4)}function W(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"form",19),e.NdJ("ngSubmit",function(){return e.CHM(n),e.oxw(2).saveBranch()}),e.TgZ(1,"fieldset",20),e.TgZ(2,"c-row"),e.TgZ(3,"c-col"),e.YNc(4,z,5,2,"span",9),e.YNc(5,K,1,0,"ng-template",null,21,e.W1O),e.qZA(),e.TgZ(7,"c-col",22),e.TgZ(8,"span",23),e.TgZ(9,"button",14),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).cancelEditBranch()}),e._uU(10,"Cancel"),e.qZA(),e.TgZ(11,"button",24),e._uU(12," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.MAs(6),a=e.oxw(2);e.xp6(1),e.Q6J("disabled",a.savingBranch),e.xp6(3),e.Q6J("ngIf",!a.branchLoading)("ngIfElse",n),e.xp6(7),e.Q6J("loading",a.savingBranch)}}function G(t,o){if(1&t&&(e.TgZ(0,"c-row",2),e.TgZ(1,"c-col",6),e.TgZ(2,"c-row"),e.TgZ(3,"c-col"),e.TgZ(4,"h4"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"c-col",7),e._UZ(7,"app-user-active-switch",8),e.qZA(),e.qZA(),e._UZ(8,"app-user-profile",8),e.TgZ(9,"h4"),e._uU(10,"Branch"),e.qZA(),e.TgZ(11,"c-card"),e.TgZ(12,"c-card-body"),e.YNc(13,k,9,2,"c-row",9),e.YNc(14,W,13,4,"ng-template",null,10,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(15),a=e.oxw();e.xp6(5),e.hij("@",a.manager.username,""),e.xp6(2),e.Q6J("user",a.manager),e.xp6(1),e.Q6J("user",a.manager),e.xp6(5),e.Q6J("ngIf",!a.isEditBranch)("ngIfElse",n)}}const $=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-manager"]],decls:1,vars:0,template:function(n,a){1&n&&e._UZ(0,"router-outlet")},directives:[m.lC],styles:[""]}),t})(),data:{title:"Manager"},children:[{path:"",component:U,data:{title:"Search"}},{path:"register",component:B,data:{title:"Register New Manager"}},{path:":id",component:(()=>{class t{constructor(n,a,c,l){this.route=n,this.router=a,this.amService=c,this.abService=l,this.manager=new S,this.isLoading=!1,this.isEditBranch=!1,this.selectedBranchId=null,this.branchPage=new f.T,this.branchLoading=!1,this.savingBranch=!1,this.alert=new T.b;let v=this.route.snapshot.params.id;v&&(this.manager.id=v)}ngOnInit(){var n=this;return(0,p.Z)(function*(){n.manager.id&&(n.isLoading=!0,yield n.amService.get(n.manager.id).forEach(a=>n.manager=a).finally(()=>n.isLoading=!1))})()}loadBranch(){this.branchLoading=!0,this.abService.available().forEach(n=>this.branchPage=n).finally(()=>this.branchLoading=!1)}editBranch(){this.branchPage&&0==this.branchPage.items.length&&this.loadBranch(),this.isEditBranch=!0}cancelEditBranch(){this.isEditBranch=!1,this.selectedBranchId=null}saveBranch(){var n=this;return(0,p.Z)(function*(){n.selectedBranchId&&n.manager.id&&(n.savingBranch=!0,yield n.abService.updateManager(n.selectedBranchId,{managerId:n.manager.id}).forEach(a=>{n.manager.branchId=a.id,n.manager.branch=new F.I,Object.assign(n.manager.branch,a),n.isEditBranch=!1,n.loadBranch()}).catch(a=>console.log(a)).finally(()=>{n.selectedBranchId=null,n.savingBranch=!1}))})()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(m.gz),e.Y36(m.F0),e.Y36(u.f),e.Y36(Y.F))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-manager-view"]],decls:3,vars:2,consts:[["class","justify-content-center",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"justify-content-center"],["md","8",1,""],["size","sm"],[1,"d-flex-inline","my-auto"],["md","8"],["xs","1"],[3,"user"],[4,"ngIf","ngIfElse"],["branchForm",""],["na",""],["xs","2"],[1,"float-end"],["cButton","","color","light","size","sm",3,"click"],["cButton","","color","light","size","sm",3,"routerLink"],["cButton","","color","light",3,"routerLink",4,"ngIf"],["cButton","","color","light",3,"routerLink"],["shape","rounded-pill","color","success"],[3,"ngSubmit"],[3,"disabled"],["loader",""],["xs","4"],[1,"d-grid","gap-2","d-flex","float-end"],["xcButton","","loadingLabel","Saving...","type","submit",3,"loading"],["cSelect","","name","branch",3,"ngModel","ngModelChange"],["value","null"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,a){if(1&n&&(e.YNc(0,O,5,0,"c-row",0),e.YNc(1,G,16,5,"ng-template",null,1,e.W1O)),2&n){const c=e.MAs(2);e.Q6J("ngIf",a.isLoading)("ngIfElse",c)}},directives:[g.O5,r.iok,r.Yp0,r.ORR,h.H,E.M,r.AkF,r.yue,r.Hq3,m.yS,r.FN3,i._Y,i.JL,i.F,A.L,r.nqR,i.EJ,i.JJ,i.On,i.YN,i.Kr,g.sg],styles:[""]}),t})(),data:{title:"Profile"}},{path:":id/:branchId/salespersons",component:M.X,data:{title:"Salespersons"}}]}];let D=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.Bz.forChild($)],m.Bz]}),t})();var ee=s(4466),ne=s(1728);const te=[r.dTQ,r.hJ1,r.ejP,r.zE6,r.U$I,r.Fme,r.nMh,ne.QX,r.TXv];let ae=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[g.ez,D,i.u5,i.UX,ee.m,...te,_.u3.forRoot()]]}),t})()}}]);