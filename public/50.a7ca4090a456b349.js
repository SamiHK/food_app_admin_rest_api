"use strict";(self.webpackChunkfoodapp=self.webpackChunkfoodapp||[]).push([[50],{1050:(ie,u,s)=>{s.r(u),s.d(u,{ManagerModule:()=>re});var m=s(9808),g=s(3477),b=s(4856),p=s(5861),i=s(2382),f=s(5705),e=s(4893),d=s(9030),r=s(5033),Z=s(9553),_=s(6939);function x(a,o){1&a&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._UZ(2,"c-spinner",12),e.qZA(),e.qZA())}function M(a,o){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const n=e.oxw().$implicit;e.xp6(1),e.Oqu(n.fullName)}}const w=function(a,o,n){return{"table-dark":a,"border-bottom":o,"mb-2":n}};function C(a,o){if(1&a&&(e.TgZ(0,"c-card",14),e.TgZ(1,"c-card-body"),e.TgZ(2,"span",15),e.TgZ(3,"span",16),e.TgZ(4,"span",17),e._UZ(5,"app-user-active-switch",18),e.TgZ(6,"span",19),e.TgZ(7,"a",20),e._uU(8),e.qZA(),e.YNc(9,M,2,1,"span",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"span",22),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){const n=o.$implicit,t=o.last;e.Q6J("ngClass",e.kEZ(6,w,!n.enabled,!t,t)),e.xp6(5),e.Q6J("user",n),e.xp6(2),e.s9C("routerLink",n.id),e.xp6(1),e.Oqu(n.username),e.xp6(1),e.Q6J("ngIf",n.fullName),e.xp6(2),e.Oqu(n.branchName)}}function q(a,o){if(1&a&&e.YNc(0,C,12,10,"c-card",13),2&a){const n=e.oxw();e.Q6J("ngForOf",n.page.items)}}function I(a,o){if(1&a){const n=e.EpF();e.TgZ(0,"pagination",23),e.NdJ("ngModelChange",function(c){return e.CHM(n),e.oxw().page.number=c})("pageChanged",function(c){return e.CHM(n),e.oxw().onPageChange(c)}),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("totalItems",n.page.total)("ngModel",n.page.number)("itemsPerPage",n.page.size)}}let y=(()=>{class a{constructor(n){this.amService=n,this.page=new f.T,this.form=new i.cw({search:new i.NI(null,i.kI.required)}),this.isLoading=!1}ngOnInit(){this.loadManagers()}loadManagers(n){var t=this;return(0,p.Z)(function*(){t.isLoading=!0,yield t.amService.filter(n).forEach(c=>t.page=c).finally(()=>t.isLoading=!1)})()}filter(){this.form.valid?this.loadManagers(this.form.value):this.loadManagers()}onPageChange(n){this.form.valid?(Object.assign(n,this.form.value),this.loadManagers(n)):this.loadManagers({number:n.page})}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(d.b))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-manager-list"]],decls:22,vars:4,consts:[[1,"mb-4"],[1,""],[1,"float-end"],["cButton","","color","primary","routerLink","register"],[3,"formGroup","ngSubmit"],["cFormFloating",""],["cFormControl","","formControlName","search","name","search","type","search","placeholder","Search by username, email or name","autofocus",""],["cLabel","","for","search"],[1,"mt-3"],[4,"ngIf","ngIfElse"],["showResult",""],[3,"totalItems","ngModel","itemsPerPage","ngModelChange","pageChanged",4,"ngIf"],["aria-hidden","true","label","Loading..."],["class","border-0 hover-bg-light",3,"ngClass",4,"ngFor","ngForOf"],[1,"border-0","hover-bg-light",3,"ngClass"],[1,"d-flex","justify-content-md-between","flex-md-row","flex-column"],[1,"flex-md-grow-1"],[1,"d-flex","gap-2"],[3,"user"],[1,"d-flex","flex-column","flex-sm-row","gap-2"],[1,"d-flex","text-decoration-none","text-body","fw-bold",3,"routerLink"],[4,"ngIf"],[1,"d-flex","text-end","fw-semibold"],[3,"totalItems","ngModel","itemsPerPage","ngModelChange","pageChanged"]],template:function(n,t){if(1&n&&(e.TgZ(0,"c-card",0),e.TgZ(1,"c-card-body"),e.TgZ(2,"c-row"),e.TgZ(3,"c-col",1),e.TgZ(4,"span",2),e.TgZ(5,"button",3),e._uU(6,"Register New Manager"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"c-card",0),e.TgZ(8,"c-card-body"),e.TgZ(9,"c-row"),e.TgZ(10,"c-col"),e.TgZ(11,"form",4),e.NdJ("ngSubmit",function(){return t.filter()}),e.TgZ(12,"div",5),e._UZ(13,"input",6),e.TgZ(14,"label",7),e._uU(15,"Search by username, email or name"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"c-row",8),e.TgZ(17,"c-col",1),e.YNc(18,x,3,0,"c-card",9),e.YNc(19,q,1,1,"ng-template",null,10,e.W1O),e.YNc(21,I,1,3,"pagination",11),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const c=e.MAs(20);e.xp6(11),e.Q6J("formGroup",t.form),e.xp6(7),e.Q6J("ngIf",t.isLoading)("ngIfElse",c),e.xp6(3),e.Q6J("ngIf",t.page&&t.page.items&&t.page.items.length>0)}},directives:[r.AkF,r.yue,r.iok,r.Yp0,r.Hq3,g.rH,i._Y,i.JL,i.sg,r.xPZ,r.oHf,i.Fj,i.JJ,i.u,r.eFW,m.O5,r.ORR,m.sg,m.mk,Z.H,g.yS,_.Qt,i.On],styles:[""]}),a})();var h=s(9337),J=s(3087),L=s(704),U=s(9998),T=s(1569);function F(a,o){if(1&a&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.Oqu(n.alert.message)}}function N(a,o){if(1&a&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.hij("Note: by default password will be same as username: ",n.form.controls.username.value,"")}}let B=(()=>{class a{constructor(n,t,c,l){this.amService=n,this.router=t,this.alertService=c,this.location=l,this.form=new i.cw({username:new i.NI(null,[i.kI.required]),password:new i.NI(null),confirmPassword:new i.NI(null)}),this.isLoading=!1,this.alert=new h.b,this.form.addValidators(J.o)}ngOnInit(){}onSubmit(){var n=this;return(0,p.Z)(function*(){n.form.valid&&(n.alertService.hideAlert(n.alert),n.isLoading=!0,n.amService.register(n.form.value).forEach(t=>{console.log(t),t&&(n.alertService.showAlert(n.alert,"Manager Registered","New Manager has been registered","success"),n.router.navigate(["admin","manager",t.id]))}).catch(t=>{"ER_DUP_ENTRY"==t.code?n.form.controls.username.setErrors({else:"Username not available"}):n.alertService.showAlert(n.alert,t.code,t.message)}).finally(()=>n.isLoading=!1))})()}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(d.b),e.Y36(g.F0),e.Y36(L.c),e.Y36(m.Ye))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-manager-register-form"]],decls:38,vars:13,consts:[[1,"justify-content-center"],["md","8"],[1,"mb-4"],[3,"color","visible","dismissible","visibleChange"],["cAlertHeading",""],["class","m-0",4,"ngIf"],["cForm","",3,"formGroup","ngSubmit"],[3,"disabled"],["cFormFloating","",1,"mb-3"],["formControlName","username","cFormControl","","id","username","placeholder","enter your username or email","autofocus","",3,"valid"],["cLabel","","id","username"],[3,"control"],["formControlName","password","cFormControl","","id","password","placeholder","password","type","password"],["cLabel","","id","password"],["formControlName","confirmPassword","cFormControl","","id","confirmPassword","placeholder","confirmPassword","type","password"],["cLabel","","id","confirmPassword"],[4,"ngIf"],[1,"d-flex","d-grid","gap-2","float-end"],["cButton","","type","button","color","light",3,"click"],["xcButton","","loadingLabel","Registering...","type","submit","color","primary",3,"loading"],[1,"m-0"]],template:function(n,t){1&n&&(e.TgZ(0,"c-row",0),e.TgZ(1,"c-col",1),e.TgZ(2,"c-card",2),e.TgZ(3,"c-card-body"),e.TgZ(4,"c-alert",3),e.NdJ("visibleChange",function(l){return t.alert.visible=l}),e.TgZ(5,"h6",4),e._uU(6),e.qZA(),e.YNc(7,F,2,1,"p",5),e.qZA(),e.TgZ(8,"form",6),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(9,"fieldset",7),e.TgZ(10,"c-row"),e.TgZ(11,"c-col"),e.TgZ(12,"div",8),e._UZ(13,"input",9),e.TgZ(14,"label",10),e._uU(15,"Username"),e.qZA(),e._UZ(16,"app-input-error",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"c-row"),e.TgZ(18,"c-col"),e.TgZ(19,"div",8),e._UZ(20,"input",12),e.TgZ(21,"label",13),e._uU(22,"Password"),e.qZA(),e._UZ(23,"app-input-error",11),e.qZA(),e.qZA(),e.TgZ(24,"c-col"),e.TgZ(25,"div",8),e._UZ(26,"input",14),e.TgZ(27,"label",15),e._uU(28,"Confirm Password"),e.qZA(),e._UZ(29,"app-input-error",11),e.qZA(),e.qZA(),e.qZA(),e.YNc(30,N,2,1,"p",16),e.TgZ(31,"c-row"),e.TgZ(32,"c-col"),e.TgZ(33,"span",17),e.TgZ(34,"button",18),e.NdJ("click",function(){return t.location.back()}),e._uU(35," Cancel "),e.qZA(),e.TgZ(36,"button",19),e._uU(37," Register "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(4),e.Q6J("color",t.alert.type)("visible",t.alert.visible)("dismissible",!0),e.xp6(2),e.Oqu(t.alert.title),e.xp6(1),e.Q6J("ngIf",t.alert.message),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("disabled",t.isLoading),e.xp6(4),e.Q6J("valid",t.form.controls.username.valid),e.xp6(3),e.Q6J("control",t.form.controls.username),e.xp6(7),e.Q6J("control",t.form.controls.password),e.xp6(6),e.Q6J("control",t.form),e.xp6(1),e.Q6J("ngIf",!t.form.controls.password.value),e.xp6(6),e.Q6J("loading",t.isLoading))},directives:[r.iok,r.Yp0,r.AkF,r.yue,r.wxo,r.bqr,m.O5,i._Y,i.JL,r.$_X,i.sg,r.xPZ,i.Fj,r.oHf,i.JJ,i.u,r.eFW,U.w,r.Hq3,T.L],styles:[""]}),a})();var E=s(936),S=s(2244);class Q extends S.n{}var Y=s(9663),O=s(4541);function R(a,o){1&a&&(e.TgZ(0,"c-row",2),e.TgZ(1,"c-col",3),e._UZ(2,"c-spinner",4),e.TgZ(3,"span",5),e._uU(4," Loading... "),e.qZA(),e.qZA(),e.qZA())}const P=function(a){return["../../branch",a]};function V(a,o){if(1&a&&(e.TgZ(0,"span"),e.TgZ(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"a",17),e._uU(4),e.qZA(),e.qZA()),2&a){const n=e.oxw(3);e.xp6(2),e.hij(" ",n.manager.branch.name," "),e.xp6(1),e.Q6J("routerLink",e.VKq(3,P,n.manager.branchId)),e.xp6(1),e.hij(" ",n.manager.branch.code," ")}}function j(a,o){1&a&&e._uU(0,"N/A")}const H=function(a){return[a,"salespersons"]};function z(a,o){if(1&a&&(e.TgZ(0,"span"),e._UZ(1,"hr"),e.TgZ(2,"a",18),e._uU(3," Salesperson "),e.TgZ(4,"c-badge",19),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&a){const n=e.oxw(3);e.xp6(2),e.Q6J("routerLink",e.VKq(2,H,n.manager.branchId)),e.xp6(3),e.Oqu(n.manager.salespersons.length)}}function X(a,o){if(1&a){const n=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"span",12),e.YNc(2,V,5,5,"span",13),e.YNc(3,j,1,0,"ng-template",null,14,e.W1O),e.YNc(5,z,6,4,"span",15),e.qZA(),e.TgZ(6,"span"),e.TgZ(7,"button",16),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).editBranch()}),e._uU(8,"Edit"),e.qZA(),e.qZA(),e.qZA()}if(2&a){const n=e.MAs(4),t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.manager.branchId&&t.manager.branch&&t.manager.branch)("ngIfElse",n),e.xp6(3),e.Q6J("ngIf",t.manager.salespersons)}}function k(a,o){if(1&a&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&a){const n=o.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.code)}}function W(a,o){if(1&a){const n=e.EpF();e.TgZ(0,"span"),e.TgZ(1,"select",26),e.NdJ("ngModelChange",function(c){return e.CHM(n),e.oxw(3).selectedBranchId=c}),e.TgZ(2,"option",27),e._uU(3,"None"),e.qZA(),e.YNc(4,k,2,2,"option",28),e.qZA(),e.qZA()}if(2&a){const n=e.oxw(3);e.xp6(1),e.Q6J("ngModel",n.selectedBranchId),e.xp6(3),e.Q6J("ngForOf",n.branchPage.items)}}function G(a,o){1&a&&e._UZ(0,"c-spinner",4)}function $(a,o){if(1&a){const n=e.EpF();e.TgZ(0,"form",20),e.NdJ("ngSubmit",function(){return e.CHM(n),e.oxw(2).saveBranch()}),e.TgZ(1,"fieldset",21),e.TgZ(2,"c-row"),e.TgZ(3,"c-col"),e.YNc(4,W,5,2,"span",13),e.YNc(5,G,1,0,"ng-template",null,22,e.W1O),e.qZA(),e.TgZ(7,"c-col",23),e.TgZ(8,"span",24),e.TgZ(9,"button",16),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).cancelEditBranch()}),e._uU(10,"Cancel"),e.qZA(),e.TgZ(11,"button",25),e._uU(12," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){const n=e.MAs(6),t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.savingBranch),e.xp6(3),e.Q6J("ngIf",!t.branchLoading)("ngIfElse",n),e.xp6(7),e.Q6J("loading",t.savingBranch)}}function D(a,o){if(1&a&&(e.TgZ(0,"c-row",2),e.TgZ(1,"c-col",6),e.TgZ(2,"c-row"),e.TgZ(3,"c-col"),e.TgZ(4,"h4"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"c-col",7),e._UZ(7,"app-user-active-switch",8),e.qZA(),e.qZA(),e._UZ(8,"app-user-profile",8),e.TgZ(9,"h4"),e._uU(10,"Branch"),e.qZA(),e.TgZ(11,"c-card"),e.TgZ(12,"c-card-body"),e.YNc(13,X,9,3,"div",9),e.YNc(14,$,13,4,"ng-template",null,10,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){const n=e.MAs(15),t=e.oxw();e.xp6(5),e.hij("@",t.manager.username,""),e.xp6(2),e.Q6J("user",t.manager),e.xp6(1),e.Q6J("user",t.manager),e.xp6(5),e.Q6J("ngIf",!t.isEditBranch)("ngIfElse",n)}}const K=[{path:"",component:(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-manager"]],decls:1,vars:0,template:function(n,t){1&n&&e._UZ(0,"router-outlet")},directives:[g.lC],styles:[""]}),a})(),data:{title:"Manager"},children:[{path:"",component:y,data:{title:"List"}},{path:"register",component:B,data:{title:"Register"}},{path:":id",component:(()=>{class a{constructor(n,t,c,l){this.route=n,this.router=t,this.amService=c,this.abService=l,this.manager=new Q,this.isLoading=!1,this.isEditBranch=!1,this.selectedBranchId=null,this.branchPage=new f.T,this.branchLoading=!1,this.savingBranch=!1,this.alert=new h.b;let A=this.route.snapshot.params.id;A&&(this.manager.id=A)}ngOnInit(){var n=this;return(0,p.Z)(function*(){n.manager.id&&(n.isLoading=!0,yield n.amService.get(n.manager.id).forEach(t=>n.manager=t).finally(()=>n.isLoading=!1))})()}loadBranch(){this.branchLoading=!0,this.abService.available().forEach(n=>this.branchPage=n).finally(()=>this.branchLoading=!1)}editBranch(){this.branchPage&&0==this.branchPage.items.length&&this.loadBranch(),this.isEditBranch=!0}cancelEditBranch(){this.isEditBranch=!1,this.selectedBranchId=null}saveBranch(){var n=this;return(0,p.Z)(function*(){n.selectedBranchId&&n.manager.id&&(n.savingBranch=!0,yield n.abService.updateManager(n.selectedBranchId,{managerId:n.manager.id}).forEach(t=>{n.manager.branchId=t.id,n.manager.branch=new E.I,Object.assign(n.manager.branch,t),n.isEditBranch=!1,n.loadBranch()}).catch(t=>console.log(t)).finally(()=>{n.selectedBranchId=null,n.savingBranch=!1}))})()}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(g.gz),e.Y36(g.F0),e.Y36(d.b),e.Y36(Y.b))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-manager-view"]],decls:3,vars:2,consts:[["class","justify-content-center",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"justify-content-center"],["md","8",1,""],["size","sm"],[1,"d-flex-inline","my-auto"],["md","8"],["xs","1"],[3,"user"],["class","d-flex justify-content-between",4,"ngIf","ngIfElse"],["branchForm",""],[1,"d-flex","justify-content-between"],[1,"flex-grow-1"],[4,"ngIf","ngIfElse"],["na",""],[4,"ngIf"],["cButton","","color","light","size","sm",3,"click"],["cButton","","color","light","size","sm",3,"routerLink"],["cButton","","color","light",3,"routerLink"],["shape","rounded-pill","color","success"],[3,"ngSubmit"],[3,"disabled"],["loader",""],["xs","4"],[1,"d-flex","d-grid","gap-2","float-end"],["xcButton","","loadingLabel","Saving...","type","submit",3,"loading"],["cSelect","","name","branch",3,"ngModel","ngModelChange"],["value","null"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,t){if(1&n&&(e.YNc(0,R,5,0,"c-row",0),e.YNc(1,D,16,5,"ng-template",null,1,e.W1O)),2&n){const c=e.MAs(2);e.Q6J("ngIf",t.isLoading)("ngIfElse",c)}},directives:[m.O5,r.iok,r.Yp0,r.ORR,Z.H,O.M,r.AkF,r.yue,r.Hq3,g.yS,r.FN3,i._Y,i.JL,i.F,T.L,r.nqR,i.EJ,i.JJ,i.On,i.YN,i.Kr,m.sg],styles:[""]}),a})(),data:{title:"View"}},{path:":id/:branchId/salespersons",component:b.X,data:{title:"Salespersons"}}]}];let ee=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[g.Bz.forChild(K)],g.Bz]}),a})();var ne=s(1728),v=s(520),ae=s(4466);const te=[r.dTQ,r.hJ1,r.ejP,r.zE6,r.U$I,r.Fme,r.nMh,ne.QX,r.TXv],oe=[ae.m,i.u5,i.UX,_.u3.forRoot(),v.JF,v.Ed];let re=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[m.ez,ee,...te,...oe]]}),a})()}}]);