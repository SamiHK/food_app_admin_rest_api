"use strict";(self.webpackChunkfoodapp=self.webpackChunkfoodapp||[]).push([[882],{6882:(z,Z,a)=>{a.r(Z),a.d(Z,{SalespersonModule:()=>K});var p=a(9808),m=a(3477),u=a(5861),i=a(2382),S=a(5705),e=a(4893),g=a(262),A=a(2340),C=a(520),q=a(3093);let d=(()=>{class o{constructor(t,n){this.http=t,this.commonService=n,this.BASE_URL=`${A.N.BASE_URL}/manager/salesperson`}get(t){return this.http.get(`${this.BASE_URL}/${t}`).pipe((0,g.K)(this.commonService.catchError))}available(t){return this.http.get(`${this.BASE_URL}/available`,{params:t}).pipe((0,g.K)(this.commonService.catchError))}filter(t){return this.http.get(`${this.BASE_URL}`,{params:t}).pipe((0,g.K)(this.commonService.catchError))}register(t){return this.http.post(`${this.BASE_URL}`,t).pipe((0,g.K)(this.commonService.catchError))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(C.eN),e.LFG(q.v))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var s=a(5033),h=a(6939),T=a(9553);function w(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",11),e._UZ(2,"c-spinner",12),e.qZA(),e.qZA())}const L=function(o){return{"table-dark":o}},f=function(o){return[o]};function U(o,r){if(1&o&&(e.TgZ(0,"tr",15),e.TgZ(1,"td"),e._UZ(2,"app-user-active-switch",16),e.qZA(),e.TgZ(3,"td",17),e._uU(4),e.qZA(),e.TgZ(5,"td",17),e._uU(6),e.qZA(),e.TgZ(7,"td",17),e._uU(8),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.Q6J("ngClass",e.VKq(8,L,!t.enabled)),e.xp6(2),e.Q6J("user",t),e.xp6(1),e.Q6J("routerLink",e.VKq(10,f,t.id)),e.xp6(1),e.Oqu(t.username),e.xp6(1),e.Q6J("routerLink",e.VKq(12,f,t.id)),e.xp6(1),e.Oqu(t.email),e.xp6(1),e.Q6J("routerLink",e.VKq(14,f,t.id)),e.xp6(1),e.Oqu(t.fullName)}}function y(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",18),e._uU(2," Empty "),e.qZA(),e.qZA())}function b(o,r){if(1&o&&(e.YNc(0,U,9,16,"tr",13),e.YNc(1,y,3,0,"tr",14)),2&o){const t=e.oxw();e.Q6J("ngForOf",t.page.items),e.xp6(1),e.Q6J("ngIf",0==t.page.items.length)}}let _=(()=>{class o{constructor(t){this.mspService=t,this.page=new S.T,this.form=new i.cw({search:new i.NI(null,i.kI.required)}),this.isLoading=!1}ngOnInit(){this.loadManagers()}loadManagers(t){var n=this;return(0,u.Z)(function*(){n.isLoading=!0,yield n.mspService.filter(t).forEach(l=>n.page=l).finally(()=>n.isLoading=!1)})()}filter(){this.form.valid?this.loadManagers(this.form.value):this.loadManagers()}onPageChange(t){this.form.valid?(Object.assign(t,this.form.value),this.loadManagers(t)):this.loadManagers({number:t.page})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-salesperson-list"]],decls:33,vars:5,consts:[[1,"mb-4"],[1,"text-right"],["cButton","","color","primary","routerLink","register"],[3,"formGroup","ngSubmit"],["cFormFloating",""],["cFormControl","","formControlName","search","name","search","type","search","placeholder","Search by username, email or name","autofocus",""],["cLabel","","for","search"],["cTable","","hover",""],[4,"ngIf","ngIfElse"],["showResult",""],[3,"totalItems","ngModel","ngModelChange","pageChanged"],["colspan","4",1,"text-center","my-2"],["aria-hidden","true","label","Loading..."],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass"],[3,"user"],[3,"routerLink"],["colspan","4",1,"text-center"]],template:function(t,n){if(1&t&&(e.TgZ(0,"c-card",0),e.TgZ(1,"c-card-body"),e.TgZ(2,"c-row"),e.TgZ(3,"c-col",1),e.TgZ(4,"button",2),e._uU(5,"Register New Salesperson"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"c-card",0),e.TgZ(7,"c-card-body"),e.TgZ(8,"c-row"),e.TgZ(9,"c-col"),e.TgZ(10,"form",3),e.NdJ("ngSubmit",function(){return n.filter()}),e.TgZ(11,"div",4),e._UZ(12,"input",5),e.TgZ(13,"label",6),e._uU(14,"Search by username, email or name"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(15,"hr"),e.TgZ(16,"c-row"),e.TgZ(17,"c-col"),e.TgZ(18,"table",7),e.TgZ(19,"thead"),e.TgZ(20,"tr"),e._UZ(21,"th"),e.TgZ(22,"th"),e._uU(23,"Username"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Email"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Full name"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"tbody"),e.YNc(29,w,3,0,"tr",8),e.YNc(30,b,2,2,"ng-template",null,9,e.W1O),e.qZA(),e.qZA(),e.TgZ(32,"pagination",10),e.NdJ("ngModelChange",function(c){return n.page.number=c})("pageChanged",function(c){return n.onPageChange(c)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const l=e.MAs(31);e.xp6(10),e.Q6J("formGroup",n.form),e.xp6(19),e.Q6J("ngIf",n.isLoading)("ngIfElse",l),e.xp6(3),e.Q6J("totalItems",n.page.total)("ngModel",n.page.number)}},directives:[s.AkF,s.yue,s.iok,s.Yp0,s.Hq3,m.rH,i._Y,i.JL,i.sg,s.xPZ,s.oHf,i.Fj,i.JJ,i.u,s.eFW,s.auY,p.O5,h.Qt,i.On,s.ORR,p.sg,p.mk,T.H],styles:[""]}),o})();var v=a(9337),J=a(3087),x=a(704),R=a(9998),F=a(1569);function I(o,r){if(1&o&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.alert.message)}}function N(o,r){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij("Note: by default password will be same as username: ",t.form.controls.username.value,"")}}let E=(()=>{class o{constructor(t,n,l,c){this.mspService=t,this.router=n,this.alertService=l,this.location=c,this.form=new i.cw({username:new i.NI(null,[i.kI.required]),password:new i.NI(null),confirmPassword:new i.NI(null)}),this.isLoading=!1,this.alert=new v.b,this.form.addValidators(J.o)}ngOnInit(){}onSubmit(){var t=this;return(0,u.Z)(function*(){t.form.valid&&(t.alertService.hideAlert(t.alert),t.isLoading=!0,t.mspService.register(t.form.value).forEach(n=>{console.log(n),n&&(t.alertService.showAlert(t.alert,"Salesperson Registered","New Salesperson has been registered","success"),t.router.navigate(["salesperson",n.id]))}).catch(n=>{"ER_DUP_ENTRY"==n.code?t.form.controls.username.setErrors({else:"Username not available"}):t.alertService.showAlert(t.alert,n.code,n.message)}).finally(()=>t.isLoading=!1))})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d),e.Y36(m.F0),e.Y36(x.c),e.Y36(p.Ye))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-salesperson-register"]],decls:38,vars:13,consts:[[1,"justify-content-center"],["md","8"],[1,"mb-4"],[3,"color","visible","dismissible","visibleChange"],["cAlertHeading",""],["class","m-0",4,"ngIf"],["cForm","",3,"formGroup","ngSubmit"],[3,"disabled"],["cFormFloating","",1,"mb-3"],["formControlName","username","cFormControl","","id","username","placeholder","enter your username or email","autofocus","",3,"valid"],["cLabel","","id","username"],[3,"control"],["formControlName","password","cFormControl","","id","password","placeholder","password","type","password"],["cLabel","","id","password"],["formControlName","confirmPassword","cFormControl","","id","confirmPassword","placeholder","confirmPassword","type","password"],["cLabel","","id","confirmPassword"],[4,"ngIf"],[1,"float-end"],["xcButton","","type","button","color","light",1,"mr-2",3,"click"],["xcButton","","loadingLabel","Registering...","type","submit","color","primary",3,"loading"],[1,"m-0"]],template:function(t,n){1&t&&(e.TgZ(0,"c-row",0),e.TgZ(1,"c-col",1),e.TgZ(2,"c-card",2),e.TgZ(3,"c-card-body"),e.TgZ(4,"c-alert",3),e.NdJ("visibleChange",function(c){return n.alert.visible=c}),e.TgZ(5,"h6",4),e._uU(6),e.qZA(),e.YNc(7,I,2,1,"p",5),e.qZA(),e.TgZ(8,"form",6),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(9,"fieldset",7),e.TgZ(10,"c-row"),e.TgZ(11,"c-col"),e.TgZ(12,"div",8),e._UZ(13,"input",9),e.TgZ(14,"label",10),e._uU(15,"Username"),e.qZA(),e._UZ(16,"app-input-error",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"c-row"),e.TgZ(18,"c-col"),e.TgZ(19,"div",8),e._UZ(20,"input",12),e.TgZ(21,"label",13),e._uU(22,"Password"),e.qZA(),e._UZ(23,"app-input-error",11),e.qZA(),e.qZA(),e.TgZ(24,"c-col"),e.TgZ(25,"div",8),e._UZ(26,"input",14),e.TgZ(27,"label",15),e._uU(28,"Confirm Password"),e.qZA(),e._UZ(29,"app-input-error",11),e.qZA(),e.qZA(),e.qZA(),e.YNc(30,N,2,1,"p",16),e.TgZ(31,"c-row"),e.TgZ(32,"c-col"),e.TgZ(33,"span",17),e.TgZ(34,"button",18),e.NdJ("click",function(){return n.location.back()}),e._uU(35," Cancel "),e.qZA(),e.TgZ(36,"button",19),e._uU(37," Register "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("color",n.alert.type)("visible",n.alert.visible)("dismissible",!0),e.xp6(2),e.Oqu(n.alert.title),e.xp6(1),e.Q6J("ngIf",n.alert.message),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(1),e.Q6J("disabled",n.isLoading),e.xp6(4),e.Q6J("valid",n.form.controls.username.valid),e.xp6(3),e.Q6J("control",n.form.controls.username),e.xp6(7),e.Q6J("control",n.form.controls.password),e.xp6(6),e.Q6J("control",n.form),e.xp6(1),e.Q6J("ngIf",!n.form.controls.password.value),e.xp6(6),e.Q6J("loading",n.isLoading))},directives:[s.iok,s.Yp0,s.AkF,s.yue,s.wxo,s.bqr,p.O5,i._Y,i.JL,s.$_X,i.sg,s.xPZ,i.Fj,s.oHf,i.JJ,i.u,s.eFW,R.w,F.L],styles:[""]}),o})();var M=a(2244);class O extends M.n{}var Q=a(632);function Y(o,r){1&o&&(e.TgZ(0,"c-row",2),e.TgZ(1,"c-col",2),e._UZ(2,"c-spinner",3),e.TgZ(3,"span",4),e._uU(4," Loading... "),e.qZA(),e.qZA(),e.qZA())}function B(o,r){if(1&o&&(e.TgZ(0,"c-row",5),e.TgZ(1,"c-col",6),e.TgZ(2,"c-row"),e.TgZ(3,"c-col"),e.TgZ(4,"h4"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"c-col",7),e._UZ(7,"app-user-active-switch",8),e.qZA(),e.qZA(),e._UZ(8,"app-user-profile",8),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(5),e.hij("@",t.salesperson.username,""),e.xp6(2),e.Q6J("user",t.salesperson),e.xp6(1),e.Q6J("user",t.salesperson)}}const P=[{path:"",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-salesperson"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[m.lC],styles:[""]}),o})(),data:{title:"Salesperson"},children:[{path:"",component:_,data:{title:"Search"}},{path:"register",component:E,data:{title:"Register"}},{path:":id",component:(()=>{class o{constructor(t,n,l){this.route=t,this.router=n,this.amService=l,this.salesperson=new O,this.isLoading=!1,this.isEditBranch=!1,this.selectedBranchId=null,this.branchLoading=!1,this.alert=new v.b;let c=this.route.snapshot.params.id;c&&(this.salesperson.id=c)}ngOnInit(){var t=this;return(0,u.Z)(function*(){t.salesperson.id&&(t.isLoading=!0,yield t.amService.get(t.salesperson.id).forEach(n=>t.salesperson=n).finally(()=>t.isLoading=!1))})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.gz),e.Y36(m.F0),e.Y36(d))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-salesperson-view"]],decls:3,vars:2,consts:[["class","",4,"ngIf","ngIfElse"],["elseBlock",""],[1,""],["size","sm"],[1,"d-flex-inline","my-auto"],[1,"justify-content-center"],["md","8"],["xs","1"],[3,"user"]],template:function(t,n){if(1&t&&(e.YNc(0,Y,5,0,"c-row",0),e.YNc(1,B,9,3,"ng-template",null,1,e.W1O)),2&t){const l=e.MAs(2);e.Q6J("ngIf",n.isLoading)("ngIfElse",l)}},directives:[p.O5,s.iok,s.Yp0,s.ORR,T.H,Q.M],styles:[""]}),o})(),data:{title:"Detail"}}]}];let V=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[m.Bz.forChild(P)],m.Bz]}),o})();var j=a(4466);const $=[s.zE6,s.dTQ,s.hJ1,s.ejP,s.Fme,s.nMh,s.U$I],G=[h.u3.forRoot()];let K=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,j.m,V,i.UX,i.u5,...$,...G]]}),o})()}}]);