"use strict";(self.webpackChunkfoodapp=self.webpackChunkfoodapp||[]).push([[720],{384:(Z,d,o)=>{o.d(d,{e:()=>c});var t=o(262),_=o(2340),m=o(4893),u=o(520),e=o(5450);let c=(()=>{class p{constructor(l,s){this.http=l,this.commonService=s,this.BASE_URL=`${_.N.API_BASE_URL}/auth`}login(l){return this.http.post(`${this.BASE_URL}/login`,l).pipe((0,t.K)(this.commonService.catchError))}register(l){return this.http.post(`${this.BASE_URL}/register`,l).pipe((0,t.K)(this.commonService.catchError))}forgetPassword(l){return this.http.post(`${this.BASE_URL}/forget/password`,l).pipe((0,t.K)(this.commonService.catchError))}resetPassword(l,s){return this.http.post(`${this.BASE_URL}/reset/password/${l}`,s).pipe((0,t.K)(this.commonService.catchError))}updatePassword(l,s){return this.http.post(`${this.BASE_URL}/${l}/password`,s).pipe((0,t.K)(this.commonService.catchError))}enabled(l,s){return this.http.get(`${this.BASE_URL}/${l}/enabled/`,{params:s}).pipe((0,t.K)(this.commonService.catchError))}}return p.\u0275fac=function(l){return new(l||p)(m.LFG(u.eN),m.LFG(e.v))},p.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},9337:(Z,d,o)=>{o.d(d,{b:()=>t});class t{constructor(){this.type="error",this.visible=!1,this.title="",this.message=""}}},5705:(Z,d,o)=>{o.d(d,{T:()=>t});class t{constructor(){this.number=1,this.size=0,this.total=0,this.items=[]}}},3071:(Z,d,o)=>{o.d(d,{K:()=>c});var t=o(262),_=o(2340),m=o(4893),u=o(520),e=o(5450);let c=(()=>{class p{constructor(l,s){this.http=l,this.commonService=s,this.BASE_URL=`${_.N.API_BASE_URL}/user`}updateEmail(l,s){return this.http.post(`${this.BASE_URL}/${l}/email`,s).pipe((0,t.K)(this.commonService.catchError))}getAddress(){return this.http.get(`${this.BASE_URL}/addresses`).pipe((0,t.K)(this.commonService.catchError))}saveAddress(l){return this.http.post(`${this.BASE_URL}/addresses`,l).pipe((0,t.K)(this.commonService.catchError))}}return p.\u0275fac=function(l){return new(l||p)(m.LFG(u.eN),m.LFG(e.v))},p.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},9998:(Z,d,o)=>{o.d(d,{w:()=>l});var t=o(4893),_=o(9808);function m(s,f){1&s&&(t.TgZ(0,"p",2),t._uU(1,"this field is required"),t.qZA())}function u(s,f){1&s&&(t.TgZ(0,"p",2),t._uU(1,"invalid email"),t.qZA())}function e(s,f){if(1&s&&(t.TgZ(0,"p",2),t._uU(1),t.qZA()),2&s){const i=t.oxw(2);t.xp6(1),t.hij("min ",i.control.errors.minlength.requiredLength," characters are required")}}function c(s,f){if(1&s&&(t.TgZ(0,"p",2),t._uU(1),t.qZA()),2&s){const i=t.oxw(2);t.xp6(1),t.hij("max ",i.control.errors.maxlength.requiredLength," characters are required")}}function p(s,f){if(1&s&&(t.TgZ(0,"p",2),t._uU(1),t.qZA()),2&s){const i=t.oxw(2);t.xp6(1),t.Oqu(i.control.errors.else)}}function E(s,f){if(1&s&&(t.YNc(0,m,2,0,"p",1),t.YNc(1,u,2,0,"p",1),t.YNc(2,e,2,1,"p",1),t.YNc(3,c,2,1,"p",1),t.YNc(4,p,2,1,"p",1)),2&s){const i=t.oxw();t.Q6J("ngIf",i.control.errors.required),t.xp6(1),t.Q6J("ngIf",i.control.errors.email),t.xp6(1),t.Q6J("ngIf",i.control.errors.minlength),t.xp6(1),t.Q6J("ngIf",i.control.errors.maxlength),t.xp6(1),t.Q6J("ngIf",i.control.errors.else)}}let l=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-input-error"]],inputs:{control:"control"},decls:1,vars:1,consts:[[3,"ngIf"],["class","m-0 text-danger",4,"ngIf"],[1,"m-0","text-danger"]],template:function(i,A){1&i&&t.YNc(0,E,5,5,"ng-template",0),2&i&&t.Q6J("ngIf",A.control&&A.control.invalid&&(A.control.dirty||A.control.touched)&&A.control.errors)},directives:[_.O5],styles:[""]}),s})()},9553:(Z,d,o)=>{o.d(d,{H:()=>l});var t=o(4893),_=o(384),m=o(9808),u=o(5033),e=o(2382);function c(s,f){1&s&&t._UZ(0,"c-spinner",2)}function p(s,f){if(1&s){const i=t.EpF();t.TgZ(0,"c-form-check",4),t.TgZ(1,"input",5),t.NdJ("ngModelChange",function(v){return t.CHM(i),t.oxw(2).user.enabled=v})("change",function(v){return t.CHM(i),t.oxw(2).onChange(v)}),t.qZA(),t.TgZ(2,"label",6),t._uU(3),t.qZA(),t.qZA()}if(2&s){const i=t.oxw(2);t.Q6J("switch",!0),t.xp6(1),t.Q6J("ngModel",i.user.enabled),t.xp6(2),t.Oqu(i.label)}}function E(s,f){if(1&s&&t.YNc(0,p,4,3,"c-form-check",3),2&s){const i=t.oxw();t.Q6J("ngIf",i.user)}}let l=(()=>{class s{constructor(i){this.authService=i,this.isLoading=!1}ngOnInit(){}onChange(i){this.user&&this.user.id&&(this.isLoading=!0,this.authService.enabled(this.user.id,{enabled:this.user.enabled}).forEach(A=>{this.user&&(this.user.enabled=A.enabled)}).finally(()=>{this.isLoading=!1}))}}return s.\u0275fac=function(i){return new(i||s)(t.Y36(_.e))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-user-active-switch"]],inputs:{label:"label",user:"user"},decls:3,vars:2,consts:[["size","sm",4,"ngIf","ngIfElse"],["elseBlock",""],["size","sm"],["class","d-flex justify-content-center",3,"switch",4,"ngIf"],[1,"d-flex","justify-content-center",3,"switch"],["cFormCheckInput","","type","checkbox",1,"me-0",3,"ngModel","ngModelChange","change"],["cFormCheckLabel",""]],template:function(i,A){if(1&i&&(t.YNc(0,c,1,0,"c-spinner",0),t.YNc(1,E,1,1,"ng-template",null,1,t.W1O)),2&i){const v=t.MAs(2);t.Q6J("ngIf",A.isLoading)("ngIfElse",v)}},directives:[m.O5,u.ORR,u.FzQ,u.yfq,e.Wl,e.JJ,e.On,u.NWu],styles:[""]}),s})()},4541:(Z,d,o)=>{o.d(d,{M:()=>y});var t=o(2382),_=o(9337),m=o(2244),u=o(3087),e=o(4893),c=o(384),p=o(3071),E=o(262),l=o(2340),s=o(520),f=o(5450);let i=(()=>{class n{constructor(r,a){this.http=r,this.commonService=a,this.BASE_URL=`${l.N.API_BASE_URL}/profile`}update(r,a){return this.http.post(`${this.BASE_URL}/${r}`,a).pipe((0,E.K)(this.commonService.catchError))}}return n.\u0275fac=function(r){return new(r||n)(e.LFG(s.eN),e.LFG(f.v))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var A=o(704),v=o(5033),x=o(9808),T=o(1569),P=o(9998);function w(n,g){if(1&n&&(e.TgZ(0,"p",9),e._uU(1),e.qZA()),2&n){const r=e.oxw();e.xp6(1),e.Oqu(r.alert.message)}}function C(n,g){if(1&n&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&n){const r=e.oxw(2);e.xp6(1),e.Oqu(r.user.fullName)}}function F(n,g){1&n&&(e.TgZ(0,"strong"),e._uU(1,"N/A"),e.qZA())}function S(n,g){if(1&n){const r=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"span"),e.TgZ(2,"small",11),e._uU(3,"Full name"),e.qZA(),e.YNc(4,C,2,1,"strong",12),e.YNc(5,F,2,0,"ng-template",null,13,e.W1O),e.qZA(),e.TgZ(7,"span"),e.TgZ(8,"button",14),e.NdJ("click",function(){return e.CHM(r),e.oxw().editProfile()}),e._uU(9,"Edit"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const r=e.MAs(6),a=e.oxw();e.xp6(4),e.Q6J("ngIf",a.user.fullName)("ngIfElse",r)}}function I(n,g){if(1&n){const r=e.EpF();e.TgZ(0,"c-col"),e.TgZ(1,"form",15),e.NdJ("ngSubmit",function(){return e.CHM(r),e.oxw().saveProfile()}),e.TgZ(2,"fieldset",16),e.TgZ(3,"c-row"),e.TgZ(4,"c-col",17),e.TgZ(5,"div",18),e._UZ(6,"input",19),e._UZ(7,"input",20),e.qZA(),e.qZA(),e.TgZ(8,"c-col",21),e.TgZ(9,"span",22),e.TgZ(10,"button",23),e.NdJ("click",function(){return e.CHM(r),e.oxw().cancelEditProfile()}),e._uU(11,"Cancel"),e.qZA(),e.TgZ(12,"button",24),e._uU(13," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const r=e.oxw();e.xp6(1),e.Q6J("formGroup",r.profileForm),e.xp6(1),e.Q6J("disabled",r.savingProfile),e.xp6(10),e.Q6J("loading",r.savingProfile)}}function L(n,g){if(1&n){const r=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"span"),e.TgZ(2,"small",11),e._uU(3,"Email"),e.qZA(),e.TgZ(4,"strong"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"span"),e.TgZ(7,"button",14),e.NdJ("click",function(){return e.CHM(r),e.oxw().editUser()}),e._uU(8,"Edit"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const r=e.oxw();e.xp6(5),e.Oqu(r.user.email)}}function N(n,g){if(1&n){const r=e.EpF();e.TgZ(0,"c-col"),e.TgZ(1,"form",15),e.NdJ("ngSubmit",function(){return e.CHM(r),e.oxw().saveUser()}),e.TgZ(2,"fieldset",16),e.TgZ(3,"c-row"),e.TgZ(4,"c-col",17),e.TgZ(5,"div"),e._UZ(6,"input",25),e._UZ(7,"app-input-error",26),e.qZA(),e.qZA(),e.TgZ(8,"c-col",21),e.TgZ(9,"span",22),e.TgZ(10,"button",23),e.NdJ("click",function(){return e.CHM(r),e.oxw().cancelEditUser()}),e._uU(11,"Cancel"),e.qZA(),e.TgZ(12,"button",24),e._uU(13," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const r=e.oxw();e.xp6(1),e.Q6J("formGroup",r.userForm),e.xp6(1),e.Q6J("disabled",r.savingUser),e.xp6(4),e.Q6J("valid",r.userForm.controls.email.valid),e.xp6(1),e.Q6J("control",r.userForm.controls.email),e.xp6(5),e.Q6J("loading",r.savingUser)}}function M(n,g){if(1&n&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&n){const r=e.oxw(2);e.xp6(1),e.Oqu(r.user.lastPasswordUpdate)}}function O(n,g){1&n&&(e.TgZ(0,"strong"),e._uU(1,"Not updated"),e.qZA())}function b(n,g){if(1&n&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&n){const r=e.oxw(2);e.xp6(1),e.Oqu(r.user.lastLogin)}}function q(n,g){1&n&&(e.TgZ(0,"strong"),e._uU(1,"Not logged in"),e.qZA())}function J(n,g){if(1&n){const r=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"span",27),e.TgZ(2,"small",11),e._uU(3,"Password update"),e.qZA(),e.YNc(4,M,2,1,"strong",12),e.YNc(5,O,2,0,"ng-template",null,28,e.W1O),e.TgZ(7,"span"),e.TgZ(8,"small",11),e._uU(9,"Last login"),e.qZA(),e.YNc(10,b,2,1,"strong",12),e.YNc(11,q,2,0,"ng-template",null,29,e.W1O),e.qZA(),e.qZA(),e.TgZ(13,"span"),e.TgZ(14,"button",14),e.NdJ("click",function(){return e.CHM(r),e.oxw().editUpdatePassword()}),e._uU(15,"Change Password"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const r=e.MAs(6),a=e.MAs(12),h=e.oxw();e.xp6(4),e.Q6J("ngIf",h.user.lastPasswordUpdate)("ngIfElse",r),e.xp6(6),e.Q6J("ngIf",h.user.lastLogin)("ngIfElse",a)}}function B(n,g){if(1&n){const r=e.EpF();e.TgZ(0,"form",15),e.NdJ("ngSubmit",function(){return e.CHM(r),e.oxw().updatePassword()}),e.TgZ(1,"fieldset",16),e.TgZ(2,"c-row"),e.TgZ(3,"c-col",17),e.TgZ(4,"div",18),e._UZ(5,"input",30),e._UZ(6,"input",31),e.qZA(),e._UZ(7,"app-input-error",26),e.qZA(),e.TgZ(8,"c-col",21),e.TgZ(9,"span",22),e.TgZ(10,"button",23),e.NdJ("click",function(){return e.CHM(r),e.oxw().cancelUpdatePassword()}),e._uU(11,"Cancel"),e.qZA(),e.TgZ(12,"button",24),e._uU(13," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const r=e.oxw();e.Q6J("formGroup",r.passwordForm),e.xp6(1),e.Q6J("disabled",r.updatingPassword),e.xp6(4),e.Q6J("valid",r.passwordForm.controls.password.valid),e.xp6(1),e.Q6J("valid",r.passwordForm.valid),e.xp6(1),e.Q6J("control",r.passwordForm),e.xp6(5),e.Q6J("loading",r.updatingPassword)}}let y=(()=>{class n{constructor(r,a,h,U){this.authService=r,this.userService=a,this.profileService=h,this.alertService=U,this.user=new m.n,this.alert=new _.b,this.userForm=new t.cw({email:new t.NI(null,[t.kI.required,t.kI.email])}),this.isEditUser=!1,this.savingUser=!1,this.profileForm=new t.cw({firstName:new t.NI(null),lastName:new t.NI(null)}),this.isEditProfile=!1,this.savingProfile=!1,this.passwordForm=new t.cw({password:new t.NI(null,t.kI.required),confirmPassword:new t.NI(null)},u.o),this.isUpdatePassword=!1,this.updatingPassword=!1}ngOnInit(){}editUser(){this.userForm.controls.email.setValue(this.user.email),this.isEditUser=!0}cancelEditUser(){this.isEditUser=!1,this.userForm.reset()}saveUser(){this.userForm.valid&&(this.savingUser=!0,this.userService.updateEmail(this.user.id,this.userForm.value).forEach(r=>{r&&r.error?this.alertService.showAlert(this.alert,r.error.code,r.error.message):(this.alertService.showSuccessAlert(this.alert,"Email has been updated"),this.user.email=r.email)}).then(r=>{this.isEditUser=!1,this.userForm.reset()}).catch(r=>{"ER_DUP_ENTRY"==r.code?this.userForm.controls.email.setErrors({else:"email already registered. try another one"}):this.alertService.showErrorAlert(this.alert,r)}).finally(()=>{this.savingUser=!1}))}editProfile(){this.profileForm.controls.firstName.setValue(this.user.firstName),this.profileForm.controls.lastName.setValue(this.user.lastName),this.isEditProfile=!0}cancelEditProfile(){this.isEditProfile=!1,this.profileForm.reset()}saveProfile(){this.savingProfile=!0,this.profileService.update(this.user.id,this.profileForm.value).forEach(r=>{r&&r.error?this.alertService.showAlert(this.alert,r.error.code,r.error.message):(this.alertService.showSuccessAlert(this.alert,"Profile has been updated"),Object.assign(this.user,r))}).catch(r=>{this.alertService.showErrorAlert(this.alert,r)}).finally(()=>{this.isEditProfile=!1,this.savingProfile=!1,this.profileForm.reset()})}editUpdatePassword(){this.isUpdatePassword=!0}cancelUpdatePassword(){this.isUpdatePassword=!1,this.passwordForm.reset()}updatePassword(){this.passwordForm.valid&&(this.updatingPassword=!0,this.authService.updatePassword(this.user.id,this.passwordForm.value).forEach(r=>{r&&(Object.assign(this.user,r),this.alertService.showSuccessAlert(this.alert,"Password has been updated"),this.isUpdatePassword=!1,this.passwordForm.reset())}).catch(r=>{this.alertService.showErrorAlert(this.alert,r)}).finally(()=>{this.updatingPassword=!1}))}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(c.e),e.Y36(p.K),e.Y36(i),e.Y36(A.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-profile"]],inputs:{user:"user"},decls:19,vars:11,consts:[[1,"mb-4"],[3,"color","visible","dismissible","visibleChange"],["cAlertHeading",""],["class","m-0",4,"ngIf"],[1,"mb-3"],[3,"ngIf","ngIfElse"],["editProfileForm",""],["editUserForm",""],["editUpdatePasswordForm",""],[1,"m-0"],[1,"d-flex","justify-content-between"],[1,"d-flex"],[4,"ngIf","ngIfElse"],["na",""],["cButton","","size","sm","color","light",1,"float-end",3,"click"],[3,"formGroup","ngSubmit"],[3,"disabled"],["sm","8"],[1,"d-grid","gap-2","d-flex"],["cFormControl","","formControlName","firstName","name","firstName","placeholder","First Name","type","text"],["cFormControl","","formControlName","lastName","name","lastName","placeholder","Last Name","type","text"],["sm","4"],[1,"d-flex","d-grid","gap-2","float-end"],["cButton","","type","button","color","light",3,"click"],["xcButton","","loadingLabel","Saving...","type","submit",3,"loading"],["cFormControl","","formControlName","email","name","email","placeholder","Email","type","email",3,"valid"],[3,"control"],[1,"d-flex","flex-column"],["notUpdated",""],["notLoggedIn",""],["cFormControl","","formControlName","password","name","password","placeholder","Password","type","password",3,"valid"],["cFormControl","","formControlName","confirmPassword","name","confirmPassword","placeholder","Confirm Password","type","password",3,"valid"]],template:function(r,a){if(1&r&&(e.TgZ(0,"c-card",0),e.TgZ(1,"c-card-body"),e.TgZ(2,"c-alert",1),e.NdJ("visibleChange",function(U){return a.alert.visible=U}),e.TgZ(3,"h6",2),e._uU(4),e.qZA(),e.YNc(5,w,2,1,"p",3),e.qZA(),e.TgZ(6,"c-row",4),e.YNc(7,S,10,2,"ng-template",5),e.YNc(8,I,14,3,"ng-template",null,6,e.W1O),e.qZA(),e._UZ(10,"hr"),e.TgZ(11,"c-row"),e.YNc(12,L,9,1,"ng-template",5),e.YNc(13,N,14,5,"ng-template",null,7,e.W1O),e.qZA(),e._UZ(15,"hr"),e.YNc(16,J,16,4,"ng-template",5),e.YNc(17,B,14,6,"ng-template",null,8,e.W1O),e.qZA(),e.qZA()),2&r){const h=e.MAs(9),U=e.MAs(14),D=e.MAs(18);e.xp6(2),e.Q6J("color",a.alert.type)("visible",a.alert.visible)("dismissible",!0),e.xp6(2),e.Oqu(a.alert.title),e.xp6(1),e.Q6J("ngIf",a.alert.message),e.xp6(2),e.Q6J("ngIf",!a.isEditProfile)("ngIfElse",h),e.xp6(5),e.Q6J("ngIf",!a.isEditUser)("ngIfElse",U),e.xp6(4),e.Q6J("ngIf",!a.isUpdatePassword)("ngIfElse",D)}},directives:[v.AkF,v.yue,v.wxo,v.bqr,x.O5,v.iok,v.Hq3,v.Yp0,t._Y,t.JL,t.sg,v.oHf,t.Fj,t.JJ,t.u,T.L,P.w],styles:[""]}),n})()},1569:(Z,d,o)=>{o.d(d,{L:()=>m});var t=o(5033),_=o(4893);let m=(()=>{class u extends t.Hq3{constructor(c){super(),this.el=c,this._loadingLabel="",this._loading=!1}get loadingLabel(){return this._loadingLabel}set loadingLabel(c){this._loadingLabel=c}get loading(){return this._loading}set loading(c){this._loading=c,this.content||(this.content=this.el.nativeElement.innerHTML),this.el.nativeElement.innerHTML=this._loading?`<span class="spinner-border spinner-border-sm ng-star-inserted"></span> ${this.loadingLabel}`:this.content}}return u.\u0275fac=function(c){return new(c||u)(_.Y36(_.SBq))},u.\u0275dir=_.lG2({type:u,selectors:[["","xcButton",""]],inputs:{loadingLabel:"loadingLabel",loading:"loading"},exportAs:["xcButton"],features:[_.qOj]}),u})()},3087:(Z,d,o)=>{o.d(d,{o:()=>t});const t=_=>(_.value.password||_.value.confirmPassword)&&_.value.password!==_.value.confirmPassword?{else:"Password not match"}:null},704:(Z,d,o)=>{o.d(d,{c:()=>_});var t=o(4893);let _=(()=>{class m{constructor(){}hideAlert(e){e.title="",e.message="",e.type="",e.visible=!1}showAlert(e,c,p,E="danger"){e.title=c,e.message=p,e.type=E,e.visible=!0}showErrorAlert(e,c){this.showAlert(e,c.name,c.message)}showSuccessAlert(e,c){this.showAlert(e,"SUCCESS",c,"success")}}return m.\u0275fac=function(e){return new(e||m)},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()}}]);