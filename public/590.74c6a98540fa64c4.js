"use strict";(self.webpackChunkfoodapp=self.webpackChunkfoodapp||[]).push([[590],{5705:(Z,g,o)=>{o.d(g,{T:()=>r});class r{constructor(){this.number=1,this.size=0,this.total=0,this.items=[]}}},2244:(Z,g,o)=>{o.d(g,{n:()=>l});class l extends class{}{constructor(){super(...arguments),this.id="",this._enabled=!1}get enabled(){return this._enabled}set enabled(m){this._enabled=1==m}}},9553:(Z,g,o)=>{o.d(g,{H:()=>w});var r=o(4893),l=o(384),p=o(9808),m=o(5033),e=o(2382);function a(u,f){1&u&&r._UZ(0,"c-spinner",2)}function v(u,f){if(1&u){const c=r.EpF();r.TgZ(0,"c-form-check",4),r.TgZ(1,"input",5),r.NdJ("ngModelChange",function(d){return r.CHM(c),r.oxw(2).user.enabled=d})("change",function(d){return r.CHM(c),r.oxw(2).onChange(d)}),r.qZA(),r.TgZ(2,"label",6),r._uU(3),r.qZA(),r.qZA()}if(2&u){const c=r.oxw(2);r.Q6J("switch",!0),r.xp6(1),r.Q6J("ngModel",c.user.enabled),r.xp6(2),r.Oqu(c.label)}}function U(u,f){if(1&u&&r.YNc(0,v,4,3,"c-form-check",3),2&u){const c=r.oxw();r.Q6J("ngIf",c.user)}}let w=(()=>{class u{constructor(c){this.authService=c,this.isLoading=!1}ngOnInit(){}onChange(c){this.user&&this.user.id&&(this.isLoading=!0,this.authService.enabled(this.user.id,{enabled:this.user.enabled}).forEach(h=>{this.user&&(this.user.enabled=h.enabled)}).finally(()=>{this.isLoading=!1}))}}return u.\u0275fac=function(c){return new(c||u)(r.Y36(l.e))},u.\u0275cmp=r.Xpm({type:u,selectors:[["app-user-active-switch"]],inputs:{label:"label",user:"user"},decls:3,vars:2,consts:[["size","sm",4,"ngIf","ngIfElse"],["elseBlock",""],["size","sm"],[3,"switch",4,"ngIf"],[3,"switch"],["cFormCheckInput","","type","checkbox",3,"ngModel","ngModelChange","change"],["cFormCheckLabel",""]],template:function(c,h){if(1&c&&(r.YNc(0,a,1,0,"c-spinner",0),r.YNc(1,U,1,1,"ng-template",null,1,r.W1O)),2&c){const d=r.MAs(2);r.Q6J("ngIf",h.isLoading)("ngIfElse",d)}},directives:[p.O5,m.ORR,m.FzQ,m.yfq,e.Wl,e.JJ,e.On,m.NWu],styles:[""]}),u})()},632:(Z,g,o)=>{o.d(g,{M:()=>Y});var r=o(2382),l=o(9337),p=o(2244),m=o(3087),e=o(4893),a=o(384),v=o(262),U=o(2340),w=o(520),u=o(3093);let f=(()=>{class s{constructor(t,n){this.http=t,this.commonService=n,this.BASE_URL=`${U.N.BASE_URL}/user`}updateEmail(t,n){return this.http.post(`${this.BASE_URL}/${t}/email`,n).pipe((0,v.K)(this.commonService.catchError))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(w.eN),e.LFG(u.v))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),c=(()=>{class s{constructor(t,n){this.http=t,this.commonService=n,this.BASE_URL=`${U.N.BASE_URL}/profile`}update(t,n){return this.http.post(`${this.BASE_URL}/${t}`,n).pipe((0,v.K)(this.commonService.catchError))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(w.eN),e.LFG(u.v))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var h=o(704),d=o(5033),x=o(9808),T=o(1569),P=o(9998);function E(s,i){if(1&s&&(e.TgZ(0,"p",9),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Oqu(t.alert.message)}}function F(s,i){if(1&s&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Oqu(t.user.fullName)}}function C(s,i){1&s&&(e.TgZ(0,"strong"),e._uU(1,"N/A"),e.qZA())}function b(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"c-col"),e.TgZ(1,"small",10),e._uU(2,"Full name"),e.qZA(),e.YNc(3,F,2,1,"strong",11),e.YNc(4,C,2,0,"ng-template",null,12,e.W1O),e.qZA(),e.TgZ(6,"c-col",13),e.TgZ(7,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().editProfile()}),e._uU(8,"Edit"),e.qZA(),e.qZA()}if(2&s){const t=e.MAs(5),n=e.oxw();e.xp6(3),e.Q6J("ngIf",n.user.fullName)("ngIfElse",t)}}function S(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"c-col"),e.TgZ(1,"form",15),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().saveProfile()}),e.TgZ(2,"fieldset",16),e.TgZ(3,"c-row"),e.TgZ(4,"c-col",17),e.TgZ(5,"div",18),e._UZ(6,"input",19),e._UZ(7,"input",20),e.qZA(),e.qZA(),e.TgZ(8,"c-col",21),e.TgZ(9,"span",22),e.TgZ(10,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelEditProfile()}),e._uU(11,"Cancel"),e.qZA(),e.TgZ(12,"button",24),e._uU(13," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.profileForm),e.xp6(1),e.Q6J("disabled",t.savingProfile),e.xp6(10),e.Q6J("loading",t.savingProfile)}}function N(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"c-col"),e.TgZ(1,"small",10),e._uU(2,"Email"),e.qZA(),e.TgZ(3,"strong"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"c-col",13),e.TgZ(6,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().editUser()}),e._uU(7,"Edit"),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.xp6(4),e.Oqu(t.user.email)}}function q(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"c-col"),e.TgZ(1,"form",15),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().saveUser()}),e.TgZ(2,"fieldset",16),e.TgZ(3,"c-row"),e.TgZ(4,"c-col",17),e.TgZ(5,"div"),e._UZ(6,"input",25),e._UZ(7,"app-input-error",26),e.qZA(),e.qZA(),e.TgZ(8,"c-col",21),e.TgZ(9,"span",22),e.TgZ(10,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelEditUser()}),e._uU(11,"Cancel"),e.qZA(),e.TgZ(12,"button",24),e._uU(13," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.userForm),e.xp6(1),e.Q6J("disabled",t.savingUser),e.xp6(4),e.Q6J("valid",t.userForm.controls.email.valid),e.xp6(1),e.Q6J("control",t.userForm.controls.email),e.xp6(5),e.Q6J("loading",t.savingUser)}}function I(s,i){if(1&s&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Oqu(t.user.lastPasswordUpdate)}}function L(s,i){1&s&&(e.TgZ(0,"strong"),e._uU(1,"Not updated"),e.qZA())}function M(s,i){if(1&s&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Oqu(t.user.lastLogin)}}function J(s,i){1&s&&(e.TgZ(0,"strong"),e._uU(1,"Not logged in"),e.qZA())}function O(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"c-row"),e.TgZ(1,"c-col"),e.TgZ(2,"small",10),e._uU(3,"Password update"),e.qZA(),e.YNc(4,I,2,1,"strong",11),e.YNc(5,L,2,0,"ng-template",null,27,e.W1O),e.qZA(),e.TgZ(7,"c-col",28),e.TgZ(8,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().editUpdatePassword()}),e._uU(9,"Change Password"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"c-row"),e.TgZ(11,"c-col"),e.TgZ(12,"small",10),e._uU(13,"Last login"),e.qZA(),e.YNc(14,M,2,1,"strong",11),e.YNc(15,J,2,0,"ng-template",null,29,e.W1O),e.qZA(),e.qZA()}if(2&s){const t=e.MAs(6),n=e.MAs(16),_=e.oxw();e.xp6(4),e.Q6J("ngIf",_.user.lastPasswordUpdate)("ngIfElse",t),e.xp6(10),e.Q6J("ngIf",_.user.lastLogin)("ngIfElse",n)}}function y(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"form",15),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().updatePassword()}),e.TgZ(1,"fieldset",16),e.TgZ(2,"c-row"),e.TgZ(3,"c-col",17),e.TgZ(4,"div",18),e._UZ(5,"input",30),e._UZ(6,"input",31),e.qZA(),e._UZ(7,"app-input-error",26),e.qZA(),e.TgZ(8,"c-col",21),e.TgZ(9,"span",22),e.TgZ(10,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelUpdatePassword()}),e._uU(11,"Cancel"),e.qZA(),e.TgZ(12,"button",24),e._uU(13," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formGroup",t.passwordForm),e.xp6(1),e.Q6J("disabled",t.updatingPassword),e.xp6(4),e.Q6J("valid",t.passwordForm.controls.password.valid),e.xp6(1),e.Q6J("valid",t.passwordForm.valid),e.xp6(1),e.Q6J("control",t.passwordForm),e.xp6(5),e.Q6J("loading",t.updatingPassword)}}let Y=(()=>{class s{constructor(t,n,_,A){this.authService=t,this.userService=n,this.profileService=_,this.alertService=A,this.user=new p.n,this.alert=new l.b,this.userForm=new r.cw({email:new r.NI(null,[r.kI.required,r.kI.email])}),this.isEditUser=!1,this.savingUser=!1,this.profileForm=new r.cw({firstName:new r.NI(null),lastName:new r.NI(null)}),this.isEditProfile=!1,this.savingProfile=!1,this.passwordForm=new r.cw({password:new r.NI(null,r.kI.required),confirmPassword:new r.NI(null)},m.o),this.isUpdatePassword=!1,this.updatingPassword=!1}ngOnInit(){}editUser(){this.userForm.controls.email.setValue(this.user.email),this.isEditUser=!0}cancelEditUser(){this.isEditUser=!1,this.userForm.reset()}saveUser(){this.userForm.valid&&(this.savingUser=!0,this.userService.updateEmail(this.user.id,this.userForm.value).forEach(t=>{t&&t.error?this.alertService.showAlert(this.alert,t.error.code,t.error.message):(this.alertService.showSuccessAlert(this.alert,"Email has been updated"),this.user.email=t.email)}).then(t=>{this.isEditUser=!1,this.userForm.reset()}).catch(t=>{"ER_DUP_ENTRY"==t.code?this.userForm.controls.email.setErrors({else:"email already registered. try another one"}):this.alertService.showErrorAlert(this.alert,t)}).finally(()=>{this.savingUser=!1}))}editProfile(){this.profileForm.controls.firstName.setValue(this.user.firstName),this.profileForm.controls.lastName.setValue(this.user.lastName),this.isEditProfile=!0}cancelEditProfile(){this.isEditProfile=!1,this.profileForm.reset()}saveProfile(){this.savingProfile=!0,this.profileService.update(this.user.id,this.profileForm.value).forEach(t=>{t&&t.error?this.alertService.showAlert(this.alert,t.error.code,t.error.message):(this.alertService.showSuccessAlert(this.alert,"Profile has been updated"),Object.assign(this.user,t))}).catch(t=>{this.alertService.showErrorAlert(this.alert,t)}).finally(()=>{this.isEditProfile=!1,this.savingProfile=!1,this.profileForm.reset()})}editUpdatePassword(){this.isUpdatePassword=!0}cancelUpdatePassword(){this.isUpdatePassword=!1,this.passwordForm.reset()}updatePassword(){this.passwordForm.valid&&(this.updatingPassword=!0,this.authService.updatePassword(this.user.id,this.passwordForm.value).forEach(t=>{t&&(Object.assign(this.user,t),this.alertService.showSuccessAlert(this.alert,"Password has been updated"),this.isUpdatePassword=!1,this.passwordForm.reset())}).catch(t=>{this.alertService.showErrorAlert(this.alert,t)}).finally(()=>{this.updatingPassword=!1}))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(a.e),e.Y36(f),e.Y36(c),e.Y36(h.c))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-user-profile"]],inputs:{user:"user"},decls:19,vars:11,consts:[[1,"mb-4"],[3,"color","visible","dismissible","visibleChange"],["cAlertHeading",""],["class","m-0",4,"ngIf"],[1,"mb-3"],[3,"ngIf","ngIfElse"],["editProfileForm",""],["editUserForm",""],["editUpdatePasswordForm",""],[1,"m-0"],[1,"d-flex"],[4,"ngIf","ngIfElse"],["na",""],["xs","1",1,""],["cButton","","size","sm","color","light",1,"float-end",3,"click"],[3,"formGroup","ngSubmit"],[3,"disabled"],["sm","8"],[1,"d-grid","gap-2","d-flex"],["cFormControl","","formControlName","firstName","name","firstName","placeholder","First Name","type","text"],["cFormControl","","formControlName","lastName","name","lastName","placeholder","Last Name","type","text"],["sm","4"],[1,"float-end"],["cButton","","type","button","color","light",3,"click"],["xcButton","","loadingLabel","Saving...","type","submit",1,"ml-2",3,"loading"],["cFormControl","","formControlName","email","name","email","placeholder","Email","type","email",3,"valid"],[3,"control"],["notUpdated",""],["xs","6",1,""],["notLoggedIn",""],["cFormControl","","formControlName","password","name","password","placeholder","Password","type","password",3,"valid"],["cFormControl","","formControlName","confirmPassword","name","confirmPassword","placeholder","Confirm Password","type","password",3,"valid"]],template:function(t,n){if(1&t&&(e.TgZ(0,"c-card",0),e.TgZ(1,"c-card-body"),e.TgZ(2,"c-alert",1),e.NdJ("visibleChange",function(A){return n.alert.visible=A}),e.TgZ(3,"h6",2),e._uU(4),e.qZA(),e.YNc(5,E,2,1,"p",3),e.qZA(),e.TgZ(6,"c-row",4),e.YNc(7,b,9,2,"ng-template",5),e.YNc(8,S,14,3,"ng-template",null,6,e.W1O),e.qZA(),e._UZ(10,"hr"),e.TgZ(11,"c-row"),e.YNc(12,N,8,1,"ng-template",5),e.YNc(13,q,14,5,"ng-template",null,7,e.W1O),e.qZA(),e._UZ(15,"hr"),e.YNc(16,O,17,4,"ng-template",5),e.YNc(17,y,14,6,"ng-template",null,8,e.W1O),e.qZA(),e.qZA()),2&t){const _=e.MAs(9),A=e.MAs(14),Q=e.MAs(18);e.xp6(2),e.Q6J("color",n.alert.type)("visible",n.alert.visible)("dismissible",!0),e.xp6(2),e.Oqu(n.alert.title),e.xp6(1),e.Q6J("ngIf",n.alert.message),e.xp6(2),e.Q6J("ngIf",!n.isEditProfile)("ngIfElse",_),e.xp6(5),e.Q6J("ngIf",!n.isEditUser)("ngIfElse",A),e.xp6(4),e.Q6J("ngIf",!n.isUpdatePassword)("ngIfElse",Q)}},directives:[d.AkF,d.yue,d.wxo,d.bqr,x.O5,d.iok,d.Yp0,d.Hq3,r._Y,r.JL,r.sg,d.oHf,r.Fj,r.JJ,r.u,T.L,P.w],styles:[""]}),s})()},1569:(Z,g,o)=>{o.d(g,{L:()=>p});var r=o(5033),l=o(4893);let p=(()=>{class m extends r.Hq3{constructor(a){super(),this.el=a,this._loadingLabel="",this._loading=!1}get loadingLabel(){return this._loadingLabel}set loadingLabel(a){this._loadingLabel=a}get loading(){return this._loading}set loading(a){this._loading=a,this.content||(this.content=this.el.nativeElement.innerHTML),this.el.nativeElement.innerHTML=this._loading?`<span class="spinner-border spinner-border-sm ng-star-inserted"></span> ${this.loadingLabel}`:this.content}}return m.\u0275fac=function(a){return new(a||m)(l.Y36(l.SBq))},m.\u0275dir=l.lG2({type:m,selectors:[["","xcButton",""]],inputs:{loadingLabel:"loadingLabel",loading:"loading"},exportAs:["xcButton"],features:[l.qOj]}),m})()},3087:(Z,g,o)=>{o.d(g,{o:()=>r});const r=l=>(l.value.password||l.value.confirmPassword)&&l.value.password!==l.value.confirmPassword?{else:"Password not match"}:null},704:(Z,g,o)=>{o.d(g,{c:()=>l});var r=o(4893);let l=(()=>{class p{constructor(){}hideAlert(e){e.title="",e.message="",e.type="",e.visible=!1}showAlert(e,a,v,U="danger"){e.title=a,e.message=v,e.type=U,e.visible=!0}showErrorAlert(e,a){this.showAlert(e,a.name,a.message)}showSuccessAlert(e,a){this.showAlert(e,"SUCCESS",a,"success")}}return p.\u0275fac=function(e){return new(e||p)},p.\u0275prov=r.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);