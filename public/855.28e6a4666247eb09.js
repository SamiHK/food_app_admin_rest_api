"use strict";(self.webpackChunkfoodapp=self.webpackChunkfoodapp||[]).push([[855],{8429:(G,h,a)=>{a.r(h),a.d(h,{SalespersonModule:()=>z});var p=a(9808),m=a(3477),u=a(5861),i=a(2382),A=a(5705),e=a(4893),g=a(262),C=a(2340),d=a(520),q=a(3093);let f=(()=>{class t{constructor(o,n){this.http=o,this.commonService=n,this.BASE_URL=`${C.N.BASE_URL}/manager/salesperson`}get(o){return this.http.get(`${this.BASE_URL}/${o}`).pipe((0,g.K)(this.commonService.catchError))}available(o){return this.http.get(`${this.BASE_URL}/available`,{params:o}).pipe((0,g.K)(this.commonService.catchError))}filter(o){return this.http.get(`${this.BASE_URL}`,{params:o}).pipe((0,g.K)(this.commonService.catchError))}register(o){return this.http.post(`${this.BASE_URL}`,o).pipe((0,g.K)(this.commonService.catchError))}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(d.eN),e.LFG(q.v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var s=a(5033),T=a(6939),v=a(9553);function w(t,r){1&t&&(e.TgZ(0,"tr"),e.TgZ(1,"td",12),e._UZ(2,"c-spinner",13),e.qZA(),e.qZA())}const L=function(t){return{"table-dark":t}},Z=function(t){return[t]};function U(t,r){if(1&t&&(e.TgZ(0,"tr",16),e.TgZ(1,"td"),e._UZ(2,"app-user-active-switch",17),e.qZA(),e.TgZ(3,"td",18),e._uU(4),e.qZA(),e.TgZ(5,"td",18),e._uU(6),e.qZA(),e.TgZ(7,"td",18),e._uU(8),e.qZA(),e.qZA()),2&t){const o=r.$implicit;e.Q6J("ngClass",e.VKq(8,L,!o.enabled)),e.xp6(2),e.Q6J("user",o),e.xp6(1),e.Q6J("routerLink",e.VKq(10,Z,o.id)),e.xp6(1),e.Oqu(o.username),e.xp6(1),e.Q6J("routerLink",e.VKq(12,Z,o.id)),e.xp6(1),e.Oqu(o.email),e.xp6(1),e.Q6J("routerLink",e.VKq(14,Z,o.id)),e.xp6(1),e.Oqu(o.fullName)}}function y(t,r){1&t&&(e.TgZ(0,"tr"),e.TgZ(1,"td",19),e._uU(2," Empty "),e.qZA(),e.qZA())}function b(t,r){if(1&t&&(e.YNc(0,U,9,16,"tr",14),e.YNc(1,y,3,0,"tr",15)),2&t){const o=e.oxw();e.Q6J("ngForOf",o.page.items),e.xp6(1),e.Q6J("ngIf",0==o.page.items.length)}}let _=(()=>{class t{constructor(o){this.mspService=o,this.page=new A.T,this.form=new i.cw({search:new i.NI(null,i.kI.required)}),this.isLoading=!1}ngOnInit(){this.loadManagers()}loadManagers(o){var n=this;return(0,u.Z)(function*(){n.isLoading=!0,yield n.mspService.filter(o).forEach(l=>n.page=l).finally(()=>n.isLoading=!1)})()}filter(){this.form.valid?this.loadManagers(this.form.value):this.loadManagers()}onPageChange(o){this.form.valid?(Object.assign(o,this.form.value),this.loadManagers(o)):this.loadManagers({number:o.page})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(f))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-salesperson-list"]],decls:34,vars:5,consts:[[1,"mb-4"],[1,""],[1,"float-end"],["cButton","","color","primary","routerLink","register"],[3,"formGroup","ngSubmit"],["cFormFloating",""],["cFormControl","","formControlName","search","name","search","type","search","placeholder","Search by username, email or name","autofocus",""],["cLabel","","for","search"],["cTable","","hover",""],[4,"ngIf","ngIfElse"],["showResult",""],[3,"totalItems","ngModel","ngModelChange","pageChanged"],["colspan","4",1,"text-center","my-2"],["aria-hidden","true","label","Loading..."],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass"],[3,"user"],[3,"routerLink"],["colspan","4",1,"text-center"]],template:function(o,n){if(1&o&&(e.TgZ(0,"c-card",0),e.TgZ(1,"c-card-body"),e.TgZ(2,"c-row"),e.TgZ(3,"c-col",1),e.TgZ(4,"span",2),e.TgZ(5,"button",3),e._uU(6,"Register New Salesperson"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"c-card",0),e.TgZ(8,"c-card-body"),e.TgZ(9,"c-row"),e.TgZ(10,"c-col"),e.TgZ(11,"form",4),e.NdJ("ngSubmit",function(){return n.filter()}),e.TgZ(12,"div",5),e._UZ(13,"input",6),e.TgZ(14,"label",7),e._uU(15,"Search by username, email or name"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(16,"hr"),e.TgZ(17,"c-row"),e.TgZ(18,"c-col"),e.TgZ(19,"table",8),e.TgZ(20,"thead"),e.TgZ(21,"tr"),e._UZ(22,"th"),e.TgZ(23,"th"),e._uU(24,"Username"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Email"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Full name"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"tbody"),e.YNc(30,w,3,0,"tr",9),e.YNc(31,b,2,2,"ng-template",null,10,e.W1O),e.qZA(),e.qZA(),e.TgZ(33,"pagination",11),e.NdJ("ngModelChange",function(c){return n.page.number=c})("pageChanged",function(c){return n.onPageChange(c)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const l=e.MAs(32);e.xp6(11),e.Q6J("formGroup",n.form),e.xp6(19),e.Q6J("ngIf",n.isLoading)("ngIfElse",l),e.xp6(3),e.Q6J("totalItems",n.page.total)("ngModel",n.page.number)}},directives:[s.AkF,s.yue,s.iok,s.Yp0,s.Hq3,m.rH,i._Y,i.JL,i.sg,s.xPZ,s.oHf,i.Fj,i.JJ,i.u,s.eFW,s.auY,p.O5,T.Qt,i.On,s.ORR,p.sg,p.mk,v.H],styles:[""]}),t})();var S=a(9337),J=a(3087),x=a(704),R=a(9998),F=a(1569);function E(t,r){if(1&t&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Oqu(o.alert.message)}}function I(t,r){if(1&t&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.hij("Note: by default password will be same as username: ",o.form.controls.username.value,"")}}let N=(()=>{class t{constructor(o,n,l,c){this.mspService=o,this.router=n,this.alertService=l,this.location=c,this.form=new i.cw({username:new i.NI(null,[i.kI.required]),password:new i.NI(null),confirmPassword:new i.NI(null)}),this.isLoading=!1,this.alert=new S.b,this.form.addValidators(J.o)}ngOnInit(){}onSubmit(){var o=this;return(0,u.Z)(function*(){o.form.valid&&(o.alertService.hideAlert(o.alert),o.isLoading=!0,o.mspService.register(o.form.value).forEach(n=>{console.log(n),n&&(o.alertService.showAlert(o.alert,"Salesperson Registered","New Salesperson has been registered","success"),o.router.navigate(["manager","salesperson",n.id]))}).catch(n=>{"ER_DUP_ENTRY"==n.code?o.form.controls.username.setErrors({else:"Username not available"}):o.alertService.showAlert(o.alert,n.code,n.message)}).finally(()=>o.isLoading=!1))})()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(f),e.Y36(m.F0),e.Y36(x.c),e.Y36(p.Ye))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-salesperson-register"]],decls:38,vars:13,consts:[[1,"justify-content-center"],["md","8"],[1,"mb-4"],[3,"color","visible","dismissible","visibleChange"],["cAlertHeading",""],["class","m-0",4,"ngIf"],["cForm","",3,"formGroup","ngSubmit"],[3,"disabled"],["cFormFloating","",1,"mb-3"],["formControlName","username","cFormControl","","id","username","placeholder","enter your username or email","autofocus","",3,"valid"],["cLabel","","id","username"],[3,"control"],["formControlName","password","cFormControl","","id","password","placeholder","password","type","password"],["cLabel","","id","password"],["formControlName","confirmPassword","cFormControl","","id","confirmPassword","placeholder","confirmPassword","type","password"],["cLabel","","id","confirmPassword"],[4,"ngIf"],[1,"d-flex","d-grid","gap-2","float-end"],["xcButton","","type","button","color","light",3,"click"],["xcButton","","loadingLabel","Registering...","type","submit","color","primary",3,"loading"],[1,"m-0"]],template:function(o,n){1&o&&(e.TgZ(0,"c-row",0),e.TgZ(1,"c-col",1),e.TgZ(2,"c-card",2),e.TgZ(3,"c-card-body"),e.TgZ(4,"c-alert",3),e.NdJ("visibleChange",function(c){return n.alert.visible=c}),e.TgZ(5,"h6",4),e._uU(6),e.qZA(),e.YNc(7,E,2,1,"p",5),e.qZA(),e.TgZ(8,"form",6),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(9,"fieldset",7),e.TgZ(10,"c-row"),e.TgZ(11,"c-col"),e.TgZ(12,"div",8),e._UZ(13,"input",9),e.TgZ(14,"label",10),e._uU(15,"Username"),e.qZA(),e._UZ(16,"app-input-error",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"c-row"),e.TgZ(18,"c-col"),e.TgZ(19,"div",8),e._UZ(20,"input",12),e.TgZ(21,"label",13),e._uU(22,"Password"),e.qZA(),e._UZ(23,"app-input-error",11),e.qZA(),e.qZA(),e.TgZ(24,"c-col"),e.TgZ(25,"div",8),e._UZ(26,"input",14),e.TgZ(27,"label",15),e._uU(28,"Confirm Password"),e.qZA(),e._UZ(29,"app-input-error",11),e.qZA(),e.qZA(),e.qZA(),e.YNc(30,I,2,1,"p",16),e.TgZ(31,"c-row"),e.TgZ(32,"c-col"),e.TgZ(33,"span",17),e.TgZ(34,"button",18),e.NdJ("click",function(){return n.location.back()}),e._uU(35," Cancel "),e.qZA(),e.TgZ(36,"button",19),e._uU(37," Register "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(4),e.Q6J("color",n.alert.type)("visible",n.alert.visible)("dismissible",!0),e.xp6(2),e.Oqu(n.alert.title),e.xp6(1),e.Q6J("ngIf",n.alert.message),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(1),e.Q6J("disabled",n.isLoading),e.xp6(4),e.Q6J("valid",n.form.controls.username.valid),e.xp6(3),e.Q6J("control",n.form.controls.username),e.xp6(7),e.Q6J("control",n.form.controls.password),e.xp6(6),e.Q6J("control",n.form),e.xp6(1),e.Q6J("ngIf",!n.form.controls.password.value),e.xp6(6),e.Q6J("loading",n.isLoading))},directives:[s.iok,s.Yp0,s.AkF,s.yue,s.wxo,s.bqr,p.O5,i._Y,i.JL,s.$_X,i.sg,s.xPZ,i.Fj,s.oHf,i.JJ,i.u,s.eFW,R.w,F.L],styles:[""]}),t})();var Q=a(2244);class Y extends Q.n{}var M=a(632);function O(t,r){1&t&&(e.TgZ(0,"c-row",2),e.TgZ(1,"c-col",2),e._UZ(2,"c-spinner",3),e.TgZ(3,"span",4),e._uU(4," Loading... "),e.qZA(),e.qZA(),e.qZA())}function B(t,r){if(1&t&&(e.TgZ(0,"c-row",5),e.TgZ(1,"c-col",6),e.TgZ(2,"c-row"),e.TgZ(3,"c-col"),e.TgZ(4,"h4"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"c-col",7),e._UZ(7,"app-user-active-switch",8),e.qZA(),e.qZA(),e._UZ(8,"app-user-profile",8),e.qZA(),e.qZA()),2&t){const o=e.oxw();e.xp6(5),e.hij("@",o.salesperson.username,""),e.xp6(2),e.Q6J("user",o.salesperson),e.xp6(1),e.Q6J("user",o.salesperson)}}const P=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-salesperson"]],decls:1,vars:0,template:function(o,n){1&o&&e._UZ(0,"router-outlet")},directives:[m.lC],styles:[""]}),t})(),data:{title:"Salesperson"},children:[{path:"",component:_,data:{title:"List"}},{path:"register",component:N,data:{title:"Register"}},{path:":id",component:(()=>{class t{constructor(o,n,l){this.route=o,this.router=n,this.amService=l,this.salesperson=new Y,this.isLoading=!1,this.isEditBranch=!1,this.selectedBranchId=null,this.branchLoading=!1,this.alert=new S.b;let c=this.route.snapshot.params.id;c&&(this.salesperson.id=c)}ngOnInit(){var o=this;return(0,u.Z)(function*(){o.salesperson.id&&(o.isLoading=!0,yield o.amService.get(o.salesperson.id).forEach(n=>o.salesperson=n).finally(()=>o.isLoading=!1))})()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(m.gz),e.Y36(m.F0),e.Y36(f))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-salesperson-view"]],decls:3,vars:2,consts:[["class","",4,"ngIf","ngIfElse"],["elseBlock",""],[1,""],["size","sm"],[1,"d-flex-inline","my-auto"],[1,"justify-content-center"],["md","8"],["xs","1"],[3,"user"]],template:function(o,n){if(1&o&&(e.YNc(0,O,5,0,"c-row",0),e.YNc(1,B,9,3,"ng-template",null,1,e.W1O)),2&o){const l=e.MAs(2);e.Q6J("ngIf",n.isLoading)("ngIfElse",l)}},directives:[p.O5,s.iok,s.Yp0,s.ORR,v.H,M.M],styles:[""]}),t})(),data:{title:"View"}}]}];let V=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.Bz.forChild(P)],m.Bz]}),t})();var j=a(4466),$=a(1728);const K=[s.dTQ,s.hJ1,s.ejP,s.zE6,s.U$I,s.Fme,s.nMh,$.QX,s.TXv],X=[j.m,i.u5,i.UX,T.u3.forRoot(),d.JF,d.Ed];let z=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.ez,V,...K,...X]]}),t})()}}]);