"use strict";(self.webpackChunkfoodapp=self.webpackChunkfoodapp||[]).push([[937],{1937:(re,h,c)=>{c.r(h),c.d(h,{MenuModule:()=>se});var u=c(9808),l=c(3477),m=c(5861),e=c(4893),d=c(262),v=c(2340),A=c(520),C=c(5450);let _=(()=>{class n{constructor(t,i){this.http=t,this.commonService=i,this.BASE_URL=`${v.N.BASE_URL}/manager/menu`}menus(t){return this.http.get(`${this.BASE_URL}`,{params:t}).pipe((0,d.K)(this.commonService.catchError))}menuItems(t){return this.http.get(`${this.BASE_URL}/${t}/item`).pipe((0,d.K)(this.commonService.catchError))}menuAvailability(t){return this.http.post(`${this.BASE_URL}/availability`,t).pipe((0,d.K)(this.commonService.catchError))}menuSorting(t){return this.http.post(`${this.BASE_URL}/sorting`,t).pipe((0,d.K)(this.commonService.catchError))}menuItemsSorting(t){return this.http.post(`${this.BASE_URL}/item/sorting`,t).pipe((0,d.K)(this.commonService.catchError))}menuItemAvailability(t){return this.http.post(`${this.BASE_URL}/item/availability`,t).pipe((0,d.K)(this.commonService.catchError))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(A.eN),e.LFG(C.v))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var s=c(5033),g=c(8333),Z=c(8426);function I(n,a){1&n&&(e.TgZ(0,"c-row"),e.TgZ(1,"c-col"),e._UZ(2,"c-spinner",2),e._uU(3," Loading... "),e.qZA(),e.qZA())}function x(n,a){if(1&n&&(e.TgZ(0,"c-badge",10),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.totalItems,"")}}const T=function(n){return{"bg-secondary":n}},L=function(n){return["../",n]};function y(n,a){if(1&n&&(e.TgZ(0,"a",7),e.TgZ(1,"span"),e.TgZ(2,"h6",8),e._uU(3),e.qZA(),e.qZA(),e.YNc(4,x,2,1,"c-badge",9),e.qZA()),2&n){const t=a.$implicit;e.Q6J("ngClass",e.VKq(4,T,!t.isAvailable))("routerLink",e.VKq(6,L,t.id)),e.xp6(3),e.Oqu(t.title),e.xp6(1),e.Q6J("ngIf",t.totalItems)}}function b(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ul",5),e.NdJ("dragulaModelChange",function(o){return e.CHM(t),e.oxw(2).menus=o}),e.YNc(1,y,5,8,"a",6),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("dragulaModel",t.menus),e.xp6(1),e.Q6J("ngForOf",t.menus)}}function q(n,a){1&n&&e._uU(0," Empty Menu ")}function S(n,a){if(1&n&&(e.TgZ(0,"perfect-scrollbar"),e.YNc(1,b,2,2,"ul",3),e.YNc(2,q,1,0,"ng-template",null,4,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.menus.length>0)("ngIfElse",t)}}let E=(()=>{class n{constructor(t,i){this.dragulaService=t,this.mService=i,this.menus=[],this.isLoading=!1}ngOnInit(){this.dragulaService.drop("menus").subscribe(t=>{this.menus.forEach((o,r)=>o.sortOrder=r+1);let i=this.menus.map((o,r)=>({id:o.id,sortOrder:o.sortOrder}));this.mService.menuSorting(i).subscribe(o=>o)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.pQ),e.Y36(_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-navigation-list"]],inputs:{menus:"menus",isLoading:"isLoading"},decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["loadedBlock",""],["aria-hidden","true","label","Loading...","size","sm"],["flush","","cListGroup","","dragula","menus",3,"dragulaModel","dragulaModelChange",4,"ngIf","ngIfElse"],["emptyMenuBlock",""],["flush","","cListGroup","","dragula","menus",3,"dragulaModel","dragulaModelChange"],["cListGroupItem","","routerLinkActive","active","class","d-flex justify-content-between align-items-center border-0 my-1 rounded",3,"ngClass","routerLink",4,"ngFor","ngForOf"],["cListGroupItem","","routerLinkActive","active",1,"d-flex","justify-content-between","align-items-center","border-0","my-1","rounded",3,"ngClass","routerLink"],[1,"my-1"],["color","primary","shape","rounded-pill","class","float-end",4,"ngIf"],["color","primary","shape","rounded-pill",1,"float-end"]],template:function(t,i){if(1&t&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e.YNc(2,I,4,0,"c-row",0),e.YNc(3,S,4,2,"ng-template",null,1,e.W1O),e.qZA(),e.qZA()),2&t){const o=e.MAs(4);e.xp6(2),e.Q6J("ngIf",i.isLoading)("ngIfElse",o)}},directives:[s.AkF,s.yue,u.O5,s.iok,s.Yp0,s.ORR,Z.Vv,s.Xre,g.sW,u.sg,l.yS,s.Ow$,l.Od,u.mk,s.FN3],styles:[""]}),n})();var f=c(5458);function O(n,a){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._UZ(2,"c-spinner",2),e._uU(3," Loading... "),e.qZA(),e.qZA())}function w(n,a){if(1&n&&e._UZ(0,"img",13),2&n){const t=e.oxw(3);e.Q6J("src",t.menu.primaryImg,e.LSH)}}function N(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"span",5),e.TgZ(1,"h3",6),e._uU(2),e.qZA(),e.TgZ(3,"span",7),e.TgZ(4,"app-input-switch",8),e.NdJ("onChange",function(o){return e.CHM(t),e.oxw(2).onChangeAvailability(o)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"c-card",9),e.YNc(6,w,1,1,"img",10),e.TgZ(7,"c-card-body",11),e.TgZ(8,"p",12),e._uU(9),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.menu.title),e.xp6(2),e.Q6J("isLoading",t.updatingAvailableStatus)("status",t.menu.isAvailable),e.xp6(2),e.Q6J("ngIf",t.menu.primaryImg),e.xp6(3),e.Oqu(t.menu.description)}}function U(n,a){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._uU(2," Menu Not Selected "),e.qZA(),e.qZA())}function Y(n,a){if(1&n&&(e.YNc(0,N,10,5,"ng-template",3),e.YNc(1,U,3,0,"ng-template",null,4,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",i.menu)("ngIfElse",t)}}let J=(()=>{class n{constructor(t){this.mService=t,this.isLoading=!1,this.updatingAvailableStatus=!1}ngOnInit(){}onChangeAvailability(t){var i=this;return(0,m.Z)(function*(){console.log(t),null!=t&&null!=t&&i.menu&&(i.updatingAvailableStatus=!0,i.menu.isAvailable=t.status,yield i.mService.menuAvailability(i.menu).forEach(o=>console.log(o)),i.updatingAvailableStatus=!1)})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-card"]],inputs:{menu:"menu",isLoading:"isLoading"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loadedBlock",""],["aria-hidden","true","label","Loading...","size","sm"],[3,"ngIf","ngIfElse"],["emptyMenuBlock",""],[1,"d-flex","justify-content-between"],["cCardTitle",""],[1,"d-block-inline"],["label","Is Available",3,"isLoading","status","onChange"],[1,"mb-4"],["cImg","","rounded","","fluid","","class","img-lg",3,"src",4,"ngIf"],[1,""],["cCardText","",1,"text-wrap"],["cImg","","rounded","","fluid","",1,"img-lg",3,"src"]],template:function(t,i){if(1&t&&(e.YNc(0,O,4,0,"c-card",0),e.YNc(1,Y,3,2,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("ngIf",i.isLoading)("ngIfElse",o)}},directives:[u.O5,s.AkF,s.yue,s.ORR,s.qkm,f.a,s.PVT,s.XLq],styles:[""]}),n})(),F=(()=>{class n{constructor(t,i){this.route=t,this.mService=i,this.menus=[],this.isLoadingMenu=!1}ngOnInit(){var t=this;return(0,m.Z)(function*(){yield t.loadMenu(),t.route.params.forEach(i=>{if(i.id){let o=i.id;t.selectMenu(t.menus.find(r=>r.id==o))}})})()}selectMenu(t){this.selectedMenu=t}loadMenu(){var t=this;return(0,m.Z)(function*(){t.isLoadingMenu=!0,yield t.mService.menus().forEach(i=>t.menus=i),t.isLoadingMenu=!1})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.gz),e.Y36(_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-board"]],decls:6,vars:4,consts:[["md","4"],[3,"menus","isLoading"],["md","8"],[3,"menu","isLoading"]],template:function(t,i){1&t&&(e.TgZ(0,"c-row"),e.TgZ(1,"c-col",0),e._UZ(2,"app-menu-navigation-list",1),e.qZA(),e.TgZ(3,"c-col",2),e._UZ(4,"app-menu-card",3),e._UZ(5,"router-outlet"),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("menus",i.menus)("isLoading",i.isLoadingMenu),e.xp6(2),e.Q6J("menu",i.selectedMenu)("isLoading",i.isLoadingMenu))},directives:[s.iok,s.Yp0,E,J,l.lC],styles:[""]}),n})();var Q=c(727);function B(n,a){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._UZ(2,"c-spinner",2),e._uU(3," Loading... "),e.qZA(),e.qZA())}function R(n,a){if(1&n&&e._UZ(0,"img",16),2&n){const t=e.oxw().$implicit;e.Q6J("src",t.primaryImg,e.LSH)}}function k(n,a){if(1&n&&(e.TgZ(0,"span"),e.TgZ(1,"c-badge",17),e.TgZ(2,"span",18),e._uU(3),e.ALo(4,"currency"),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",e.xi3(4,1,t.oldPrice,"Pkr ")," ")}}function $(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"c-col"),e.TgZ(1,"c-card",7),e.YNc(2,R,1,1,"img",8),e.TgZ(3,"c-card-body",9),e.TgZ(4,"span",10),e.TgZ(5,"h6"),e._uU(6),e.qZA(),e.TgZ(7,"app-input-switch",11),e.NdJ("onChange",function(o){return e.CHM(t),e.oxw(3).onChangeMenuItemAvailability(o)}),e.qZA(),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.TgZ(10,"div",12),e.TgZ(11,"span",13),e.TgZ(12,"span"),e.TgZ(13,"c-badge",14),e._uU(14),e.ALo(15,"currency"),e.qZA(),e.qZA(),e.YNc(16,k,5,4,"span",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(2),e.Q6J("ngIf",t.primaryImg),e.xp6(4),e.Oqu(t.title),e.xp6(1),e.Q6J("isLoading",t.updatingAvailability)("id",t.id)("status",t.isAvailable),e.xp6(2),e.Oqu(t.description),e.xp6(5),e.Oqu(e.xi3(15,8,t.price,"Pkr ")),e.xp6(2),e.Q6J("ngIf",t.oldPrice)}}function j(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"c-row",5),e.NdJ("dragulaModelChange",function(o){return e.CHM(t),e.oxw(2).menuItems=o}),e.YNc(1,$,17,11,"c-col",6),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("sm",1)("gutter",2)("dragulaModel",t.menuItems),e.xp6(1),e.Q6J("ngForOf",t.menuItems)}}function z(n,a){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._uU(2," empty "),e.qZA(),e.qZA())}function X(n,a){if(1&n&&(e.YNc(0,j,2,4,"ng-template",3),e.YNc(1,z,3,0,"ng-template",null,4,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",i.menuItems&&i.menuItems.length>0)("ngIfElse",t)}}let H=(()=>{class n{constructor(t,i,o){this.route=t,this.amService=i,this.dragulaService=o,this.menuItems=null,this.sbjs=new Q.w0,this.isLoadingMenuItems=!1}ngOnInit(){var t=this;return(0,m.Z)(function*(){t.route.params.forEach(i=>{i.id&&t.loadMenuItems(i.id)}),t.dragulaService.drop("menuItems").subscribe(i=>{if(t.menuItems){t.menuItems.forEach((r,p)=>r.sortOrder=p+1);let o=t.menuItems.map((r,p)=>({id:r.id,sortOrder:r.sortOrder}));t.amService.menuItemsSorting(o).subscribe(r=>r)}})})()}loadMenuItems(t){var i=this;return(0,m.Z)(function*(){i.isLoadingMenuItems=!0,yield i.amService.menuItems(t).forEach(o=>i.menuItems=o),i.isLoadingMenuItems=!1})()}onChangeMenuItemAvailability(t){var i=this;return(0,m.Z)(function*(){var o;if(console.log(t),t){let r=null===(o=i.menuItems)||void 0===o?void 0:o.find(p=>p.id==t.id);r&&(r.updatingAvailability=!0,r.isAvailable=t.status,i.amService.menuItemAvailability(r).forEach(p=>console.log(p)),r.updatingAvailability=!1)}})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.gz),e.Y36(_),e.Y36(g.pQ))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-item-list"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loadedBlock",""],["aria-hidden","true","label","Loading...","size","sm"],[3,"ngIf","ngIfElse"],["emptyblock",""],["dragula","menuItems",3,"sm","gutter","dragulaModel","dragulaModelChange"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-row"],["class","img-md",3,"cCardImg","src",4,"ngIf"],[1,"d-flex","flex-column","gap-2"],[1,"d-flex","justify-content-between"],["label","Is Available",3,"isLoading","id","status","onChange"],[1,"d-flex","d-grid","gap-2","justify-content-between","align-items-center"],[1,"d-flex","d-grid","gap-2"],["color","primary","shape","rounded-pill"],[4,"ngIf"],[1,"img-md",3,"cCardImg","src"],["color","danger","shape","rounded-pill"],[1,"text-decoration-line-through"]],template:function(t,i){if(1&t&&(e.YNc(0,B,4,0,"c-card",0),e.YNc(1,X,3,2,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("ngIf",i.isLoadingMenuItems)("ngIfElse",o)}},directives:[u.O5,s.AkF,s.yue,s.ORR,s.iok,g.sW,s.Aij,u.sg,s.Yp0,f.a,s.FN3,s.pce],pipes:[u.H9],styles:[""]}),n})();var W=c(5937);function K(n,a){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._UZ(2,"c-spinner",2),e._uU(3," Loading... "),e.qZA(),e.qZA())}function G(n,a){if(1&n&&(e.TgZ(0,"p",17),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.description)}}const P=function(n){return[n]};function V(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"c-col",7),e.TgZ(1,"c-card",8),e._UZ(2,"img",9),e.TgZ(3,"c-card-body",10),e.TgZ(4,"span",11),e.TgZ(5,"h6",12),e._uU(6),e.qZA(),e.TgZ(7,"span"),e.TgZ(8,"app-input-switch",13),e.NdJ("onChange",function(o){return e.CHM(t),e.oxw(3).onChangeAvailability(o)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,G,2,1,"p",14),e.TgZ(10,"span",11),e.TgZ(11,"a",15),e.TgZ(12,"c-badge",16),e._uU(13),e.qZA(),e._uU(14," Items"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=a.$implicit;e.Q6J("md",6),e.xp6(2),e.Q6J("src",t.primaryImg,e.LSH),e.xp6(4),e.Oqu(t.title),e.xp6(2),e.Q6J("isLoading",t.updatingAvailability)("id",t.id)("status",t.isAvailable),e.xp6(1),e.Q6J("ngIf",t.description),e.xp6(2),e.Q6J("routerLink",e.VKq(9,P,t.id)),e.xp6(2),e.Oqu(t.totalItems)}}function D(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"c-row",5),e.NdJ("dragulaModelChange",function(o){return e.CHM(t),e.oxw(2).menus=o}),e.YNc(1,V,15,11,"c-col",6),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("gutter",3)("dragulaModel",t.menus),e.xp6(1),e.Q6J("ngForOf",t.menus)}}function ee(n,a){1&n&&(e.TgZ(0,"c-card"),e.TgZ(1,"c-card-body"),e._uU(2," Empty "),e.qZA(),e.qZA())}function te(n,a){if(1&n&&(e.YNc(0,D,2,3,"c-row",3),e.YNc(1,ee,3,0,"ng-template",null,4,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",i.menus&&i.menus.length>0)("ngIfElse",t)}}const ne=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu"]],decls:1,vars:0,template:function(t,i){1&t&&e._UZ(0,"router-outlet")},directives:[l.lC],styles:[""]}),n})(),data:{title:"Menu"},children:[{path:"",component:(()=>{class n{constructor(t,i,o,r,p){this.route=t,this.router=i,this.amService=o,this.dragulaService=r,this.afService=p,this.menus=[],this.selectedMenu=null,this.isLoading=!1}ngOnInit(){this.loadMenu(),this.dragulaService.drop("menus").subscribe(t=>{this.menus.forEach((o,r)=>o.sortOrder=r+1);let i=this.menus.map((o,r)=>({id:o.id,sortOrder:o.sortOrder}));this.amService.menuSorting(i).subscribe(o=>o)})}ngOnDestroy(){}loadMenu(t){var i=this;return(0,m.Z)(function*(){i.isLoading=!0,yield i.amService.menus(t).forEach(o=>i.menus=o),i.isLoading=!1})()}onChangeAvailability(t){var i=this;return(0,m.Z)(function*(){if(t.id){let o=i.menus.find(r=>r.id==t.id);o&&(o.updatingAvailability=!0,o.isAvailable=t.status,yield i.amService.menuAvailability(o).forEach(r=>console.log(r)),o.updatingAvailability=!1)}})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(_),e.Y36(g.pQ),e.Y36(W.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-list"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["loadedBlock",""],["aria-hidden","true","label","Loading...","size","sm"],["dragula","menus",3,"gutter","dragulaModel","dragulaModelChange",4,"ngIf","ngIfElse"],["emptyMenuBlock",""],["dragula","menus",3,"gutter","dragulaModel","dragulaModelChange"],["class","",3,"md",4,"ngFor","ngForOf"],[1,"",3,"md"],[1,"d-flex","flex-row"],[1,"img-md",3,"cCardImg","src"],[1,"d-flex","flex-column"],[1,"d-flex","justify-content-between"],["cCardTitle","",1,"text-truncate"],["label","Is Available",3,"isLoading","id","status","onChange"],["cCardText","","class","text-wrap",4,"ngIf"],["cButton","","color","light","size","sm",1,"position-relative",3,"routerLink"],["color","primary","shape","rounded-pill",1,"position-absolute","top-0","start-100","translate-middle"],["cCardText","",1,"text-wrap"]],template:function(t,i){if(1&t&&(e.TgZ(0,"c-row"),e.TgZ(1,"c-col"),e.YNc(2,K,4,0,"c-card",0),e.YNc(3,te,3,2,"ng-template",null,1,e.W1O),e.qZA(),e.qZA()),2&t){const o=e.MAs(4);e.xp6(2),e.Q6J("ngIf",i.isLoading)("ngIfElse",o)}},directives:[s.iok,s.Yp0,u.O5,s.AkF,s.yue,s.ORR,g.sW,s.Aij,u.sg,s.pce,s.qkm,f.a,l.yS,s.Hq3,s.FN3,s.PVT],styles:[""]}),n})(),data:{title:"List"}},{path:":id",component:F,data:{title:"Items"},children:[{path:"",component:H}]}]}];let ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[l.Bz.forChild(ne)],l.Bz]}),n})();var M=c(1728),oe=c(4466);const ae=[s.dTQ,s.hJ1,s.ga2,s.ejP,s.nMh,s.U$I,s.Fme,s.zE6,M.QX,M.Eb,s.TXv,s.lKp,s.Xo8,Z.Xd,s.oTD];let se=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,ie,...ae,g.qE.forRoot(),oe.m]]}),n})()}}]);