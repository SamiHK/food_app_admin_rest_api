"use strict";(self.webpackChunkfoodapp=self.webpackChunkfoodapp||[]).push([[960],{8960:(Ce,Z,l)=>{l.r(Z),l.d(Z,{ManagerModule:()=>qe});var m=l(6019),g=l(7612),u=l(8239),a=l(7537),T=l(5210),e=l(1514),_=l(2282),s=l(3007),A=l(4585),w=l(7079);function P(n,o){1&n&&e._UZ(0,"c-spinner",2)}function J(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"c-form-check",4),e.TgZ(1,"input",5),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw(2).user.enabled=i})("change",function(i){return e.CHM(t),e.oxw(2).onChange(i)}),e.qZA(),e.TgZ(2,"label",6),e._uU(3),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("switch",!0),e.xp6(1),e.Q6J("ngModel",t.user.enabled),e.xp6(2),e.Oqu(t.label)}}function S(n,o){if(1&n&&e.YNc(0,J,4,3,"c-form-check",3),2&n){const t=e.oxw();e.Q6J("ngIf",t.user)}}let x=(()=>{class n{constructor(t){this.authService=t,this.isLoading=!1}ngOnInit(){}onChange(t){this.user&&this.user.id&&(this.isLoading=!0,this.authService.enabled(this.user.id,{enabled:this.user.enabled}).forEach(r=>{this.user&&(this.user.enabled=r.enabled)}).finally(()=>{this.isLoading=!1}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(w.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-active-switch"]],inputs:{label:"label",user:"user"},decls:3,vars:2,consts:[["size","sm",4,"ngIf","ngIfElse"],["elseBlock",""],["size","sm"],[3,"switch",4,"ngIf"],[3,"switch"],["cFormCheckInput","","type","checkbox",3,"ngModel","ngModelChange","change"],["cFormCheckLabel",""]],template:function(t,r){if(1&t&&(e.YNc(0,P,1,0,"c-spinner",0),e.YNc(1,S,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",r.isLoading)("ngIfElse",i)}},directives:[m.O5,s.ORR,s.FzQ,s.yfq,a.Wl,a.JJ,a.On,s.NWu],styles:[""]}),n})();function I(n,o){1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"td",11),e._UZ(2,"c-spinner",12),e.qZA(),e.qZA())}const E=function(n){return{"table-dark":n}},d=function(n){return[n]};function y(n,o){if(1&n&&(e.TgZ(0,"tr",15),e.TgZ(1,"td"),e._UZ(2,"app-user-active-switch",16),e.qZA(),e.TgZ(3,"td",17),e._uU(4),e.qZA(),e.TgZ(5,"td",17),e._uU(6),e.qZA(),e.TgZ(7,"td",17),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.qZA()),2&n){const t=o.$implicit;e.Q6J("ngClass",e.VKq(9,E,!t.enabled)),e.xp6(2),e.Q6J("user",t),e.xp6(1),e.Q6J("routerLink",e.VKq(11,d,t.id)),e.xp6(1),e.Oqu(t.username),e.xp6(1),e.Q6J("routerLink",e.VKq(13,d,t.id)),e.xp6(1),e.Oqu(t.email),e.xp6(1),e.Q6J("routerLink",e.VKq(15,d,t.id)),e.xp6(1),e.Oqu(t.fullName),e.xp6(2),e.Oqu(t.branchName)}}function L(n,o){1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"td",18),e._uU(2," Empty "),e.qZA(),e.qZA())}function Q(n,o){if(1&n&&(e.YNc(0,y,11,17,"tr",13),e.YNc(1,L,3,0,"tr",14)),2&n){const t=e.oxw();e.Q6J("ngForOf",t.page.items),e.xp6(1),e.Q6J("ngIf",0==t.page.items.length)}}let Y=(()=>{class n{constructor(t){this.amService=t,this.page=new T.T,this.form=new a.cw({search:new a.NI(null,a.kI.required)}),this.isLoading=!1}ngOnInit(){this.loadManagers()}loadManagers(t){var r=this;return(0,u.Z)(function*(){r.isLoading=!0,yield r.amService.filter(t).forEach(i=>r.page=i).finally(()=>r.isLoading=!1)})()}filter(){this.form.valid?this.loadManagers(this.form.value):this.loadManagers()}onPageChange(t){this.form.valid?(Object.assign(t,this.form.value),this.loadManagers(t)):this.loadManagers({number:t.page})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-manager-list"]],decls:36,vars:5,consts:[[1,"mb-4"],[1,"text-right"],["cButton","","color","primary","routerLink","register"],[3,"formGroup","ngSubmit"],["cFormFloating",""],["cFormControl","","formControlName","search","name","search","type","search","placeholder","Search by username, email or name","autofocus",""],["cLabel","","for","search"],["cTable","","hover",""],[4,"ngIf","ngIfElse"],["showResult",""],[3,"totalItems","ngModel","ngModelChange","pageChanged"],["colspan","5",1,"text-center","my-2"],["aria-hidden","true","label","Loading..."],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass"],[3,"user"],[3,"routerLink"],["colspan","5",1,"text-center"]],template:function(t,r){if(1&t&&(e.TgZ(0,"c-card",0),e.TgZ(1,"c-card-body"),e.TgZ(2,"c-row"),e.TgZ(3,"c-col",1),e.TgZ(4,"button",2),e._uU(5,"Register New Manager"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"c-card",0),e.TgZ(7,"c-card-body"),e.TgZ(8,"c-row"),e.TgZ(9,"c-col"),e.TgZ(10,"form",3),e.NdJ("ngSubmit",function(){return r.filter()}),e.TgZ(11,"div",4),e._UZ(12,"input",5),e.TgZ(13,"label",6),e._uU(14,"Search by username, email or name"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"c-card",0),e.TgZ(16,"c-card-body"),e.TgZ(17,"c-row"),e.TgZ(18,"c-col"),e.TgZ(19,"table",7),e.TgZ(20,"thead"),e.TgZ(21,"tr"),e._UZ(22,"th"),e.TgZ(23,"th"),e._uU(24,"Username"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Email"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Full name"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Branch"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"tbody"),e.YNc(32,I,3,0,"tr",8),e.YNc(33,Q,2,2,"ng-template",null,9,e.W1O),e.qZA(),e.qZA(),e.TgZ(35,"pagination",10),e.NdJ("ngModelChange",function(c){return r.page.number=c})("pageChanged",function(c){return r.onPageChange(c)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const i=e.MAs(34);e.xp6(10),e.Q6J("formGroup",r.form),e.xp6(22),e.Q6J("ngIf",r.isLoading)("ngIfElse",i),e.xp6(3),e.Q6J("totalItems",r.page.total)("ngModel",r.page.number)}},directives:[s.AkF,s.yue,s.iok,s.Yp0,s.Hq3,g.rH,a._Y,a.JL,a.sg,s.xPZ,s.oHf,a.Fj,a.JJ,a.u,s.eFW,s.auY,m.O5,A.Qt,a.On,s.ORR,m.sg,m.mk,x],styles:[""]}),n})();var f=l(2967),p=l(1071),v=l(9789);function O(n,o){if(1&n&&(e.TgZ(0,"p",18),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.alert.message)}}function B(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("Note: by default password will be same as username: ",t.form.controls.username.value,"")}}function k(n,o){1&n&&(e.TgZ(0,"span"),e._UZ(1,"c-spinner",19),e._uU(2," Registering... "),e.qZA())}function R(n,o){1&n&&e._uU(0," Register ")}let V=(()=>{class n{constructor(t,r,i){this.amService=t,this.router=r,this.commonService=i,this.form=new a.cw({username:new a.NI(null,[a.kI.required]),password:new a.NI(null),confirmPassword:new a.NI(null)}),this.isLoading=!1,this.alert=new f.b,this.form.addValidators(this.commonService.checkPassword)}ngOnInit(){}onSubmit(){var t=this;return(0,u.Z)(function*(){t.form.valid&&(t.commonService.hideAlert(t.alert),t.isLoading=!0,t.amService.register(t.form.value).forEach(r=>{console.log(r),r&&r.error?t.commonService.showAlert(t.alert,r.error,r.message):r&&(t.commonService.showAlert(t.alert,"Manager Registered","New Manager has been registered","success"),t.router.navigate(["manager",r.id]))}).catch(r=>{console.log(r),t.commonService.showAlert(t.alert,r.code,r.message)}).finally(()=>t.isLoading=!1))})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.f),e.Y36(g.F0),e.Y36(p.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-manager-register"]],decls:30,vars:14,consts:[[1,"mb-4"],[3,"color","visible","dismissible","visibleChange"],["cAlertHeading",""],["class","m-0",4,"ngIf"],["cForm","",3,"formGroup","ngSubmit"],[3,"disabled"],["cFormFloating","",1,"mb-3"],["formControlName","username","cFormControl","","id","username","placeholder","enter your username or email","autofocus","",3,"valid"],["cLabel","","id","username"],[3,"control"],["formControlName","password","cFormControl","","id","password","placeholder","password","type","password"],["cLabel","","id","password"],[4,"ngIf"],["formControlName","confirmPassword","cFormControl","","id","confirmPassword","placeholder","confirmPassword","type","password"],["cLabel","","id","confirmPassword"],["cButton","","type","submit","color","primary"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"m-0"],["aria-hidden","true","size","sm"]],template:function(t,r){if(1&t&&(e.TgZ(0,"c-card",0),e.TgZ(1,"c-card-body"),e.TgZ(2,"c-alert",1),e.NdJ("visibleChange",function(c){return r.alert.visible=c}),e.TgZ(3,"h6",2),e._uU(4),e.qZA(),e.YNc(5,O,2,1,"p",3),e.qZA(),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(7,"fieldset",5),e.TgZ(8,"div",6),e._UZ(9,"input",7),e.TgZ(10,"label",8),e._uU(11,"Username"),e.qZA(),e._UZ(12,"app-input-error",9),e.qZA(),e.TgZ(13,"div",6),e._UZ(14,"input",10),e.TgZ(15,"label",11),e._uU(16,"Password"),e.qZA(),e._UZ(17,"app-input-error",9),e.qZA(),e.YNc(18,B,2,1,"p",12),e.TgZ(19,"div",6),e._UZ(20,"input",13),e.TgZ(21,"label",14),e._uU(22,"Confirm Password"),e.qZA(),e._UZ(23,"app-input-error",9),e.qZA(),e.TgZ(24,"c-row"),e.TgZ(25,"c-col"),e.TgZ(26,"button",15),e.YNc(27,k,3,0,"span",16),e.YNc(28,R,1,0,"ng-template",null,17,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const i=e.MAs(29);e.xp6(2),e.Q6J("color",r.alert.type)("visible",r.alert.visible)("dismissible",!0),e.xp6(2),e.Oqu(r.alert.title),e.xp6(1),e.Q6J("ngIf",r.alert.message),e.xp6(1),e.Q6J("formGroup",r.form),e.xp6(1),e.Q6J("disabled",r.isLoading),e.xp6(2),e.Q6J("valid",r.form.controls.username.valid),e.xp6(3),e.Q6J("control",r.form.controls.username),e.xp6(5),e.Q6J("control",r.form.controls.password),e.xp6(1),e.Q6J("ngIf",!r.form.controls.password.value),e.xp6(5),e.Q6J("control",r.form),e.xp6(4),e.Q6J("ngIf",r.isLoading)("ngIfElse",i)}},directives:[s.AkF,s.yue,s.wxo,s.bqr,m.O5,a._Y,a.JL,s.$_X,a.sg,s.xPZ,a.Fj,s.oHf,a.JJ,a.u,s.eFW,v.w,s.iok,s.Yp0,s.Hq3,s.ORR],styles:[""]}),n})();var U=l(8119);class q extends class{}{constructor(){super(...arguments),this.id="",this._enabled=!1}get enabled(){return this._enabled}set enabled(o){this._enabled=1==o}}class W extends q{constructor(){super(...arguments),this.branch=new U.I}}var j=l(1579),C=l(2835),b=l(8260),F=l(4522);let z=(()=>{class n{constructor(t,r){this.http=t,this.commonService=r,this.BASE_URL=`${b.N.BASE_URL}/user`}updateEmail(t,r){return this.http.post(`${this.BASE_URL}/${t}/email`,r).pipe((0,C.K)(this.commonService.catchError))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(F.eN),e.LFG(p.v))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),G=(()=>{class n{constructor(t,r){this.http=t,this.commonService=r,this.BASE_URL=`${b.N.BASE_URL}/profile`}update(t,r){return this.http.post(`${this.BASE_URL}/${t}`,r).pipe((0,C.K)(this.commonService.catchError))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(F.eN),e.LFG(p.v))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var M=l(9832);function $(n,o){if(1&n&&(e.TgZ(0,"p",9),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.alert.message)}}function X(n,o){if(1&n&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.user.fullName)}}function K(n,o){1&n&&(e.TgZ(0,"strong"),e._uU(1,"N/A"),e.qZA())}function D(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"c-col"),e.TgZ(1,"small",10),e._uU(2,"Full name"),e.qZA(),e.YNc(3,X,2,1,"strong",11),e.YNc(4,K,2,0,"ng-template",null,12,e.W1O),e.qZA(),e.TgZ(6,"c-col",13),e.TgZ(7,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().editProfile()}),e._uU(8,"Edit"),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(5),r=e.oxw();e.xp6(3),e.Q6J("ngIf",r.user.fullName)("ngIfElse",t)}}function ee(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"c-col"),e.TgZ(1,"form",15),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().saveProfile()}),e.TgZ(2,"fieldset",16),e.TgZ(3,"c-row"),e.TgZ(4,"c-col",17),e.TgZ(5,"div",18),e._UZ(6,"input",19),e._UZ(7,"input",20),e.qZA(),e.qZA(),e.TgZ(8,"c-col",21),e.TgZ(9,"span",22),e.TgZ(10,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelEditProfile()}),e._uU(11,"Cancel"),e.qZA(),e.TgZ(12,"button",24),e._uU(13," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.profileForm),e.xp6(1),e.Q6J("disabled",t.savingProfile),e.xp6(10),e.Q6J("loading",t.savingProfile)}}function te(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"c-col"),e.TgZ(1,"small",10),e._uU(2,"Email"),e.qZA(),e.TgZ(3,"strong"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"c-col",13),e.TgZ(6,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().editUser()}),e._uU(7,"Edit"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.user.email)}}function ne(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"c-col"),e.TgZ(1,"form",15),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().saveUser()}),e.TgZ(2,"fieldset",16),e.TgZ(3,"c-row"),e.TgZ(4,"c-col",17),e.TgZ(5,"div"),e._UZ(6,"input",25),e._UZ(7,"app-input-error",26),e.qZA(),e.qZA(),e.TgZ(8,"c-col",21),e.TgZ(9,"span",22),e.TgZ(10,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelEditUser()}),e._uU(11,"Cancel"),e.qZA(),e.TgZ(12,"button",24),e._uU(13," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.userForm),e.xp6(1),e.Q6J("disabled",t.savingUser),e.xp6(4),e.Q6J("valid",t.userForm.controls.email.valid),e.xp6(1),e.Q6J("control",t.userForm.controls.email),e.xp6(5),e.Q6J("loading",t.savingUser)}}function re(n,o){if(1&n&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.user.lastPasswordUpdate)}}function oe(n,o){1&n&&(e.TgZ(0,"strong"),e._uU(1,"Not updated"),e.qZA())}function ae(n,o){if(1&n&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.user.lastLogin)}}function se(n,o){1&n&&(e.TgZ(0,"strong"),e._uU(1,"Not logged in"),e.qZA())}function ie(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"c-row"),e.TgZ(1,"c-col"),e.TgZ(2,"small",10),e._uU(3,"Password update"),e.qZA(),e.YNc(4,re,2,1,"strong",11),e.YNc(5,oe,2,0,"ng-template",null,27,e.W1O),e.qZA(),e.TgZ(7,"c-col",28),e.TgZ(8,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().editUpdatePassword()}),e._uU(9,"Change Password"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"c-row"),e.TgZ(11,"c-col"),e.TgZ(12,"small",10),e._uU(13,"Last login"),e.qZA(),e.YNc(14,ae,2,1,"strong",11),e.YNc(15,se,2,0,"ng-template",null,29,e.W1O),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(6),r=e.MAs(16),i=e.oxw();e.xp6(4),e.Q6J("ngIf",i.user.lastPasswordUpdate)("ngIfElse",t),e.xp6(10),e.Q6J("ngIf",i.user.lastLogin)("ngIfElse",r)}}function le(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",15),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().updatePassword()}),e.TgZ(1,"fieldset",16),e.TgZ(2,"c-row"),e.TgZ(3,"c-col",17),e.TgZ(4,"div",18),e._UZ(5,"input",30),e._UZ(6,"input",31),e.qZA(),e._UZ(7,"app-input-error",26),e.qZA(),e.TgZ(8,"c-col",21),e.TgZ(9,"span",22),e.TgZ(10,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelUpdatePassword()}),e._uU(11,"Cancel"),e.qZA(),e.TgZ(12,"button",24),e._uU(13," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.passwordForm),e.xp6(1),e.Q6J("disabled",t.updatingPassword),e.xp6(4),e.Q6J("valid",t.passwordForm.controls.password.valid),e.xp6(1),e.Q6J("valid",t.passwordForm.valid),e.xp6(1),e.Q6J("control",t.passwordForm),e.xp6(5),e.Q6J("loading",t.updatingPassword)}}let ce=(()=>{class n{constructor(t,r,i,c){this.authService=t,this.userService=r,this.profileService=i,this.commonService=c,this.user=new q,this.alert=new f.b,this.userForm=new a.cw({email:new a.NI(null,[a.kI.required,a.kI.email])}),this.isEditUser=!1,this.savingUser=!1,this.profileForm=new a.cw({firstName:new a.NI(null),lastName:new a.NI(null)}),this.isEditProfile=!1,this.savingProfile=!1,this.passwordForm=new a.cw({password:new a.NI(null,a.kI.required),confirmPassword:new a.NI(null)},this.commonService.checkPassword),this.isUpdatePassword=!1,this.updatingPassword=!1}ngOnInit(){}editUser(){this.userForm.controls.email.setValue(this.user.email),this.isEditUser=!0}cancelEditUser(){this.isEditUser=!1,this.userForm.reset()}saveUser(){this.userForm.valid&&(this.savingUser=!0,this.userService.updateEmail(this.user.id,this.userForm.value).forEach(t=>{t&&t.error?this.commonService.showAlert(this.alert,t.error.code,t.error.message):(this.commonService.showSuccessAlert(this.alert,"Email has been updated"),this.user.email=t.email)}).then(t=>{this.isEditUser=!1,this.userForm.reset()}).catch(t=>{"ER_DUP_ENTRY"==t.code?this.userForm.controls.email.setErrors({else:"email already registered. try another one"}):this.commonService.showErrorAlert(this.alert,t)}).finally(()=>{this.savingUser=!1}))}editProfile(){this.profileForm.controls.firstName.setValue(this.user.firstName),this.profileForm.controls.lastName.setValue(this.user.lastName),this.isEditProfile=!0}cancelEditProfile(){this.isEditProfile=!1,this.profileForm.reset()}saveProfile(){this.savingProfile=!0,this.profileService.update(this.user.id,this.profileForm.value).forEach(t=>{t&&t.error?this.commonService.showAlert(this.alert,t.error.code,t.error.message):(this.commonService.showSuccessAlert(this.alert,"Profile has been updated"),Object.assign(this.user,t))}).catch(t=>{this.commonService.showErrorAlert(this.alert,t)}).finally(()=>{this.isEditProfile=!1,this.savingProfile=!1,this.profileForm.reset()})}editUpdatePassword(){this.isUpdatePassword=!0}cancelUpdatePassword(){this.isUpdatePassword=!1,this.passwordForm.reset()}updatePassword(){this.passwordForm.valid&&(this.updatingPassword=!0,this.authService.updatePassword(this.user.id,this.passwordForm.value).forEach(t=>{t&&t.error||(Object.assign(this.user,t),this.commonService.showSuccessAlert(this.alert,"Password has been updated"),this.isUpdatePassword=!1,this.passwordForm.reset())}).catch(t=>{this.commonService.showErrorAlert(this.alert,t)}).finally(()=>{this.updatingPassword=!1}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(w.e),e.Y36(z),e.Y36(G),e.Y36(p.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-profile"]],inputs:{user:"user"},decls:19,vars:11,consts:[[1,"mb-4"],[3,"color","visible","dismissible","visibleChange"],["cAlertHeading",""],["class","m-0",4,"ngIf"],[1,"mb-3"],[3,"ngIf","ngIfElse"],["editProfileForm",""],["editUserForm",""],["editUpdatePasswordForm",""],[1,"m-0"],[1,"d-flex"],[4,"ngIf","ngIfElse"],["na",""],["xs","1",1,""],["cButton","","size","sm","color","light",1,"float-end",3,"click"],[3,"formGroup","ngSubmit"],[3,"disabled"],["sm","8"],[1,"d-grid","gap-2","d-flex"],["cFormControl","","formControlName","firstName","name","firstName","placeholder","First Name","type","text"],["cFormControl","","formControlName","lastName","name","lastName","placeholder","Last Name","type","text"],["sm","4"],[1,"float-end"],["cButton","","type","button","color","light",3,"click"],["xcButton","","loadingLabel","Saving...","type","submit",1,"ml-2",3,"loading"],["cFormControl","","formControlName","email","name","email","placeholder","Email","type","email",3,"valid"],[3,"control"],["notUpdated",""],["xs","6",1,""],["notLoggedIn",""],["cFormControl","","formControlName","password","name","password","placeholder","Password","type","password",3,"valid"],["cFormControl","","formControlName","confirmPassword","name","confirmPassword","placeholder","Confirm Password","type","password",3,"valid"]],template:function(t,r){if(1&t&&(e.TgZ(0,"c-card",0),e.TgZ(1,"c-card-body"),e.TgZ(2,"c-alert",1),e.NdJ("visibleChange",function(c){return r.alert.visible=c}),e.TgZ(3,"h6",2),e._uU(4),e.qZA(),e.YNc(5,$,2,1,"p",3),e.qZA(),e.TgZ(6,"c-row",4),e.YNc(7,D,9,2,"ng-template",5),e.YNc(8,ee,14,3,"ng-template",null,6,e.W1O),e.qZA(),e._UZ(10,"hr"),e.TgZ(11,"c-row"),e.YNc(12,te,8,1,"ng-template",5),e.YNc(13,ne,14,5,"ng-template",null,7,e.W1O),e.qZA(),e._UZ(15,"hr"),e.YNc(16,ie,17,4,"ng-template",5),e.YNc(17,le,14,6,"ng-template",null,8,e.W1O),e.qZA(),e.qZA()),2&t){const i=e.MAs(9),c=e.MAs(14),h=e.MAs(18);e.xp6(2),e.Q6J("color",r.alert.type)("visible",r.alert.visible)("dismissible",!0),e.xp6(2),e.Oqu(r.alert.title),e.xp6(1),e.Q6J("ngIf",r.alert.message),e.xp6(2),e.Q6J("ngIf",!r.isEditProfile)("ngIfElse",i),e.xp6(5),e.Q6J("ngIf",!r.isEditUser)("ngIfElse",c),e.xp6(4),e.Q6J("ngIf",!r.isUpdatePassword)("ngIfElse",h)}},directives:[s.AkF,s.yue,s.wxo,s.bqr,m.O5,s.iok,s.Yp0,s.Hq3,a._Y,a.JL,a.sg,s.oHf,a.Fj,a.JJ,a.u,M.L,v.w],styles:[""]}),n})();function me(n,o){1&n&&(e.TgZ(0,"c-row",2),e.TgZ(1,"c-col",2),e._UZ(2,"c-spinner",3),e.TgZ(3,"span",4),e._uU(4," Loading... "),e.qZA(),e.qZA(),e.qZA())}const ge=function(n){return["/branch",n]};function pe(n,o){if(1&n&&(e.TgZ(0,"span"),e.TgZ(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"a",15),e._uU(4),e.qZA(),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.manager.branch.name," "),e.xp6(1),e.Q6J("routerLink",e.VKq(3,ge,t.manager.branchId)),e.xp6(1),e.hij(" ",t.manager.branch.code," ")}}function ue(n,o){1&n&&e._uU(0,"N/A")}function _e(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"c-row"),e.TgZ(1,"c-col"),e.YNc(2,pe,5,5,"span",9),e.YNc(3,ue,1,0,"ng-template",null,11,e.W1O),e.qZA(),e.TgZ(5,"c-col",12),e.TgZ(6,"span",13),e.TgZ(7,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).editBranch()}),e._uU(8,"Edit"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(4),r=e.oxw(2);e.xp6(2),e.Q6J("ngIf",r.manager.branchId)("ngIfElse",t)}}function de(n,o){if(1&n&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.code)}}function fe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span"),e.TgZ(1,"select",22),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw(3).selectedBranchId=i}),e.TgZ(2,"option",23),e._uU(3,"None"),e.qZA(),e.YNc(4,de,2,2,"option",24),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngModel",t.selectedBranchId),e.xp6(3),e.Q6J("ngForOf",t.branchPage.items)}}function he(n,o){1&n&&e._UZ(0,"c-spinner",3)}function Ze(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",16),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw(2).saveBranch()}),e.TgZ(1,"fieldset",17),e.TgZ(2,"c-row"),e.TgZ(3,"c-col"),e.YNc(4,fe,5,2,"span",9),e.YNc(5,he,1,0,"ng-template",null,18,e.W1O),e.qZA(),e.TgZ(7,"c-col",19),e.TgZ(8,"span",20),e.TgZ(9,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).cancelEditBranch()}),e._uU(10,"Cancel"),e.qZA(),e.TgZ(11,"button",21),e._uU(12," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(6),r=e.oxw(2);e.xp6(1),e.Q6J("disabled",r.savingBranch),e.xp6(3),e.Q6J("ngIf",!r.branchLoading)("ngIfElse",t),e.xp6(7),e.Q6J("loading",r.savingBranch)}}function Te(n,o){if(1&n&&(e.TgZ(0,"c-row",5),e.TgZ(1,"c-col",6),e.TgZ(2,"c-row"),e.TgZ(3,"c-col"),e.TgZ(4,"h4"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"c-col",7),e._UZ(7,"app-user-active-switch",8),e.qZA(),e.qZA(),e._UZ(8,"app-user-profile",8),e.TgZ(9,"h4"),e._uU(10,"Branch"),e.qZA(),e.TgZ(11,"c-card"),e.TgZ(12,"c-card-body"),e.YNc(13,_e,9,2,"c-row",9),e.YNc(14,Ze,13,4,"ng-template",null,10,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.MAs(15),r=e.oxw();e.xp6(5),e.hij("@",r.manager.username,""),e.xp6(2),e.Q6J("user",r.manager),e.xp6(1),e.Q6J("user",r.manager),e.xp6(5),e.Q6J("ngIf",!r.isEditBranch)("ngIfElse",t)}}const Ae=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-manager"]],decls:1,vars:0,template:function(t,r){1&t&&e._UZ(0,"router-outlet")},directives:[g.lC],styles:[""]}),n})(),data:{title:"Manager"},children:[{path:"",component:Y,data:{title:"Search"}},{path:"register",component:V,data:{title:"Register New Manager"}},{path:":id",component:(()=>{class n{constructor(t,r,i,c,h){this.route=t,this.router=r,this.amService=i,this.abService=c,this.commonService=h,this.manager=new W,this.isLoading=!1,this.isEditBranch=!1,this.selectedBranchId=null,this.branchPage=new T.T,this.branchLoading=!1,this.savingBranch=!1,this.alert=new f.b;let N=this.route.snapshot.params.id;N&&(this.manager.id=N)}ngOnInit(){var t=this;return(0,u.Z)(function*(){t.manager.id&&(t.isLoading=!0,yield t.amService.get(t.manager.id).forEach(r=>t.manager=r).finally(()=>t.isLoading=!1))})()}loadBranch(){this.branchLoading=!0,this.abService.available().forEach(t=>this.branchPage=t).finally(()=>this.branchLoading=!1)}editBranch(){this.branchPage&&0==this.branchPage.items.length&&this.loadBranch(),this.isEditBranch=!0}cancelEditBranch(){this.isEditBranch=!1,this.selectedBranchId=null}saveBranch(){var t=this;return(0,u.Z)(function*(){t.selectedBranchId&&t.manager.id&&(t.savingBranch=!0,yield t.abService.updateManager(t.selectedBranchId,{managerId:t.manager.id}).forEach(r=>{t.manager.branchId=r.id,t.manager.branch=new U.I,Object.assign(t.manager.branch,r),t.isEditBranch=!1,t.loadBranch()}).catch(r=>console.log(r)).finally(()=>{t.selectedBranchId=null,t.savingBranch=!1}))})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.gz),e.Y36(g.F0),e.Y36(_.f),e.Y36(j.F),e.Y36(p.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-manager-view"]],decls:3,vars:2,consts:[["class","",4,"ngIf","ngIfElse"],["elseBlock",""],[1,""],["size","sm"],[1,"d-flex-inline","my-auto"],[1,"justify-content-center"],["md","8"],["xs","1"],[3,"user"],[4,"ngIf","ngIfElse"],["branchForm",""],["na",""],["xs","2"],[1,"float-end"],["cButton","","color","light","size","sm",3,"click"],["cButton","","color","light","size","sm",3,"routerLink"],[3,"ngSubmit"],[3,"disabled"],["loader",""],["xs","4"],[1,"d-grid","gap-2","d-flex","float-end"],["xcButton","","loadingLabel","Saving...","type","submit",3,"loading"],["cSelect","","name","branch",3,"ngModel","ngModelChange"],["value","null"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,r){if(1&t&&(e.YNc(0,me,5,0,"c-row",0),e.YNc(1,Te,16,5,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",r.isLoading)("ngIfElse",i)}},directives:[m.O5,s.iok,s.Yp0,s.ORR,x,ce,s.AkF,s.yue,s.Hq3,g.yS,a._Y,a.JL,a.F,M.L,s.nqR,a.EJ,a.JJ,a.On,a.YN,a.Kr,m.sg],styles:[""]}),n})(),data:{title:"Profile"}}]}];let we=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(Ae)],g.Bz]}),n})();var xe=l(1382),ve=l(8063);const Ue=[s.dTQ,s.hJ1,s.ejP,s.zE6,s.U$I,s.Fme,s.nMh,ve.QX];let qe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,we,a.u5,a.UX,xe.m,...Ue,A.u3.forRoot()]]}),n})()}}]);